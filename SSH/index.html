
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Michael Hubbard (rikosintie)">
      
      
        <link rel="canonical" href="https://rikosintie.github.io/Ubuntu4NetworkEngineers/SSH/">
      
      
        <link rel="prev" href="../Log_tools/">
      
      
        <link rel="next" href="../KVM-Bridge/">
      
      
        
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>SSH - Ubuntu for Network Engineers</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
  
  <style>:root{--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.5%207.75A.75.75%200%200%201%207.25%207h1a.75.75%200%200%201%20.75.75v2.75h.25a.75.75%200%200%201%200%201.5h-2a.75.75%200%200%201%200-1.5h.25v-2h-.25a.75.75%200%200%201-.75-.75M8%206a1%201%200%201%201%200-2%201%201%200%200%201%200%202%22/%3E%3C/svg%3E');--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1%207.775V2.75C1%201.784%201.784%201%202.75%201h5.025c.464%200%20.91.184%201.238.513l6.25%206.25a1.75%201.75%200%200%201%200%202.474l-5.026%205.026a1.75%201.75%200%200%201-2.474%200l-6.25-6.25A1.75%201.75%200%200%201%201%207.775m1.5%200c0%20.066.026.13.073.177l6.25%206.25a.25.25%200%200%200%20.354%200l5.025-5.025a.25.25%200%200%200%200-.354l-6.25-6.25a.25.25%200%200%200-.177-.073H2.75a.25.25%200%200%200-.25.25ZM6%205a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M3.499.75a.75.75%200%200%201%201.5%200v.996C5.9%202.903%206.793%203.65%207.662%204.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873%2010.794-.045%2012.622.26%2014.408.558%2016%201.94%2016%204.25c0%201.278-.954%202.575-2.44%202.734l.146.508.065.22c.203.701.412%201.455.476%202.226.142%201.707-.4%203.03-1.487%203.898C11.714%2014.671%2010.27%2015%208.75%2015h-6a.75.75%200%200%201%200-1.5h1.376a4.5%204.5%200%200%201-.563-1.191%203.84%203.84%200%200%201-.05-2.063%204.65%204.65%200%200%201-2.025-.293.75.75%200%200%201%20.525-1.406c1.357.507%202.376-.006%202.698-.318l.009-.01a.747.747%200%200%201%201.06%200%20.75.75%200%200%201-.012%201.074c-.912.92-.992%201.835-.768%202.586.221.74.745%201.337%201.196%201.621H8.75c1.343%200%202.398-.296%203.074-.836.635-.507%201.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.4%202.4%200%200%201-.507-.441%203.1%203.1%200%200%201-.633-1.248.75.75%200%200%201%201.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738%200%201.25-.615%201.25-1.25%200-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706%201.345-.46.92-.27%201.774.019%203.062l.042.19.01.05c.348.443.666.949.94%201.553a.75.75%200%201%201-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7%205.527c-.814-.68-1.75-1.462-2.692-2.619a3.7%203.7%200%200%200-1.023.88c-.406.495-.663%201.036-.722%201.508.116.122.306.21.591.239.388.038.797-.06%201.032-.19a.75.75%200%200%201%20.728%201.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75%205.677V5.5c0-.984.48-1.94%201.077-2.664.46-.559%201.05-1.055%201.673-1.353z%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M6.457%201.047c.659-1.234%202.427-1.234%203.086%200l6.082%2011.378A1.75%201.75%200%200%201%2014.082%2015H1.918a1.75%201.75%200%200%201-1.543-2.575Zm1.763.707a.25.25%200%200%200-.44%200L1.698%2013.132a.25.25%200%200%200%20.22.368h12.164a.25.25%200%200%200%20.22-.368Zm.53%203.996v2.5a.75.75%200%200%201-1.5%200v-2.5a.75.75%200%200%201%201.5%200M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M13.78%204.22a.75.75%200%200%201%200%201.06l-7.25%207.25a.75.75%200%200%201-1.06%200L2.22%209.28a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018L6%2010.94l6.72-6.72a.75.75%200%200%201%201.06%200%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.92%206.085h.001a.749.749%200%201%201-1.342-.67c.169-.339.436-.701.849-.977C6.845%204.16%207.369%204%208%204a2.76%202.76%200%200%201%201.637.525c.503.377.863.965.863%201.725%200%20.448-.115.83-.329%201.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6%206%200%200%200-.26.16%201%201%200%200%200-.276.245.75.75%200%200%201-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1%201%200%200%200%20.277-.245C8.96%206.514%209%206.427%209%206.25a.61.61%200%200%200-.262-.525A1.27%201.27%200%200%200%208%205.5c-.369%200-.595.09-.74.187a1%201%200%200%200-.34.398M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.344%202.343za8%208%200%200%201%2011.314%2011.314A8.002%208.002%200%200%201%20.234%2010.089a8%208%200%200%201%202.11-7.746m1.06%2010.253a6.5%206.5%200%201%200%209.108-9.275%206.5%206.5%200%200%200-9.108%209.275M6.03%204.97%208%206.94l1.97-1.97a.749.749%200%200%201%201.275.326.75.75%200%200%201-.215.734L9.06%208l1.97%201.97a.749.749%200%200%201-.326%201.275.75.75%200%200%201-.734-.215L8%209.06l-1.97%201.97a.749.749%200%200%201-1.275-.326.75.75%200%200%201%20.215-.734L6.94%208%204.97%206.03a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M9.504.43a1.516%201.516%200%200%201%202.437%201.713L10.415%205.5h2.123c1.57%200%202.346%201.909%201.22%203.004l-7.34%207.142a1.25%201.25%200%200%201-.871.354h-.302a1.25%201.25%200%200%201-1.157-1.723L5.633%2010.5H3.462c-1.57%200-2.346-1.909-1.22-3.004zm1.047%201.074L3.286%208.571A.25.25%200%200%200%203.462%209H6.75a.75.75%200%200%201%20.694%201.034l-1.713%204.188%206.982-6.793A.25.25%200%200%200%2012.538%207H9.25a.75.75%200%200%201-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005%200-.009.004%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M4.72.22a.75.75%200%200%201%201.06%200l1%20.999a3.5%203.5%200%200%201%202.441%200l.999-1a.748.748%200%200%201%201.265.332.75.75%200%200%201-.205.729l-.775.776c.616.63.995%201.493.995%202.444v.327q0%20.15-.025.292c.408.14.764.392%201.029.722l1.968-.787a.75.75%200%200%201%20.556%201.392L13%207.258V9h2.25a.75.75%200%200%201%200%201.5H13v.5q-.002.615-.141%201.186l2.17.868a.75.75%200%200%201-.557%201.392l-2.184-.873A5%205%200%200%201%208%2016a5%205%200%200%201-4.288-2.427l-2.183.873a.75.75%200%200%201-.558-1.392l2.17-.868A5%205%200%200%201%203%2011v-.5H.75a.75.75%200%200%201%200-1.5H3V7.258L.971%206.446a.75.75%200%200%201%20.558-1.392l1.967.787c.265-.33.62-.583%201.03-.722a1.7%201.7%200%200%201-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72%201.28a.75.75%200%200%201%200-1.06m.53%206.28a.75.75%200%200%200-.75.75V11a3.5%203.5%200%201%200%207%200V7.25a.75.75%200%200%200-.75-.75ZM6.173%205h3.654A.17.17%200%200%200%2010%204.827V4.5a2%202%200%201%200-4%200v.327c0%20.096.077.173.173.173%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5%205.782V2.5h-.25a.75.75%200%200%201%200-1.5h6.5a.75.75%200%200%201%200%201.5H11v3.282l3.666%205.76C15.619%2013.04%2014.543%2015%2012.767%2015H3.233c-1.776%200-2.852-1.96-1.899-3.458Zm-2.4%206.565a.75.75%200%200%200%20.633%201.153h9.534a.75.75%200%200%200%20.633-1.153L12.225%2010.5h-8.45ZM9.5%202.5h-3V6c0%20.143-.04.283-.117.403L4.73%209h6.54L9.617%206.403A.75.75%200%200%201%209.5%206Z%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1.75%202.5h10.5a.75.75%200%200%201%200%201.5H1.75a.75.75%200%200%201%200-1.5m4%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5m0%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5M2.5%207.75v6a.75.75%200%200%201-1.5%200v-6a.75.75%200%200%201%201.5%200%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
<meta property="og:type" content="website" />
<meta property="og:title" content="SSH - Ubuntu for Network Engineers" />
<meta property="og:image" content="https://rikosintie.github.io/Ubuntu4NetworkEngineers/assets/images/social/SSH.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:url" content="https://rikosintie.github.io/Ubuntu4NetworkEngineers/SSH/" />
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:title" content="SSH - Ubuntu for Network Engineers" />
<meta property="twitter:image" content="https://rikosintie.github.io/Ubuntu4NetworkEngineers/assets/images/social/SSH.png" />
</head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ssh" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Ubuntu for Network Engineers" class="md-header__button md-logo" aria-label="Ubuntu for Network Engineers" data-md-component="logo">
      
  <img src="../img/ubuntu_icon1.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ubuntu for Network Engineers
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SSH
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/rikosintie/Ubuntu4NetworkEngineers" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    rikosintie/Ubuntu4NetworkEngineers
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Introduction/" class="md-tabs__link">
        
  
  
    
  
  Intro

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Ch01-Using-Ubuntu/" class="md-tabs__link">
        
  
  
    
  
  Usage

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../CH02-Install-Tools/" class="md-tabs__link">
        
  
  
    
  
  Desktop

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../terminal/" class="md-tabs__link">
        
  
  
    
  
  Terminal

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../wireless-tools/" class="md-tabs__link">
        
  
  
    
  
  WiFi Tools

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Log_tools/" class="md-tabs__link">
        
  
  
    
  
  Log Tools

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  SSH

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../KVM-Bridge/" class="md-tabs__link">
        
  
  
    
  
  KVM

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Join-Ubuntu-24.04-desktop-to-AD/" class="md-tabs__link">
        
  
  
    
  
  Add to AD

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Ubuntu for Network Engineers" class="md-nav__button md-logo" aria-label="Ubuntu for Network Engineers" data-md-component="logo">
      
  <img src="../img/ubuntu_icon1.png" alt="logo">

    </a>
    Ubuntu for Network Engineers
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rikosintie/Ubuntu4NetworkEngineers" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    rikosintie/Ubuntu4NetworkEngineers
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Intro
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch01-Using-Ubuntu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Usage
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../CH02-Install-Tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Desktop
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../terminal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Terminal
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../wireless-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WiFi Tools
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Log_tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Log Tools
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    SSH
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    SSH
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#history-of-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      
        History of SSH
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="History of SSH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#work-around-for-ssh-dss" class="md-nav__link">
    <span class="md-ellipsis">
      
        Work Around for ssh-dss
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-ssh-ciphers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verifying ssh ciphers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locating-devices-with-ssh-dss-host-key-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Locating devices with ssh-dss Host Key Algorithms
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-cryptographic-algorithms-should-i-use" class="md-nav__link">
    <span class="md-ellipsis">
      
        What Cryptographic Algorithms Should I use
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What Cryptographic Algorithms Should I use">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-configure-the-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to configure the algorithms
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references-ssh-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        References SSH History
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-to-network-devices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connecting to Network Devices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connecting to Network Devices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-network-commands-remotely" class="md-nav__link">
    <span class="md-ellipsis">
      
        Run network commands remotely
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-devices-with-legacy-ciphers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network Devices with legacy ciphers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-wildcard-in-the-config-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using a wildcard in the config file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-ssh-config-file-for-testing-purposes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create an ssh config file for testing purposes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-different-username-for-network-access" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use a different username for network access
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display-the-configuration-that-will-be-used" class="md-nav__link">
    <span class="md-ellipsis">
      
        Display the configuration that will be used
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-jump-hosts" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH Jump hosts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references-wild-cards" class="md-nav__link">
    <span class="md-ellipsis">
      
        References Wild Cards
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-ssh-connections" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debugging SSH connections
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-crypto-does-my-device-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        What crypto does my device support?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checking-ciphers-with-nmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        Checking ciphers with nmap
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh-gui-clients" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH GUI Clients
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH GUI Clients">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#putty" class="md-nav__link">
    <span class="md-ellipsis">
      
        Putty
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Putty">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#termius" class="md-nav__link">
    <span class="md-ellipsis">
      
        Termius
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Termius">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-termius" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation Termius
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securecrt" class="md-nav__link">
    <span class="md-ellipsis">
      
        SecureCRT
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SecureCRT">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-securecrt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation SecureCRT
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-ssh-keys" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating SSH Keys
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating SSH Keys">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#display-the-existing-keys-on-ubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      
        Display the existing keys on Ubuntu
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-key-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH Key permissions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-ssh-keys" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using the SSH keys
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using the SSH keys">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh-keys-with-a-linux-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH Keys with a Linux server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatic-logins" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automatic logins
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automatic logins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh-add-switches" class="md-nav__link">
    <span class="md-ellipsis">
      
        ssh-add switches
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#i-get-an-error-when-trying-to-use-the-key" class="md-nav__link">
    <span class="md-ellipsis">
      
        I get an error when trying to use the key
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references-ssh-add" class="md-nav__link">
    <span class="md-ellipsis">
      
        References ssh-add
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-keys-with-github" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH Keys with github
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-ssh-keys-with-network-devices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using SSH keys with network devices
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-ssh-keys-with-a-cisco-ios-switch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using SSH keys with a Cisco IOS switch
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using SSH keys with a Cisco IOS switch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-a-time-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure a Time Server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configure a Time Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-ntp-server-config-with-nmap" class="md-nav__link">
    <span class="md-ellipsis">
      
        Check NTP server config with nmap
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-domain-name-create-the-key-set-ssh-v2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add a Domain Name, create the key, set SSH v2
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add a Domain Name, create the key, set SSH v2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#display-the-key" class="md-nav__link">
    <span class="md-ellipsis">
      
        Display the key
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-the-key" class="md-nav__link">
    <span class="md-ellipsis">
      
        Export the Key
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-aaa-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure AAA authentication
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configure AAA authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-the-vty-lines" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure the vty lines
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-your-public-key-to-the-device" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add your PUBLIC key to the device
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-the-ssh-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify the ssh configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login-using-the-ssh-keys" class="md-nav__link">
    <span class="md-ellipsis">
      
        Login using the SSH Keys
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-keys-with-putty" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using keys with Putty
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using keys with Putty">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#can-users-still-login-who-dont-have-keys-configured" class="md-nav__link">
    <span class="md-ellipsis">
      
        Can users still login who don't have keys configured?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-keys-with-a-junos-switch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using the keys with a JunOS switch
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-keys-with-an-aruba-cx-switch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using the keys with an Aruba CX switch
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using the keys with an Aruba CX switch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initial setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewing-the-host-keys" class="md-nav__link">
    <span class="md-ellipsis">
      
        Viewing the host-keys
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-the-enabled-auth-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        List the enabled auth methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-your-public-key" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add your public key
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#view-the-public-key" class="md-nav__link">
    <span class="md-ellipsis">
      
        View the public key
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-logged-in-users" class="md-nav__link">
    <span class="md-ellipsis">
      
        List logged in users
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-key-exchange" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure Key Exchange
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-macs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure MACs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-public-key-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure the Public Key Algorithms
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-ssh-ciphers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Final SSH ciphers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reset-cipher-suites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reset cipher suites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aruba-cx-ssh-server-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aruba CX SSH server commands
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-keys-with-an-hpe-procurve-switch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using the keys with an HPE Procurve switch
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#colorizing-the-ssh-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Colorizing the ssh output
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-openssh-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        The OpenSSH Server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The OpenSSH Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useful-ssh-system-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful SSH system commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-the-openssh-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Edit the OpenSSH configuration file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-the-openssh-server-version" class="md-nav__link">
    <span class="md-ellipsis">
      
        Check the OpenSSH server version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-the-ssh-port-on-the-firewall" class="md-nav__link">
    <span class="md-ellipsis">
      
        Open the SSH port on the Firewall
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-the-ufw-firewall-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify the UFW firewall configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-finished-with-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      
        When finished with SSH
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#an-alias-to-start-ssh-and-add-the-ufw-rule" class="md-nav__link">
    <span class="md-ellipsis">
      
        An alias to start ssh and add the UFW rule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#an-alias-to-stop-ssh-and-remove-the-ufw-rule" class="md-nav__link">
    <span class="md-ellipsis">
      
        An alias to stop ssh and remove the ufw rule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references-openssh-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        References - OpenSSH Server
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yubico-authenticator" class="md-nav__link">
    <span class="md-ellipsis">
      
        Yubico Authenticator
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#brute-forcing-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      
        Brute Forcing SSH
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-ssh-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        General SSH References
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apendix-a-ios-xe-ciphers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Apendix A - IOS-XE CIPHERS
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Apendix A - IOS-XE CIPHERS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secure-shell-version-2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secure Shell Version 2
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supported-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported Algorithms
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../KVM-Bridge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KVM
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Join-Ubuntu-24.04-desktop-to-AD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Add to AD
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="ssh">SSH</h1>
<p><img alt="screenshot" src="../img/Tux-SSH9-2.png" /></p>
<hr />
<p><img alt="▶" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/25b6.svg" title=":arrow_forward:" /> KEY TAKEAWAYS</p>
<ul>
<li>Ubuntu has the latest version of the OpenSSH client installed by default.</li>
<li>All the tools needed to secure and customize the SSH daemon are built in.</li>
<li>You can use terminal tools like tmux and screen to log into devices and manage SSH sessions.</li>
<li>You can use GUI tools like <a href="https://www.vandyke.com/products/securecrt/">SecureCRT</a>, <a href="https://termius.com/">Termius</a>, and putty. See <a href="#ssh-gui-clients">SSH GUI clients</a></li>
</ul>
<hr />
<p>I highly recommend buying a copy of <a href="https://mwl.io/nonfiction/tools#ssh">SSH Mastery</a> by Michael Lucas. It’s available at <a href="https://mwlucas.gumroad.com/l/CngLH">SSH Mastery</a> or <a href="https://www.amazon.com/">Amazon</a> as an ebook for about $10.</p>
<p>When I switched to Linux my only experience with SSH was Putty. Basically just opening putty, putting in an ip address and connecting. I knew that Putty had a separate program, puttygen, to create ssh keys and other functionality but I really just used it to do a simple ssh connection. There is so much more to SSH and Michael explains all of it in SSH Mastery.</p>
<p>For a network engineer the biggest benefit of Ubuntu is that you have an SSH client and server that can be used from the terminal without installing proprietary software. It gets updated automatically when Ubuntu is updated.</p>
<p>As I moved more and more to NetDevOps and started working with Linux servers in the cloud I started to appreciate the benefits of having an ssh client and server integrated with the operating system.</p>
<h2 id="history-of-ssh">History of SSH</h2>
<p>Secure Shell (SSH) has always been an open source project. It was originally released in 1995 by a Finnish computer scientist Tatu Ylönen. Before SSH, telnet was the most popular remote access protocol but it doesn't support encryption.</p>
<p>OpenSSH was released in 1999 by the <a href="https://en.wikipedia.org/wiki/OpenBSD">OpenBSD</a> project. Most network devices supports SSH V1 and V2. V1 has been deprecated and V2 was released in 2006. On network devices if you do a <code>show ip ssh</code> command you might see <code>SSH Enabled - version 1.99</code> which means both V1 and V2 are enabled. What you want to see is <code>SSH Enabled - version 2.0</code> meaning V1 is disabled.</p>
<p>The open source community for ssh and ssl are moving rapidly to drop support for legacy ciphers.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Ubuntu 25.04 includes openSSH 9.9p1 which dropped all support for ssh V1! Any device that uses ssh-dss for the Host Key Algorithm will not connect</p>
</div>
<p>I upgraded to Ubuntu 25.04 on my laptop because I wanted some features in Gnome 48. The openSSH 9.9p1 update turns out a problem for older network devices like an HPE Procurve 2920, a Cisco IOS-XE device running 3.6.7 or older or a Ubiquiti M5 NanoStation. The reason is they are using ssh-dss for the Host Key Algorithm. This was part of the ssh V1 spec so it is gone.</p>
<p>I tried to recompile openSSH using flags but they were serious and there isn't a way to add ssh-dss back. This means that you cannot open a terminal and ssh to an older network device.</p>
<h3 id="work-around-for-ssh-dss">Work Around for ssh-dss</h3>
<ul>
<li>You can install putty using <code>sudo snap install putty</code> since putty brings legacy crypto with it.</li>
<li>You can spin up a virtual machine of Ubuntu 24.04 using KVM.</li>
</ul>
<p>I installed Putty but then realized that I use netmiko and other tools so I had to install a VM. I will glad when ancient network equipment is gone. Just last week (June 2025) a friend texted me that he was at a customer with a working Cisco 4500 running CatOS and Cisco 2926 switches. Gemini couldn't figure out how old these devices were!</p>
<h3 id="verifying-ssh-ciphers">Verifying ssh ciphers</h3>
<p>From a terminal you can use:</p>
<ul>
<li>ssh -V - Display openSSH version</li>
<li>ssh -Q HostKeyAlgorithms - Display the Host Key Algorithms supported</li>
<li>ssh -Q MACs - Display the Message Authentication Code algorithms supported</li>
<li>ssh -Q KexAlgorithms - Display the Key Exchange Algorithms supported.</li>
</ul>
<p>I created the following alias since I was checking often and on several machines:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">alias</span><span class="w"> </span>mw-ssh<span class="o">=</span><span class="s1">&#39;ssh -V &amp;&amp; echo &quot;&quot; &amp;&amp; echo HostKeyAlgorithms &amp;&amp; ssh -Q HostKeyAlgorithms &amp;&amp; echo &quot;&quot; &amp;&amp; echo MACs &amp;&amp; ssh -Q MACs &amp;&amp; echo &quot;&quot; &amp;&amp; echo KEXAlgorithms &amp;&amp; ssh -Q KexAlgorithms&#39;</span>
</span></code></pre></div>
<p>I preface my custom aliases with "mw" so that I can type <code>mw-</code> and hit tab to display them.</p>
<p>This is the output on Ubuntu 25.04</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>mw-ssh
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>OpenSSH_9.9p1<span class="w"> </span>Ubuntu-3ubuntu3.1,<span class="w"> </span>OpenSSL<span class="w"> </span><span class="m">3</span>.4.1<span class="w"> </span><span class="m">11</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2025</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>HostKeyAlgorithms
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>ssh-ed25519
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>ssh-ed25519-cert-v01@openssh.com
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>sk-ssh-ed25519@openssh.com
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>sk-ssh-ed25519-cert-v01@openssh.com
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>ecdsa-sha2-nistp256
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>ecdsa-sha2-nistp256-cert-v01@openssh.com
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>ecdsa-sha2-nistp384
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>ecdsa-sha2-nistp384-cert-v01@openssh.com
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>ecdsa-sha2-nistp521
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>ecdsa-sha2-nistp521-cert-v01@openssh.com
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>sk-ecdsa-sha2-nistp256@openssh.com
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>sk-ecdsa-sha2-nistp256-cert-v01@openssh.com
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>webauthn-sk-ecdsa-sha2-nistp256@openssh.com
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>ssh-rsa
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>ssh-rsa-cert-v01@openssh.com
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>rsa-sha2-256
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>rsa-sha2-256-cert-v01@openssh.com
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>rsa-sha2-512
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>rsa-sha2-512-cert-v01@openssh.com
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>MACs
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>hmac-sha1
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>hmac-sha1-96
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>hmac-sha2-256
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>hmac-sha2-512
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>hmac-md5
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>hmac-md5-96
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>umac-64@openssh.com
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>umac-128@openssh.com
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>hmac-sha1-etm@openssh.com
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>hmac-sha1-96-etm@openssh.com
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>hmac-sha2-256-etm@openssh.com
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>hmac-sha2-512-etm@openssh.com
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>hmac-md5-etm@openssh.com
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>hmac-md5-96-etm@openssh.com
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a>umac-64-etm@openssh.com
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a>umac-128-etm@openssh.com
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a>KEXAlgorithms
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a>diffie-hellman-group1-sha1
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a>diffie-hellman-group14-sha1
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a>diffie-hellman-group14-sha256
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a>diffie-hellman-group16-sha512
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a>diffie-hellman-group18-sha512
</span><span id="__span-1-49"><a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a>diffie-hellman-group-exchange-sha1
</span><span id="__span-1-50"><a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a>diffie-hellman-group-exchange-sha256
</span><span id="__span-1-51"><a id="__codelineno-1-51" name="__codelineno-1-51" href="#__codelineno-1-51"></a>ecdh-sha2-nistp256
</span><span id="__span-1-52"><a id="__codelineno-1-52" name="__codelineno-1-52" href="#__codelineno-1-52"></a>ecdh-sha2-nistp384
</span><span id="__span-1-53"><a id="__codelineno-1-53" name="__codelineno-1-53" href="#__codelineno-1-53"></a>ecdh-sha2-nistp521
</span><span id="__span-1-54"><a id="__codelineno-1-54" name="__codelineno-1-54" href="#__codelineno-1-54"></a>curve25519-sha256
</span><span id="__span-1-55"><a id="__codelineno-1-55" name="__codelineno-1-55" href="#__codelineno-1-55"></a>curve25519-sha256@libssh.org
</span><span id="__span-1-56"><a id="__codelineno-1-56" name="__codelineno-1-56" href="#__codelineno-1-56"></a>sntrup761x25519-sha512
</span><span id="__span-1-57"><a id="__codelineno-1-57" name="__codelineno-1-57" href="#__codelineno-1-57"></a>sntrup761x25519-sha512@openssh.com
</span><span id="__span-1-58"><a id="__codelineno-1-58" name="__codelineno-1-58" href="#__codelineno-1-58"></a>mlkem768x25519-sha256
</span></code></pre></div>
<p>Notice there are no ssh-dss ciphers</p>
<p>This is the output on Ubuntu 24.04. You can see ssh-dss on lines 18-19.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span>
<span class="normal"><a href="#__codelineno-2-33">33</a></span>
<span class="normal"><a href="#__codelineno-2-34">34</a></span>
<span class="normal"><a href="#__codelineno-2-35">35</a></span>
<span class="normal"><a href="#__codelineno-2-36">36</a></span>
<span class="normal"><a href="#__codelineno-2-37">37</a></span>
<span class="normal"><a href="#__codelineno-2-38">38</a></span>
<span class="normal"><a href="#__codelineno-2-39">39</a></span>
<span class="normal"><a href="#__codelineno-2-40">40</a></span>
<span class="normal"><a href="#__codelineno-2-41">41</a></span>
<span class="normal"><a href="#__codelineno-2-42">42</a></span>
<span class="normal"><a href="#__codelineno-2-43">43</a></span>
<span class="normal"><a href="#__codelineno-2-44">44</a></span>
<span class="normal"><a href="#__codelineno-2-45">45</a></span>
<span class="normal"><a href="#__codelineno-2-46">46</a></span>
<span class="normal"><a href="#__codelineno-2-47">47</a></span>
<span class="normal"><a href="#__codelineno-2-48">48</a></span>
<span class="normal"><a href="#__codelineno-2-49">49</a></span>
<span class="normal"><a href="#__codelineno-2-50">50</a></span>
<span class="normal"><a href="#__codelineno-2-51">51</a></span>
<span class="normal"><a href="#__codelineno-2-52">52</a></span>
<span class="normal"><a href="#__codelineno-2-53">53</a></span>
<span class="normal"><a href="#__codelineno-2-54">54</a></span>
<span class="normal"><a href="#__codelineno-2-55">55</a></span>
<span class="normal"><a href="#__codelineno-2-56">56</a></span>
<span class="normal"><a href="#__codelineno-2-57">57</a></span>
<span class="normal"><a href="#__codelineno-2-58">58</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a>mw-ssh
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a>OpenSSH_9.6p1<span class="w"> </span>Ubuntu-3ubuntu13.12,<span class="w"> </span>OpenSSL<span class="w"> </span><span class="m">3</span>.0.13<span class="w"> </span><span class="m">30</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">2024</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a>HostKeyAlgorithms
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a>ssh-ed25519
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a>ssh-ed25519-cert-v01@openssh.com
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a>sk-ssh-ed25519@openssh.com
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a>sk-ssh-ed25519-cert-v01@openssh.com
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a>ecdsa-sha2-nistp256
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a>ecdsa-sha2-nistp256-cert-v01@openssh.com
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11"></a>ecdsa-sha2-nistp384
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12"></a>ecdsa-sha2-nistp384-cert-v01@openssh.com
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13"></a>ecdsa-sha2-nistp521
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14"></a>ecdsa-sha2-nistp521-cert-v01@openssh.com
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15"></a>sk-ecdsa-sha2-nistp256@openssh.com
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16"></a>sk-ecdsa-sha2-nistp256-cert-v01@openssh.com
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17"></a>webauthn-sk-ecdsa-sha2-nistp256@openssh.com
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="hll">ssh-dss
</span></span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="hll">ssh-dss-cert-v01@openssh.com
</span></span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20"></a>ssh-rsa
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21"></a>ssh-rsa-cert-v01@openssh.com
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22"></a>rsa-sha2-256
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23"></a>rsa-sha2-256-cert-v01@openssh.com
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24"></a>rsa-sha2-512
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25"></a>rsa-sha2-512-cert-v01@openssh.com
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26"></a>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27"></a>MACs
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28"></a>hmac-sha1
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29"></a>hmac-sha1-96
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30"></a>hmac-sha2-256
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31"></a>hmac-sha2-512
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32"></a>hmac-md5
</span><span id="__span-2-33"><a id="__codelineno-2-33" name="__codelineno-2-33"></a>hmac-md5-96
</span><span id="__span-2-34"><a id="__codelineno-2-34" name="__codelineno-2-34"></a>umac-64@openssh.com
</span><span id="__span-2-35"><a id="__codelineno-2-35" name="__codelineno-2-35"></a>umac-128@openssh.com
</span><span id="__span-2-36"><a id="__codelineno-2-36" name="__codelineno-2-36"></a>hmac-sha1-etm@openssh.com
</span><span id="__span-2-37"><a id="__codelineno-2-37" name="__codelineno-2-37"></a>hmac-sha1-96-etm@openssh.com
</span><span id="__span-2-38"><a id="__codelineno-2-38" name="__codelineno-2-38"></a>hmac-sha2-256-etm@openssh.com
</span><span id="__span-2-39"><a id="__codelineno-2-39" name="__codelineno-2-39"></a>hmac-sha2-512-etm@openssh.com
</span><span id="__span-2-40"><a id="__codelineno-2-40" name="__codelineno-2-40"></a>hmac-md5-etm@openssh.com
</span><span id="__span-2-41"><a id="__codelineno-2-41" name="__codelineno-2-41"></a>hmac-md5-96-etm@openssh.com
</span><span id="__span-2-42"><a id="__codelineno-2-42" name="__codelineno-2-42"></a>umac-64-etm@openssh.com
</span><span id="__span-2-43"><a id="__codelineno-2-43" name="__codelineno-2-43"></a>umac-128-etm@openssh.com
</span><span id="__span-2-44"><a id="__codelineno-2-44" name="__codelineno-2-44"></a>
</span><span id="__span-2-45"><a id="__codelineno-2-45" name="__codelineno-2-45"></a>KEXAlgorithms
</span><span id="__span-2-46"><a id="__codelineno-2-46" name="__codelineno-2-46"></a>diffie-hellman-group1-sha1
</span><span id="__span-2-47"><a id="__codelineno-2-47" name="__codelineno-2-47"></a>diffie-hellman-group14-sha1
</span><span id="__span-2-48"><a id="__codelineno-2-48" name="__codelineno-2-48"></a>diffie-hellman-group14-sha256
</span><span id="__span-2-49"><a id="__codelineno-2-49" name="__codelineno-2-49"></a>diffie-hellman-group16-sha512
</span><span id="__span-2-50"><a id="__codelineno-2-50" name="__codelineno-2-50"></a>diffie-hellman-group18-sha512
</span><span id="__span-2-51"><a id="__codelineno-2-51" name="__codelineno-2-51"></a>diffie-hellman-group-exchange-sha1
</span><span id="__span-2-52"><a id="__codelineno-2-52" name="__codelineno-2-52"></a>diffie-hellman-group-exchange-sha256
</span><span id="__span-2-53"><a id="__codelineno-2-53" name="__codelineno-2-53"></a>ecdh-sha2-nistp256
</span><span id="__span-2-54"><a id="__codelineno-2-54" name="__codelineno-2-54"></a>ecdh-sha2-nistp384
</span><span id="__span-2-55"><a id="__codelineno-2-55" name="__codelineno-2-55"></a>ecdh-sha2-nistp521
</span><span id="__span-2-56"><a id="__codelineno-2-56" name="__codelineno-2-56"></a>curve25519-sha256
</span><span id="__span-2-57"><a id="__codelineno-2-57" name="__codelineno-2-57"></a>curve25519-sha256@libssh.org
</span><span id="__span-2-58"><a id="__codelineno-2-58" name="__codelineno-2-58"></a>sntrup761x25519-sha512@openssh.com
</span></code></pre></div></td></tr></table></div>
<h3 id="locating-devices-with-ssh-dss-host-key-algorithms">Locating devices with ssh-dss Host Key Algorithms</h3>
<p>You can use nmap to quickly scan devices and find those with ssh-dss ciphers.</p>
<p><code>nmap -sV -p 22 -oN ssh-dss.nmap --script ssh2-enum-algos 192.168.10.50-254</code></p>
<p>The -oN ssh-dss creates a <code>.nmap</code> file.</p>
<p>Here is the output from the HPE 2920 in my garage:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span>
<span class="normal"><a href="#__codelineno-3-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a>Nmap<span class="w"> </span>scan<span class="w"> </span>report<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">2920</span>-Garage.pu.pri<span class="w"> </span><span class="o">(</span><span class="m">192</span>.168.10.52<span class="o">)</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a>Host<span class="w"> </span>is<span class="w"> </span>up<span class="w"> </span><span class="o">(</span><span class="m">0</span>.0069s<span class="w"> </span>latency<span class="o">)</span>.
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a>PORT<span class="w">   </span>STATE<span class="w"> </span>SERVICE<span class="w"> </span>VERSION
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="m">22</span>/tcp<span class="w"> </span>open<span class="w">  </span>ssh<span class="w">     </span>Mocana<span class="w"> </span>NanoSSH<span class="w"> </span><span class="m">6</span>.3<span class="w"> </span><span class="o">(</span>protocol<span class="w"> </span><span class="m">2</span>.0<span class="o">)</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="p">|</span><span class="w"> </span>ssh2-enum-algos:
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="p">|</span><span class="w">   </span>kex_algorithms:<span class="w"> </span><span class="o">(</span><span class="m">4</span><span class="o">)</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="p">|</span><span class="w">       </span>ecdh-sha2-nistp521
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="p">|</span><span class="w">       </span>ecdh-sha2-nistp384
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="p">|</span><span class="w">       </span>ecdh-sha2-nistp256
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="p">|</span><span class="w">       </span>diffie-hellman-group14-sha1
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="p">|</span><span class="w">   </span>server_host_key_algorithms:<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="hll"><span class="p">|</span><span class="w">       </span>ssh-dss
</span></span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="p">|</span><span class="w">   </span>encryption_algorithms:<span class="w"> </span><span class="o">(</span><span class="m">8</span><span class="o">)</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="p">|</span><span class="w">       </span>aes256-ctr
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="p">|</span><span class="w">       </span>aes256-cbc
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="p">|</span><span class="w">       </span>rijndael-cbc@lysator.liu.se
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="p">|</span><span class="w">       </span>aes192-ctr
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="p">|</span><span class="w">       </span>aes192-cbc
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="p">|</span><span class="w">       </span>aes128-ctr
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="p">|</span><span class="w">       </span>aes128-cbc
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="p">|</span><span class="w">       </span>3des-cbc
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="p">|</span><span class="w">   </span>mac_algorithms:<span class="w"> </span><span class="o">(</span><span class="m">4</span><span class="o">)</span>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="p">|</span><span class="w">       </span>hmac-sha1-96
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25"></a><span class="p">|</span><span class="w">       </span>hmac-md5
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="p">|</span><span class="w">       </span>hmac-sha1
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="p">|</span><span class="w">       </span>hmac-md5-96
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28"></a><span class="p">|</span><span class="w">   </span>compression_algorithms:<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29"></a><span class="p">|</span>_<span class="w">      </span>none
</span></code></pre></div></td></tr></table></div>
<p>Since we created the nmap file we can use:</p>
<p><code>grep -i '192.168|dss' ssh-dss.nmap</code> to quickly find all devices.</p>
<p>Here is a sample output:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="w"> </span><span class="m">2</span>:Nmap<span class="w"> </span>scan<span class="w"> </span>report<span class="w"> </span><span class="k">for</span><span class="w"> </span>Ubiquiti-ofc.pu.pri<span class="w"> </span><span class="o">(</span><span class="m">192</span>.168.10.50<span class="o">)</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="hll"><span class="m">17</span>:<span class="p">|</span><span class="w">       </span>ssh-dss
</span></span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="m">28</span>:Nmap<span class="w"> </span>scan<span class="w"> </span>report<span class="w"> </span><span class="k">for</span><span class="w"> </span>Ubiquiti-garage.pu.pri<span class="w"> </span><span class="o">(</span><span class="m">192</span>.168.10.51<span class="o">)</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="hll"><span class="m">43</span>:<span class="p">|</span><span class="w">       </span>ssh-dss
</span></span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="m">54</span>:Nmap<span class="w"> </span>scan<span class="w"> </span>report<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">2920</span>-Garage.pu.pri<span class="w"> </span><span class="o">(</span><span class="m">192</span>.168.10.52<span class="o">)</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="hll"><span class="m">66</span>:<span class="p">|</span><span class="w">       </span>ssh-dss
</span></span></code></pre></div></td></tr></table></div>
<p>As you can see, devices 192.168.10.51-52 are using <code>ssh-dss</code> as the Host Key Algorithm. I have my network devices registered in DNS to it's easy to identify them. If you use MS Windows you can easily ask chatGPT to create a PowerShell script to read a spreadsheet of hostnames/IP addresses and create the DNS entries.</p>
<p>The HPE 2920 is running <code>WB.16.10.0025</code> firmware which I think is the last release. Here is a <code>show ip ssh</code> from the 2920:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a>HP-2920-24G-PoEP#<span class="w"> </span>sh<span class="w"> </span>ip<span class="w"> </span>ssh
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">  </span>SSH<span class="w"> </span>Enabled<span class="w">     </span>:<span class="w"> </span>Yes<span class="w">                 </span>Secure<span class="w"> </span>Copy<span class="w"> </span>Enabled<span class="w"> </span>:<span class="w"> </span>No
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">  </span>TCP<span class="w"> </span>Port<span class="w"> </span>Number<span class="w"> </span>:<span class="w"> </span><span class="m">22</span><span class="w">                  </span>Timeout<span class="w"> </span><span class="o">(</span>sec<span class="o">)</span><span class="w">       </span>:<span class="w"> </span><span class="m">120</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">  </span>Rekey<span class="w"> </span>Enabled<span class="w">   </span>:<span class="w"> </span>No<span class="w">                  </span>Rekey<span class="w"> </span>Time<span class="w"> </span><span class="o">(</span>min<span class="o">)</span><span class="w">    </span>:<span class="w"> </span><span class="m">60</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">                                        </span>Rekey<span class="w"> </span>Volume<span class="w"> </span><span class="o">(</span>KB<span class="o">)</span><span class="w">   </span>:<span class="w"> </span><span class="m">1048576</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="hll"><span class="w">  </span>Host<span class="w"> </span>Key<span class="w"> </span>Type<span class="w">   </span>:<span class="w"> </span>DSA<span class="w">                 </span>Host<span class="w"> </span>Key/Curve<span class="w"> </span>Size<span class="w"> </span>:<span class="w"> </span><span class="m">1024</span>
</span></span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">  </span>Ciphers<span class="w"> </span>:<span class="w"> </span>aes256-ctr,aes256-cbc,rijndael-cbc@lysator.liu.se,aes192-ctr,
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">            </span>aes192-cbc,aes128-ctr,aes128-cbc,3des-cbc
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">  </span>MACs<span class="w">    </span>:<span class="w"> </span>hmac-sha1-96,hmac-md5,hmac-sha1,hmac-md5-96
</span></code></pre></div></td></tr></table></div>
<p>You can see from the ip ssh config that you can change the cipher and the MAC but not the Host Key Algorithm. FYI, HMAC is Hashed Message Authentication Code. All ssh MACs are actually HMACs.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a>HP-2920-24G-PoEP<span class="o">(</span>config<span class="o">)</span><span class="c1"># ip ssh</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="hll"><span class="w"> </span>cipher<span class="w">                </span>Specify<span class="w"> </span>a<span class="w"> </span>cipher<span class="w"> </span>to<span class="w"> </span>enable/disable.
</span></span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w"> </span>filetransfer<span class="w">          </span>Enable/disable<span class="w"> </span>secure<span class="w"> </span>file<span class="w"> </span>transfer<span class="w"> </span>capability.
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w"> </span>listen<span class="w">                </span>Specify<span class="w"> </span><span class="k">in</span><span class="w"> </span>which<span class="w"> </span>mode<span class="w"> </span>daemon<span class="w"> </span>should<span class="w"> </span>listen<span class="w"> </span><span class="k">in</span>.
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="hll"><span class="w"> </span>mac<span class="w">                   </span>Specify<span class="w"> </span>a<span class="w"> </span>mac<span class="w"> </span>to<span class="w"> </span>enable/disable.
</span></span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w"> </span>port<span class="w">                  </span>Specify<span class="w"> </span>the<span class="w"> </span>TCP<span class="w"> </span>port<span class="w"> </span>on<span class="w"> </span>which<span class="w"> </span>the<span class="w"> </span>daemon<span class="w"> </span>should<span class="w"> </span>listen<span class="w"> </span><span class="k">for</span><span class="w"> </span>SSH<span class="w"> </span>connections.
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w"> </span>public-key<span class="w">            </span>Configure<span class="w"> </span>a<span class="w"> </span>client<span class="w"> </span>public-key.
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w"> </span>rekey<span class="w">                 </span>Enable<span class="w"> </span>SSH<span class="w"> </span>key<span class="w"> </span>re-exchange.
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w"> </span>timeout<span class="w">               </span>Specify<span class="w"> </span>the<span class="w"> </span>maximum<span class="w"> </span>length<span class="w"> </span>of<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="o">(</span>seconds<span class="o">)</span><span class="w"> </span>permitted<span class="w"> </span><span class="k">for</span><span class="w"> </span>protocol
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">                       </span>negotiation<span class="w"> </span>and<span class="w"> </span>authentication.
</span></code></pre></div></td></tr></table></div>
<h2 id="what-cryptographic-algorithms-should-i-use">What Cryptographic Algorithms Should I use</h2>
<p>When building a configuration template for a deployment you should remove as many legacy ciphers as possible. As the US CISA pushes for more secure IT infrastructure you will find more customers running security scans after you deploy. It's better to pass a security scan than have to answer questions about why your refresh failed a basic security audit.</p>
<p>Since SSH is almost 30 years old there are a lot of ciphers available. But of course, many are no longer secure. IoT manufactures and network devices typically have a lot of ancient ciphers. Episode 209 of the <a href="https://2.5admins.com/2-5-admins-209/">2.5 Admins</a> podcast titled: Faulty Defaults is worth listening to if any of this is new to you.</p>
<p>Asking which ciphers are secure is like asking "Is Mac better than Windows?". But here are some general guidelines:</p>
<ul>
<li>Don't use any encryption with CBC in the name. For example aes128-cbc. The CBC means <code>cipher block chaining</code> and PCI will fail you if it finds it.</li>
<li>Do use encryption with CTR in the name. For example aes256-ctr.</li>
<li>Don't use a MAC with SHA1 in the name if possible. For example hmac-sha1</li>
<li>Do use a MAC with SHA2 in the name. For example hmac-sha2-256 or hmac-sha2-512</li>
<li>Don't use a Key Exchange Algorithm (KEX) with SHA1 in the name if possible. For example diffie-hellman-group1-sha1</li>
<li>Don't use a HostKeyAlgorithm with dss in the name. This is an SSH V1 Host key and has been dropped on openSSH 9.9 and above.</li>
</ul>
<p>You can do a search on the Internet for current algorithms. But, you will find that a lot of network devices don't support modern cryptographic algorithms. Some notable exceptions that support modern ciphers are:</p>
<ul>
<li>Aruba CX version 10.07 and newer</li>
<li>Juniper Junos version 18.2R1.9 or higher</li>
<li>Cisco IOS version 15.2(7)E2 or higher</li>
<li>Cisco IOS-XE 17.2.x or later</li>
</ul>
<hr />
<h3 id="how-to-configure-the-algorithms">How to configure the algorithms</h3>
<p>This is not an exhaustive tutorial. It's here to give you an idea of how to configure ssh algorithms for your base template.</p>
<p>Aruba CX</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ssh<span class="w"> </span>ciphers<span class="w"> </span>chacha20-poly1305@openssh.com<span class="w"> </span>aes256-ctr<span class="w"> </span>aes256-cbc
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>ssh<span class="w"> </span>host-key<span class="w"> </span>ed25519
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>ssh<span class="w"> </span>host-key-algorithms<span class="w"> </span>ssh-ed25519<span class="w"> </span>ecdsa-sha2-nistp521
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>ssh<span class="w"> </span>key-exchange-algorithms<span class="w"> </span>ecdh-sha2-nistp256<span class="w"> </span>curve25519-sha256
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w"> </span>diffie-hellman-group-exchange-sha256
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>ssh<span class="w"> </span>macs<span class="w"> </span>hmac-sha2-256<span class="w"> </span>hmac-sha2-512
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>ssh<span class="w"> </span>public-key-algorithms<span class="w"> </span>x509v3-ssh-rsa<span class="w"> </span>rsa-sha2-256
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>ssh<span class="w"> </span>maximum-auth-attempts<span class="w"> </span><span class="m">5</span>
</span></code></pre></div>
<p>The Aruba CX firmware has rock solid cryptographic algorithms out of the box. See the <a href="#references-ssh-history">link</a> in the references below for the exact algorithms. For a table of ssh server commands, see the <a href="#aruba-cx-ssh-server-commands">Aruba CX SSH server commands</a> below.</p>
<p>Cisco IOS</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>ip<span class="w"> </span>ssh<span class="w"> </span>version<span class="w"> </span><span class="m">2</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>crypto<span class="w"> </span>key<span class="w"> </span>generate<span class="w"> </span>rsa<span class="w"> </span>modulus<span class="w"> </span><span class="m">4096</span><span class="w"> </span>label<span class="w"> </span>SSH-KEYS
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>ip<span class="w"> </span>ssh<span class="w"> </span>rsa<span class="w"> </span>keypair-name<span class="w"> </span>SSH-KEYS<span class="w"> </span>!associate<span class="w"> </span>keys<span class="w"> </span>to<span class="w"> </span>SSH
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>encryption<span class="w"> </span>aes256-ctr<span class="w"> </span>aes192-ctr<span class="w"> </span>aes128-ctr
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>mac<span class="w"> </span>hmac-sha2-256<span class="w"> </span>hmac-sha2-512
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>no<span class="w"> </span>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>mac<span class="w"> </span>hmac-sha1
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>no<span class="w"> </span>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>mac<span class="w"> </span>hmac-sha1-96
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>ip<span class="w"> </span>ssh<span class="w"> </span>authentication-retries<span class="w"> </span><span class="m">5</span>
</span></code></pre></div>
<p>Ciscco IOS XE</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ip<span class="w"> </span>ssh<span class="w"> </span>version<span class="w"> </span><span class="m">2</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>crypto<span class="w"> </span>key<span class="w"> </span>generate<span class="w"> </span>rsa<span class="w"> </span>modulus<span class="w"> </span><span class="m">4096</span><span class="w"> </span>label<span class="w"> </span>RSA4096_SSH_KEY
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>ip<span class="w"> </span>ssh<span class="w"> </span>rsa<span class="w"> </span>keypair-name<span class="w"> </span>RSA4096_SSH_KEY<span class="w"> </span>!associate<span class="w"> </span>keys<span class="w"> </span>to<span class="w"> </span>SSH
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>authentication<span class="w"> </span>keyboard
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>mac<span class="w"> </span>hmac-sha2-512<span class="w"> </span>hmac-sha2-256
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>encryption<span class="w"> </span>aes256-gcm<span class="w"> </span>aes256-ctr
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>kex<span class="w"> </span>ecdh-sha2-nistp521<span class="w"> </span>ecdh-sha2-nistp384
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>hostkey<span class="w"> </span>rsa-sha2-512<span class="w"> </span>rsa-sha2-256
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>publickey<span class="w"> </span>ecdsa-sha2-nistp521<span class="w"> </span>ecdsa-sha2-nistp384
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>ip<span class="w"> </span>ssh<span class="w"> </span>authentication-retries<span class="w"> </span><span class="m">5</span>
</span></code></pre></div>
<p>Juniper</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nb">set</span><span class="w"> </span>system<span class="w"> </span>services<span class="w"> </span>ssh<span class="w"> </span>ciphers<span class="w"> </span>aes256-ctr
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="nb">set</span><span class="w"> </span>system<span class="w"> </span>services<span class="w"> </span>ssh<span class="w"> </span>macs<span class="w"> </span>hmac-sha2-256
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="nb">set</span><span class="w"> </span>system<span class="w"> </span>services<span class="w"> </span>ssh<span class="w"> </span>macs<span class="w"> </span>hmac-sha2-512
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="nb">set</span><span class="w"> </span>system<span class="w"> </span>services<span class="w"> </span>ssh<span class="w"> </span>hostkey-algorithm<span class="w"> </span>ssh-ed25519
</span></code></pre></div>
<hr />
<h3 id="references-ssh-history">References SSH History</h3>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Secure_Shell">Secure Shell Wikipedia</a></li>
<li><a href="https://www.cyberciti.biz/tips/linux-unix-bsd-openssh-server-best-practices.html">Top 20 OpenSSH Server Best Security Practices</a></li>
<li><a href="https://www.arubanetworks.com/techdocs/AOS-CX/10.13/HTML/security_83xx-8400-9300-10000/Content/Chp_SSH_serv/SSH_serv_cmds/ssh-cip.htm">Aruba CX SSH ciphers</a></li>
<li><a href="https://mrncciew.com/2023/08/28/ios-xe-ssh-best-practices/">IOS-XE SSH Best Practices</a></li>
<li><a href="https://community.cisco.com/t5/networking-knowledge-base/configuring-ios-xe-for-strong-security-ssh-sessions/ta-p/4556490#toc-hId--889430449">Configuring IOS XE for Strong Security SSH Sessions</a></li>
</ul>
<hr />
<h2 id="connecting-to-network-devices">Connecting to Network Devices</h2>
<p><img alt="▶" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/25b6.svg" title=":arrow_forward:" /> KEY TAKEAWAYS</p>
<ul>
<li>Ubuntu makes it easy to use SSH from the terminal</li>
<li>You can create custom entries in the ssh config file for each device if needed</li>
<li>You can use password authentication or public key authentication with the ssh client</li>
<li>You can easily create a jump host and secure your network devices even further.</li>
</ul>
<hr />
<p><strong>To connect using ssh:</strong></p>
<ul>
<li>Open the terminal</li>
<li>Enter the following command.</li>
</ul>
<p><code>ssh mhubbard@192.168.10.253</code></p>
<p>Change the username and IP address to fit your device.</p>
<hr />
<h3 id="run-network-commands-remotely">Run network commands remotely</h3>
<p>You can run commands remotely on the network device using ssh. For example, to execute <code>show running-configuration</code> use:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="hll"><span class="n">ssh</span><span class="w"> </span><span class="mf">192.168.10.253</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">run</span>
</span></span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="p">(</span><span class="n">mhubbard</span><span class="err">@</span><span class="mf">192.168.10.253</span><span class="p">)</span><span class="w"> </span><span class="n">Password</span><span class="p">:</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="n">DECOM___MCI</span><span class="o">-</span><span class="n">KSC</span><span class="o">-</span><span class="n">SW1</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4"></a>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="n">Building</span><span class="w"> </span><span class="n">configuration</span><span class="p">...</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="n">Current</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">17541</span><span class="w"> </span><span class="n">bytes</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="o">!</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="o">!</span><span class="w"> </span><span class="n">Last</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">23</span><span class="p">:</span><span class="mi">34</span><span class="p">:</span><span class="mi">18</span><span class="w"> </span><span class="n">PDT</span><span class="w"> </span><span class="n">Thu</span><span class="w"> </span><span class="n">Jul</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">2024</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">mhubbard</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="o">!</span><span class="w"> </span><span class="n">NVRAM</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="n">PDT</span><span class="w"> </span><span class="n">Tue</span><span class="w"> </span><span class="n">Jul</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="mi">2024</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="p">.</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="p">.</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="p">.</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="n">end</span>
</span></code></pre></div></td></tr></table></div>
<p>You can also use shell commands to get just what you need. For example, let's say I want to know what <code>ip ssh</code> commands are in the running configuration.</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="hll"><span class="n">ssh</span><span class="w"> </span><span class="mf">192.168.10.253</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="s">&quot;ip ssh&quot;</span>
</span></span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="p">(</span><span class="n">mhubbard</span><span class="err">@</span><span class="mf">192.168.10.253</span><span class="p">)</span><span class="w"> </span><span class="n">Password</span><span class="p">:</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="n">ip</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">source</span><span class="o">-</span><span class="k">interface</span><span class="w"> </span><span class="n">Vlan10</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="n">ip</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">rsa</span><span class="w"> </span><span class="n">keypair</span><span class="o">-</span><span class="n">name</span><span class="w"> </span><span class="n">SSH</span><span class="o">-</span><span class="n">KEYS</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="n">ip</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="n">ip</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">dh</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="mi">4096</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="n">ip</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">algorithm</span><span class="w"> </span><span class="n">mac</span><span class="w"> </span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="w"> </span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="n">ip</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">algorithm</span><span class="w"> </span><span class="n">encryption</span><span class="w"> </span><span class="n">aes256</span><span class="o">-</span><span class="n">ctr</span><span class="w"> </span><span class="n">aes192</span><span class="o">-</span><span class="n">ctr</span><span class="w"> </span><span class="n">aes128</span><span class="o">-</span><span class="n">ctr</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="n">ip</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">algorithm</span><span class="w"> </span><span class="n">kex</span><span class="w"> </span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="n">Connection</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">192.168.10.253</span><span class="w"> </span><span class="n">closed</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">host</span><span class="p">.</span>
</span></code></pre></div></td></tr></table></div>
<hr />
<h3 id="network-devices-with-legacy-ciphers">Network Devices with legacy ciphers</h3>
<p>One problem for a network engineer is that newer versions of the OpenSSH client don’t allow weak crypto by default and most network devices have weak ciphers by default. If you are connecting to network devices from a modern version of Mac/Linux you will probably get an error and the connection will fail. You will have to customize the <code>~/.ssh/config</code> file to add the ciphers needed.</p>
<p>This is an example trying to connect to a Cisco 3850 IOS XE switch running 16.12.3a:</p>
<div class="language-c# highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">Unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">negotiate</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="mf">192.168.10.253</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="mi">22</span><span class="p">:</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">exchange</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">found</span><span class="p">.</span><span class="w"> </span><span class="n">Their</span><span class="w"> </span><span class="n">offer</span><span class="p">:</span><span class="w"> </span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span>
</span></code></pre></div>
<p>Here is the entry I added to <code>~/.ssh/config</code>:</p>
<p>Open the file using <code>gnome-text-editor ~/.ssh/config</code> and add the following:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="n">Host</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">    </span><span class="n">KexAlgorithms</span><span class="w"> </span><span class="o">+</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="k">group</span><span class="o">-</span><span class="n">exchange</span><span class="o">-</span><span class="n">sha256</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group1</span><span class="o">-</span><span class="n">sha1</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">    </span><span class="n">MACs</span><span class="w"> </span><span class="o">+</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="n">HostKeyAlgorithms</span><span class="w"> </span><span class="o">+</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span></code></pre></div></td></tr></table></div>
<p>You can add an SSH key file and a custom port for ssh if needed:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span>
<span class="normal"><a href="#__codelineno-15-5">5</a></span>
<span class="normal"><a href="#__codelineno-15-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="n">Host</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">    </span><span class="n">KexAlgorithms</span><span class="w"> </span><span class="o">+</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="k">group</span><span class="o">-</span><span class="n">exchange</span><span class="o">-</span><span class="n">sha256</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group1</span><span class="o">-</span><span class="n">sha1</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">    </span><span class="n">MACs</span><span class="w"> </span><span class="o">+</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">    </span><span class="n">HostKeyAlgorithms</span><span class="w"> </span><span class="o">+</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="hll"><span class="w">    </span><span class="n">IdentityFile</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span>
</span></span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="hll"><span class="w">    </span><span class="n">Port</span><span class="w"> </span><span class="mi">45005</span>
</span></span></code></pre></div></td></tr></table></div>
<p>To use a specific key on the fly:
<code>ssh -i ~/.ssh/customer1/id_rsa  192.168.10.253</code></p>
<p>I have run across network devices that required the ancient <code>dss</code> HostKeyAlgorithm. Add that with:
<code>HostKeyAlgorithms +ssh-rsa,ssh-dss</code></p>
<hr />
<h3 id="using-a-wildcard-in-the-config-file">Using a wildcard in the config file</h3>
<p>If you have 100s or 1000s of devices with legacy crypto it gets painful to create an entry in <code>~/.ssh/config</code> for every device. You can use a wildcard in the configuration file that will pass the same configuration to every connection. Keep in mind that the wildcard configuration applies to all devices that match the wildcard, not just network devices.</p>
<p>If you have a dedicated management network, for example, 192.168.10.0/24:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span>
<span class="normal"><a href="#__codelineno-16-5">5</a></span>
<span class="normal"><a href="#__codelineno-16-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="hll"><span class="n">Host</span><span class="w"> </span><span class="mf">192.168.10</span><span class="p">.</span><span class="o">*</span>
</span></span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">    </span><span class="n">Protocol</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">    </span><span class="n">KexAlgorithms</span><span class="w"> </span><span class="o">+</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group1</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="k">group</span><span class="o">-</span><span class="n">exchange</span><span class="o">-</span><span class="n">sha1</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="n">HostKeyAlgorithms</span><span class="w"> </span><span class="o">+</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">    </span><span class="n">MACs</span><span class="w"> </span><span class="o">+</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="n">PubkeyAcceptedKeyTypes</span><span class="w"> </span><span class="o">+</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span></code></pre></div></td></tr></table></div>
<p>The <code>+</code> sign adds the legacy ciphers but leaves the new ciphers in place. So a device that only has legacy ciphers can connect but a new device should still negotiate new ciphers.</p>
<p>You can use the <code>?</code> as wildcard placeholders. For example, <code>192.168.10.??</code> would match any host address with 2 digits.</p>
<p>You can also put multiple hosts on the same line, separated by spaces.</p>
<p><code>host 192.168.10.* 172.16.1.*</code></p>
<p>You can use an <code>*</code> to cover any hosts. The <code>~/.ssh/config</code> file is read top to bottom so you can place this at the bottom and have specific devices defined above it.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span>
<span class="normal"><a href="#__codelineno-17-6">6</a></span>
<span class="normal"><a href="#__codelineno-17-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a>gnome-text-editor<span class="w"> </span>~/.ssh/config
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="hll">Host<span class="w"> </span>*
</span></span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">    </span>Protocol<span class="w"> </span><span class="m">2</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span>KexAlgorithms<span class="w"> </span>+diffie-hellman-group14-sha1,diffie-hellman-group1-sha1,diffie-hellman-group-exchange-sha1
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">    </span>HostKeyAlgorithms<span class="w"> </span>+ssh-rsa
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">    </span>MACs<span class="w"> </span>+hmac-sha1,hmac-sha2-256,hmac-sha2-512
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">    </span>PubkeyAcceptedKeyTypes<span class="w"> </span>+ssh-rsa
</span></code></pre></div></td></tr></table></div>
<h3 id="create-an-ssh-config-file-for-testing-purposes">Create an ssh config file for testing purposes</h3>
<p>You can use a different configuration if you want to test changes without modifying <code>~/.ssh/config</code>. Use <code>-F</code> option, for example:</p>
<p><code>ssh -F test-config 192.168.10.253</code></p>
<h3 id="use-a-different-username-for-network-access">Use a different username for network access</h3>
<p>Let's say that your laptop's username is <code>mhubbard</code> but the customer uses <code>vector</code> on all network devices. You can add the username to your config file:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span>
<span class="normal"><a href="#__codelineno-18-6">6</a></span>
<span class="normal"><a href="#__codelineno-18-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="n">Host</span><span class="w"> </span><span class="mf">192.168.10</span><span class="p">.</span><span class="o">*</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">    </span><span class="n">Protocol</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">    </span><span class="n">KexAlgorithms</span><span class="w"> </span><span class="o">+</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group1</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="k">group</span><span class="o">-</span><span class="n">exchange</span><span class="o">-</span><span class="n">sha1</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">    </span><span class="n">HostKeyAlgorithms</span><span class="w"> </span><span class="o">+</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">    </span><span class="n">MACs</span><span class="w"> </span><span class="o">+</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">    </span><span class="n">PubkeyAcceptedKeyTypes</span><span class="w"> </span><span class="o">+</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="hll"><span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="n">vector</span>
</span></span></code></pre></div></td></tr></table></div>
<p>Now list the username on my laptop</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a>~/.ssh<span class="w"> </span>⌚<span class="w"> </span><span class="m">21</span>:33:59
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="hll">$<span class="w"> </span>whoami
</span></span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a>mhubbard
</span></code></pre></div></td></tr></table></div>
<p>Log into the switch and run who:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span>
<span class="normal"><a href="#__codelineno-20-5">5</a></span>
<span class="normal"><a href="#__codelineno-20-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="err">$</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="p">(</span><span class="n">vector</span><span class="err">@</span><span class="mf">192.168.10.253</span><span class="p">)</span><span class="w"> </span><span class="n">Password</span><span class="p">:</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="n">DECOM___MCI</span><span class="o">-</span><span class="n">KSC</span><span class="o">-</span><span class="n">SW1</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="n">DECOM___MCI</span><span class="o">-</span><span class="n">KSC</span><span class="o">-</span><span class="n">SW1</span><span class="err">#</span><span class="n">who</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">    </span><span class="n">Line</span><span class="w">       </span><span class="n">User</span><span class="w">       </span><span class="nf">Host</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">              </span><span class="n">Idle</span><span class="w">       </span><span class="n">Location</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="hll"><span class="o">*</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="n">vty</span><span class="w"> </span><span class="mi">0</span><span class="w">     </span><span class="n">vector</span><span class="w">     </span><span class="n">idle</span><span class="w">                 </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="n">ubuntu</span><span class="p">.</span><span class="n">pu</span><span class="p">.</span><span class="n">pri</span>
</span></span></code></pre></div></td></tr></table></div>
<p>This is very convenient even if you are not using ssh keys.</p>
<h3 id="display-the-configuration-that-will-be-used">Display the configuration that will be used</h3>
<p>Using <code>-G</code> Causes ssh to print its configuration after evaluating Host and Match blocks and exit. You can review your settings to verify you’re getting what you need.</p>
<p>In this example I removed a lot of detail but you can see the key that will be used, the ciphers, and other important details. The <code>-G</code> switch will save you a lot of time preparing you config file.</p>
<div class="language-C# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span>
<span class="normal"><a href="#__codelineno-21-13">13</a></span>
<span class="normal"><a href="#__codelineno-21-14">14</a></span>
<span class="normal"><a href="#__codelineno-21-15">15</a></span>
<span class="normal"><a href="#__codelineno-21-16">16</a></span>
<span class="normal"><a href="#__codelineno-21-17">17</a></span>
<span class="normal"><a href="#__codelineno-21-18">18</a></span>
<span class="normal"><a href="#__codelineno-21-19">19</a></span>
<span class="normal"><a href="#__codelineno-21-20">20</a></span>
<span class="normal"><a href="#__codelineno-21-21">21</a></span>
<span class="normal"><a href="#__codelineno-21-22">22</a></span>
<span class="normal"><a href="#__codelineno-21-23">23</a></span>
<span class="normal"><a href="#__codelineno-21-24">24</a></span>
<span class="normal"><a href="#__codelineno-21-25">25</a></span>
<span class="normal"><a href="#__codelineno-21-26">26</a></span>
<span class="normal"><a href="#__codelineno-21-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="n">ssh</span><span class="w"> </span><span class="o">-</span><span class="n">G</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="n">host</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="n">user</span><span class="w"> </span><span class="n">mhubbard</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="n">hostname</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="n">port</span><span class="w"> </span><span class="mi">22</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="n">addressfamily</span><span class="w"> </span><span class="n">any</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="n">canonicalizehostname</span><span class="w"> </span><span class="k">false</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="n">fingerprinthash</span><span class="w"> </span><span class="n">SHA256</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="n">hashknownhosts</span><span class="w"> </span><span class="n">yes</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="hll"><span class="n">pubkeyauthentication</span><span class="w"> </span><span class="k">true</span>
</span></span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="n">stricthostkeychecking</span><span class="w"> </span><span class="n">ask</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="n">tcpkeepalive</span><span class="w"> </span><span class="n">yes</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="n">updatehostkeys</span><span class="w"> </span><span class="k">true</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="n">requiredrsasize</span><span class="w"> </span><span class="mi">1024</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="hll"><span class="n">ciphers</span><span class="w"> </span><span class="n">aes128</span><span class="o">-</span><span class="n">ctr</span><span class="p">,</span><span class="n">aes192</span><span class="o">-</span><span class="n">ctr</span><span class="p">,</span><span class="n">aes256</span><span class="o">-</span><span class="n">ctr</span><span class="p">,</span><span class="n">aes128</span><span class="o">-</span><span class="n">cbc</span><span class="p">,</span><span class="mf">3d</span><span class="n">es</span><span class="o">-</span><span class="n">cbc</span>
</span></span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="hll"><span class="n">hostkeyalgorithms</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp384</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp521</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp384</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp521</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="p">,</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span><span class="p">,</span><span class="n">ssh</span><span class="o">-</span><span class="n">dss</span>
</span></span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="hll"><span class="n">hostbasedacceptedalgorithms</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp384</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp521</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp384</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp521</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span>
</span></span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18"></a><span class="hll"><span class="n">kexalgorithms</span><span class="w"> </span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="k">group</span><span class="o">-</span><span class="n">exchange</span><span class="o">-</span><span class="n">sha256</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group1</span><span class="o">-</span><span class="n">sha1</span>
</span></span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="hll"><span class="n">casignaturealgorithms</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp384</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp521</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span>
</span></span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20"></a><span class="n">loglevel</span><span class="w"> </span><span class="n">INFO</span>
</span><span id="__span-21-21"><a id="__codelineno-21-21" name="__codelineno-21-21"></a><span class="hll"><span class="n">macs</span><span class="w"> </span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span>
</span></span><span id="__span-21-22"><a id="__codelineno-21-22" name="__codelineno-21-22"></a><span class="hll"><span class="n">securitykeyprovider</span><span class="w"> </span><span class="k">internal</span>
</span></span><span id="__span-21-23"><a id="__codelineno-21-23" name="__codelineno-21-23"></a><span class="hll"><span class="n">pubkeyacceptedalgorithms</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp384</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp521</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="o">-</span><span class="n">cert</span><span class="o">-</span><span class="n">v01@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp384</span><span class="p">,</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp521</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">sk</span><span class="o">-</span><span class="n">ecdsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="n">nistp256@openssh</span><span class="p">.</span><span class="n">com</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span><span class="p">,</span><span class="n">rsa</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="p">,</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span></span><span id="__span-21-24"><a id="__codelineno-21-24" name="__codelineno-21-24"></a><span class="n">xauthlocation</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">xauth</span>
</span><span id="__span-21-25"><a id="__codelineno-21-25" name="__codelineno-21-25"></a><span class="hll"><span class="n">identityfile</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span>
</span></span><span id="__span-21-26"><a id="__codelineno-21-26" name="__codelineno-21-26"></a><span class="hll"><span class="n">addkeystoagent</span><span class="w"> </span><span class="k">true</span>
</span></span><span id="__span-21-27"><a id="__codelineno-21-27" name="__codelineno-21-27"></a><span class="n">syslogfacility</span><span class="w"> </span><span class="n">USER</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="ssh-jump-hosts">SSH Jump hosts</h3>
<p>A jump host is a device that you connect to and then connect to other devices. This is done to limit administrative access to just the jump host. This is very easy to do with Linux. Spin up an Ubuntu server VM with a NIC that has access to the network devices, hardened per your company security policy and then add <code>ProxyJump</code> to the ssh config file.</p>
<p>In this example I have an Ubuntu server at 192.168.10.223:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span>
<span class="normal"><a href="#__codelineno-22-3">3</a></span>
<span class="normal"><a href="#__codelineno-22-4">4</a></span>
<span class="normal"><a href="#__codelineno-22-5">5</a></span>
<span class="normal"><a href="#__codelineno-22-6">6</a></span>
<span class="normal"><a href="#__codelineno-22-7">7</a></span>
<span class="normal"><a href="#__codelineno-22-8">8</a></span>
<span class="normal"><a href="#__codelineno-22-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="n">Host</span><span class="w"> </span><span class="mf">192.168.10</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="o">!</span><span class="mf">192.168.10.223</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">        </span><span class="n">Protocol</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">        </span><span class="n">HostKeyAlgorithms</span><span class="w"> </span><span class="o">+</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span><span class="p">,</span><span class="n">ssh</span><span class="o">-</span><span class="n">dss</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">        </span><span class="n">MACs</span><span class="w"> </span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">        </span><span class="n">KexAlgorithms</span><span class="w"> </span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="k">group</span><span class="o">-</span><span class="n">exchange</span><span class="o">-</span><span class="n">sha256</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group1</span><span class="o">-</span><span class="n">sha1</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">        </span><span class="n">PubkeyAcceptedKeyTypes</span><span class="w"> </span><span class="o">+</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">        </span><span class="n">IdentityFile</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">        </span><span class="n">AddKeysToAgent</span><span class="w"> </span><span class="n">yes</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="hll"><span class="w">        </span><span class="n">ProxyJump</span><span class="w"> </span><span class="mf">192.168.10.223</span>
</span></span></code></pre></div></td></tr></table></div>
<p>The <code>!192.168.10.223</code> parameter means <code>not 192.168.10.223</code>. Without this entry there would be a loop and the jump would fail.</p>
<p>Now use the - J option:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span>
<span class="normal"><a href="#__codelineno-23-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="w"> </span><span class="err">⌚</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="hll"><span class="err">$</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="o">-</span><span class="n">J</span><span class="w"> </span><span class="n">mhubbard</span><span class="err">@</span><span class="mf">192.168.10.223</span><span class="w"> </span><span class="n">mhubbard</span><span class="err">@</span><span class="mf">192.168.10.253</span>
</span></span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="n">DECOM___MCI</span><span class="o">-</span><span class="n">KSC</span><span class="o">-</span><span class="n">SW1</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4"></a>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="n">DECOM___MCI</span><span class="o">-</span><span class="n">KSC</span><span class="o">-</span><span class="n">SW1</span><span class="err">#</span>
</span></code></pre></div></td></tr></table></div>
<p>None of your keystrokes reach the jump host. The only thing the jump host can see is an encrypted data stream between your client and the destination server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Keep in mind that if the jump box is down you will not be able to log into the network devices. If you use <code>ssh -v</code> you will see these messages:</p>
<ul>
<li>debug1: Reading configuration data /Users/mhubbard/.ssh/config</li>
<li>debug1: /Users/mhubbard/.ssh/config line 4: Skipping Host block because of negated match for 192.168.10.223</li>
<li>debug1: /Users/mhubbard/.ssh/config line 18: Applying options for *</li>
</ul>
<p>You can comment out the ProxyJump 192.168.10.223 line in the configuration with a # symbol until the jump box is back online.</p>
</div>
<h3 id="references-wild-cards">References Wild Cards</h3>
<p><a href="https://superuser.com/questions/469329/ssh-config-wildcard-on-expanded-hostname">SSH config wildcard on expanded Hostname</a></p>
<hr />
<h3 id="debugging-ssh-connections">Debugging SSH connections</h3>
<p>You can use the -v switch to debug the SSH connection. You can repeat the v up to 4 times - -vvvv. Each extra v adds more details to the output.</p>
<hr />
<h3 id="what-crypto-does-my-device-support">What crypto does my device support?</h3>
<p>On most switches you can use something like <code>show ip ssh</code> to get a list of the current ssh ciphers.</p>
<p>Here is an example from the Cisco 3850 in my home lab:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span>
<span class="normal"><a href="#__codelineno-24-14">14</a></span>
<span class="normal"><a href="#__codelineno-24-15">15</a></span>
<span class="normal"><a href="#__codelineno-24-16">16</a></span>
<span class="normal"><a href="#__codelineno-24-17">17</a></span>
<span class="normal"><a href="#__codelineno-24-18">18</a></span>
<span class="normal"><a href="#__codelineno-24-19">19</a></span>
<span class="normal"><a href="#__codelineno-24-20">20</a></span>
<span class="normal"><a href="#__codelineno-24-21">21</a></span>
<span class="normal"><a href="#__codelineno-24-22">22</a></span>
<span class="normal"><a href="#__codelineno-24-23">23</a></span>
<span class="normal"><a href="#__codelineno-24-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="n">ssh</span><span class="w"> </span><span class="mf">192.168.10.253</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">ssh</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="p">(</span><span class="n">mhubbard</span><span class="err">@</span><span class="mf">192.168.10.253</span><span class="p">)</span><span class="w"> </span><span class="n">Password</span><span class="p">:</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3"></a>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="n">DECOM___MCI</span><span class="o">-</span><span class="n">KSC</span><span class="o">-</span><span class="n">SW1</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5"></a>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="hll"><span class="n">SSH</span><span class="w"> </span><span class="n">Enabled</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mf">2.0</span>
</span></span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="hll"><span class="n">Authentication</span><span class="w"> </span><span class="n">methods</span><span class="p">:</span><span class="n">publickey</span><span class="p">,</span><span class="n">keyboard</span><span class="o">-</span><span class="n">interactive</span><span class="p">,</span><span class="n">password</span>
</span></span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="hll"><span class="n">Authentication</span><span class="w"> </span><span class="n">Publickey</span><span class="w"> </span><span class="n">Algorithms</span><span class="p">:</span><span class="n">x509v3</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span><span class="p">,</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span></span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="hll"><span class="n">Hostkey</span><span class="w"> </span><span class="n">Algorithms</span><span class="p">:</span><span class="n">x509v3</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span><span class="p">,</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span></span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="hll"><span class="n">Encryption</span><span class="w"> </span><span class="n">Algorithms</span><span class="p">:</span><span class="n">aes256</span><span class="o">-</span><span class="n">ctr</span><span class="p">,</span><span class="n">aes192</span><span class="o">-</span><span class="n">ctr</span><span class="p">,</span><span class="n">aes128</span><span class="o">-</span><span class="n">ctr</span>
</span></span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="hll"><span class="n">MAC</span><span class="w"> </span><span class="n">Algorithms</span><span class="p">:</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span>
</span></span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="hll"><span class="n">KEX</span><span class="w"> </span><span class="n">Algorithms</span><span class="p">:</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span>
</span></span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="hll"><span class="n">Authentication</span><span class="w"> </span><span class="n">timeout</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class="n">secs</span><span class="p">;</span><span class="w"> </span><span class="n">Authentication</span><span class="w"> </span><span class="n">retries</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
</span></span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="hll"><span class="n">Minimum</span><span class="w"> </span><span class="n">expected</span><span class="w"> </span><span class="n">Diffie</span><span class="w"> </span><span class="n">Hellman</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">bits</span>
</span></span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15"></a><span class="hll"><span class="n">IOS</span><span class="w"> </span><span class="n">Keys</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">SECSH</span><span class="w"> </span><span class="nf">format</span><span class="p">(</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span><span class="p">,</span><span class="w"> </span><span class="n">base64</span><span class="w"> </span><span class="n">encoded</span><span class="p">):</span><span class="w"> </span><span class="n">SSH</span><span class="o">-</span><span class="n">KEYS</span>
</span></span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span><span class="w"> </span><span class="n">AAAAB3NzaC1yc2EAAAADAQABAAACAQC9HNJvj5z6RlhYQxxXk7WmWzoSGl8O9Iw5mUIFEmkR</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17"></a><span class="n">MRwG7Hg32r5qZ0JSI</span><span class="c1">//gZv8xAVfaR8h2Z5dlJnZyHkpH9eUyXcQOFTY6Y7O4GlFcIGCsVwMWSNslipyf</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18"></a><span class="n">UVW9NBHFrbdfPgZnPzU6FxiTsKLCgIdbrGi51X1jpJf762Q6ZCsPV6h963gRgAMs</span><span class="o">+</span><span class="n">BsxRzDXxOVVcjYW</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19"></a><span class="n">nDhN</span><span class="o">+</span><span class="n">nK9FNdHC4xlf7y3LLAb3zL41JuWN3N</span><span class="o">+</span><span class="mi">7</span><span class="n">NEeNlM8fVgSI4Wzv3RE6uLRB6HIir</span><span class="o">/</span><span class="n">WjUgfzAOnBi5</span><span class="o">/</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20"></a><span class="n">j52pac2gkstrdJmpko5ImRSWxuZfLYzn4LLXoIBXAKbps7BSk7Ci</span><span class="o">+</span><span class="n">to</span><span class="o">+</span><span class="n">RVDje5d68</span><span class="o">+</span><span class="n">Ech19ogzsfufNU</span>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21"></a><span class="n">nYHvKNkxmahaZSZav6BPZWBiJ6Xc9c1OcqHX0seVXEp7ZZ</span><span class="o">+</span><span class="n">a99yrtY22yBC5W5Wh1hY</span><span class="o">/</span><span class="n">PEULbP7W64E</span><span class="o">+</span>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22"></a><span class="n">mUQP9U8lIxCCw3MvmafZx2XvbPPENzYdIVO1nfIkAC</span><span class="o">/</span><span class="mi">1</span><span class="n">QeK47Jh</span><span class="o">+</span><span class="n">HJMGZQbsfoTA4Gz3REKUXiU2eLRV</span>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23"></a><span class="mi">8</span><span class="n">hQznQVtjKn</span><span class="o">/</span><span class="n">Ey</span><span class="o">+</span><span class="n">aziHBrYo7IvwyKALA6Ofk</span><span class="o">+</span><span class="n">KehGgcmijEGi8HeyQdwmKzZ9t1XlVWE25M</span><span class="o">+</span><span class="n">RZMk0YCa</span>
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24"></a><span class="n">uWp6C0y9Zb2GUDgoazWp09gqEjNH2vnefIJvFvR7oRjGgSyYdyBm4z9PGEyRg</span><span class="c1">//asR8+rkNi5jXaqzUd%</span>
</span></code></pre></div></td></tr></table></div>
<hr />
<h3 id="checking-ciphers-with-nmap">Checking ciphers with nmap</h3>
<p>For devices that don't have <code>show ip ssh</code>, like IoT devices, you can use nmap with the built in <code>ssh-enum-algos</code> script. This is from the Ubiquiti Nano Station in my home lab.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span>
<span class="normal"><a href="#__codelineno-25-15">15</a></span>
<span class="normal"><a href="#__codelineno-25-16">16</a></span>
<span class="normal"><a href="#__codelineno-25-17">17</a></span>
<span class="normal"><a href="#__codelineno-25-18">18</a></span>
<span class="normal"><a href="#__codelineno-25-19">19</a></span>
<span class="normal"><a href="#__codelineno-25-20">20</a></span>
<span class="normal"><a href="#__codelineno-25-21">21</a></span>
<span class="normal"><a href="#__codelineno-25-22">22</a></span>
<span class="normal"><a href="#__codelineno-25-23">23</a></span>
<span class="normal"><a href="#__codelineno-25-24">24</a></span>
<span class="normal"><a href="#__codelineno-25-25">25</a></span>
<span class="normal"><a href="#__codelineno-25-26">26</a></span>
<span class="normal"><a href="#__codelineno-25-27">27</a></span>
<span class="normal"><a href="#__codelineno-25-28">28</a></span>
<span class="normal"><a href="#__codelineno-25-29">29</a></span>
<span class="normal"><a href="#__codelineno-25-30">30</a></span>
<span class="normal"><a href="#__codelineno-25-31">31</a></span>
<span class="normal"><a href="#__codelineno-25-32">32</a></span>
<span class="normal"><a href="#__codelineno-25-33">33</a></span>
<span class="normal"><a href="#__codelineno-25-34">34</a></span>
<span class="normal"><a href="#__codelineno-25-35">35</a></span>
<span class="normal"><a href="#__codelineno-25-36">36</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="n">sudo</span><span class="w"> </span><span class="n">nmap</span><span class="w"> </span><span class="o">-</span><span class="n">sV</span><span class="w"> </span><span class="o">--</span><span class="n">script</span><span class="w"> </span><span class="n">ssh2</span><span class="o">-</span><span class="k">enum</span><span class="o">-</span><span class="n">algos</span><span class="w"> </span><span class="mf">192.168.10.50</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="n">Starting</span><span class="w"> </span><span class="n">Nmap</span><span class="w"> </span><span class="mf">7.95</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//nmap.org ) at 2024-07-08 16:36 PDT</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="n">Nmap</span><span class="w"> </span><span class="n">scan</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">office</span><span class="p">.</span><span class="n">pu</span><span class="p">.</span><span class="n">pri</span><span class="w"> </span><span class="p">(</span><span class="mf">192.168.10.50</span><span class="p">)</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="n">Host</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="p">(</span><span class="mf">0.020</span><span class="n">s</span><span class="w"> </span><span class="n">latency</span><span class="p">).</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="n">Not</span><span class="w"> </span><span class="n">shown</span><span class="o">:</span><span class="w"> </span><span class="mi">996</span><span class="w"> </span><span class="n">closed</span><span class="w"> </span><span class="n">tcp</span><span class="w"> </span><span class="n">ports</span><span class="w"> </span><span class="p">(</span><span class="n">reset</span><span class="p">)</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="n">PORT</span><span class="w">      </span><span class="n">STATE</span><span class="w"> </span><span class="n">SERVICE</span><span class="w">    </span><span class="n">VERSION</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="mi">22</span><span class="o">/</span><span class="n">tcp</span><span class="w">    </span><span class="n">open</span><span class="w">  </span><span class="n">ssh</span><span class="w">        </span><span class="n">Dropbear</span><span class="w"> </span><span class="n">sshd</span><span class="w"> </span><span class="p">(</span><span class="n">protocol</span><span class="w"> </span><span class="mf">2.0</span><span class="p">)</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="o">|</span><span class="w"> </span><span class="n">ssh2</span><span class="o">-</span><span class="k">enum</span><span class="o">-</span><span class="n">algos</span><span class="o">:</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="hll"><span class="o">|</span><span class="w">   </span><span class="n">kex_algorithms</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</span></span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="o">|</span><span class="w">       </span><span class="n">curve25519</span><span class="o">-</span><span class="n">sha256</span>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11"></a><span class="o">|</span><span class="w">       </span><span class="n">curve25519</span><span class="o">-</span><span class="n">sha256</span><span class="err">@</span><span class="n">libssh</span><span class="p">.</span><span class="n">org</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12"></a><span class="o">|</span><span class="w">       </span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha256</span>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13"></a><span class="o">|</span><span class="w">       </span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="o">|</span><span class="w">       </span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group1</span><span class="o">-</span><span class="n">sha1</span>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15"></a><span class="o">|</span><span class="w">       </span><span class="n">kexguess2</span><span class="err">@</span><span class="n">matt</span><span class="p">.</span><span class="n">ucc</span><span class="p">.</span><span class="n">asn</span><span class="p">.</span><span class="n">au</span>
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16"></a><span class="hll"><span class="o">|</span><span class="w">   </span><span class="n">server_host_key_algorithms</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17"></a><span class="o">|</span><span class="w">       </span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18"></a><span class="o">|</span><span class="w">       </span><span class="n">ssh</span><span class="o">-</span><span class="n">dss</span>
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19"></a><span class="hll"><span class="o">|</span><span class="w">   </span><span class="n">encryption_algorithms</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20"></a><span class="o">|</span><span class="w">       </span><span class="n">aes128</span><span class="o">-</span><span class="n">ctr</span>
</span><span id="__span-25-21"><a id="__codelineno-25-21" name="__codelineno-25-21"></a><span class="o">|</span><span class="w">       </span><span class="n">aes256</span><span class="o">-</span><span class="n">ctr</span>
</span><span id="__span-25-22"><a id="__codelineno-25-22" name="__codelineno-25-22"></a><span class="hll"><span class="o">|</span><span class="w">   </span><span class="n">mac_algorithms</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span id="__span-25-23"><a id="__codelineno-25-23" name="__codelineno-25-23"></a><span class="o">|</span><span class="w">       </span><span class="n">hmac</span><span class="o">-</span><span class="n">sha1</span>
</span><span id="__span-25-24"><a id="__codelineno-25-24" name="__codelineno-25-24"></a><span class="o">|</span><span class="w">       </span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="mi">-256</span>
</span><span id="__span-25-25"><a id="__codelineno-25-25" name="__codelineno-25-25"></a><span class="hll"><span class="o">|</span><span class="w">   </span><span class="n">compression_algorithms</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span id="__span-25-26"><a id="__codelineno-25-26" name="__codelineno-25-26"></a><span class="o">|</span><span class="n">_</span><span class="w">      </span><span class="n">none</span>
</span><span id="__span-25-27"><a id="__codelineno-25-27" name="__codelineno-25-27"></a><span class="mi">80</span><span class="o">/</span><span class="n">tcp</span><span class="w">    </span><span class="n">open</span><span class="w">  </span><span class="n">http</span><span class="w">       </span><span class="n">lighttpd</span><span class="w"> </span><span class="mf">1.4.54</span>
</span><span id="__span-25-28"><a id="__codelineno-25-28" name="__codelineno-25-28"></a><span class="o">|</span><span class="n">_http</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">header</span><span class="o">:</span><span class="w"> </span><span class="n">lighttpd</span><span class="o">/</span><span class="mf">1.4.54</span>
</span><span id="__span-25-29"><a id="__codelineno-25-29" name="__codelineno-25-29"></a><span class="mi">443</span><span class="o">/</span><span class="n">tcp</span><span class="w">   </span><span class="n">open</span><span class="w">  </span><span class="n">ssl</span><span class="o">/</span><span class="n">http</span><span class="w">   </span><span class="n">lighttpd</span><span class="w"> </span><span class="mf">1.4.54</span>
</span><span id="__span-25-30"><a id="__codelineno-25-30" name="__codelineno-25-30"></a><span class="o">|</span><span class="n">_http</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">header</span><span class="o">:</span><span class="w"> </span><span class="n">lighttpd</span><span class="o">/</span><span class="mf">1.4.54</span>
</span><span id="__span-25-31"><a id="__codelineno-25-31" name="__codelineno-25-31"></a><span class="mi">10001</span><span class="o">/</span><span class="n">tcp</span><span class="w"> </span><span class="n">open</span><span class="w">  </span><span class="n">tcpwrapped</span>
</span><span id="__span-25-32"><a id="__codelineno-25-32" name="__codelineno-25-32"></a><span class="n">MAC</span><span class="w"> </span><span class="n">Address</span><span class="o">:</span><span class="w"> </span><span class="n">FC</span><span class="o">:</span><span class="n">EC</span><span class="o">:</span><span class="n">DA</span><span class="o">:</span><span class="n">C4</span><span class="o">:</span><span class="mi">6</span><span class="n">E</span><span class="o">:</span><span class="mi">55</span><span class="w"> </span><span class="p">(</span><span class="n">Ubiquiti</span><span class="p">)</span>
</span><span id="__span-25-33"><a id="__codelineno-25-33" name="__codelineno-25-33"></a><span class="n">Service</span><span class="w"> </span><span class="n">Info</span><span class="o">:</span><span class="w"> </span><span class="n">OS</span><span class="o">:</span><span class="w"> </span><span class="n">Linux</span><span class="p">;</span><span class="w"> </span><span class="n">CPE</span><span class="o">:</span><span class="w"> </span><span class="n">cpe</span><span class="o">:/</span><span class="n">o</span><span class="o">:</span><span class="n">linux</span><span class="o">:</span><span class="n">linux_kernel</span>
</span><span id="__span-25-34"><a id="__codelineno-25-34" name="__codelineno-25-34"></a>
</span><span id="__span-25-35"><a id="__codelineno-25-35" name="__codelineno-25-35"></a><span class="n">Service</span><span class="w"> </span><span class="n">detection</span><span class="w"> </span><span class="n">performed</span><span class="p">.</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//nmap.org/submit/ .</span>
</span><span id="__span-25-36"><a id="__codelineno-25-36" name="__codelineno-25-36"></a><span class="n">Nmap</span><span class="w"> </span><span class="n">done</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">up</span><span class="p">)</span><span class="w"> </span><span class="n">scanned</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="mf">17.98</span><span class="w"> </span><span class="n">seconds</span>
</span></code></pre></div></td></tr></table></div>
<p>As you can see, it has good crypto like curve 25519 and aes256-ctr but then it also supports rsa-dss and diffie-hellman group1 sha1! Why?</p>
<p>This is an example of why you don't want to use the wildcard in the configuration file. depending on the client you could end up using sha1 instead of sha2 or ssh-dss instead of ssh-rsa.</p>
<p>nmap also has a similar script for checking SSL (TLS) crypto:</p>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span>
<span class="normal"><a href="#__codelineno-26-16">16</a></span>
<span class="normal"><a href="#__codelineno-26-17">17</a></span>
<span class="normal"><a href="#__codelineno-26-18">18</a></span>
<span class="normal"><a href="#__codelineno-26-19">19</a></span>
<span class="normal"><a href="#__codelineno-26-20">20</a></span>
<span class="normal"><a href="#__codelineno-26-21">21</a></span>
<span class="normal"><a href="#__codelineno-26-22">22</a></span>
<span class="normal"><a href="#__codelineno-26-23">23</a></span>
<span class="normal"><a href="#__codelineno-26-24">24</a></span>
<span class="normal"><a href="#__codelineno-26-25">25</a></span>
<span class="normal"><a href="#__codelineno-26-26">26</a></span>
<span class="normal"><a href="#__codelineno-26-27">27</a></span>
<span class="normal"><a href="#__codelineno-26-28">28</a></span>
<span class="normal"><a href="#__codelineno-26-29">29</a></span>
<span class="normal"><a href="#__codelineno-26-30">30</a></span>
<span class="normal"><a href="#__codelineno-26-31">31</a></span>
<span class="normal"><a href="#__codelineno-26-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="n">sudo</span><span class="w"> </span><span class="n">nmap</span><span class="w"> </span><span class="o">--</span><span class="n">script</span><span class="w"> </span><span class="n">ssl</span><span class="o">-</span><span class="n">cert</span><span class="p">,</span><span class="n">ssl</span><span class="o">-</span><span class="k">enum</span><span class="o">-</span><span class="n">ciphers</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="n">Starting</span><span class="w"> </span><span class="n">Nmap</span><span class="w"> </span><span class="mf">7.94</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//nmap.org ) at 2024-07-12 13:45 PDT</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="n">Nmap</span><span class="w"> </span><span class="n">scan</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mf">3850.</span><span class="n">pu</span><span class="p">.</span><span class="n">pri</span><span class="w"> </span><span class="p">(</span><span class="mf">192.168.10.253</span><span class="p">)</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="n">Host</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0043</span><span class="n">s</span><span class="w"> </span><span class="n">latency</span><span class="p">).</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5"></a>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="n">PORT</span><span class="w">     </span><span class="n">STATE</span><span class="w">  </span><span class="n">SERVICE</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="hll"><span class="mi">443</span><span class="o">/</span><span class="n">tcp</span><span class="w">  </span><span class="n">open</span><span class="w">   </span><span class="n">https</span>
</span></span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="o">|</span><span class="w"> </span><span class="n">ssl</span><span class="o">-</span><span class="k">enum</span><span class="o">-</span><span class="n">ciphers</span><span class="o">:</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="o">|</span><span class="w">   </span><span class="n">TLSv1</span><span class="mf">.2</span><span class="o">:</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="o">|</span><span class="w">     </span><span class="n">ciphers</span><span class="o">:</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="o">|</span><span class="w">       </span><span class="n">TLS_RSA_WITH_AES_256_GCM_SHA384</span><span class="w"> </span><span class="p">(</span><span class="n">rsa</span><span class="w"> </span><span class="mi">2048</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">F</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="o">|</span><span class="w">       </span><span class="n">TLS_RSA_WITH_AES_128_GCM_SHA256</span><span class="w"> </span><span class="p">(</span><span class="n">rsa</span><span class="w"> </span><span class="mi">2048</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">F</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="o">|</span><span class="w">       </span><span class="n">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</span><span class="w"> </span><span class="p">(</span><span class="n">secp256r1</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">F</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="o">|</span><span class="w">       </span><span class="n">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</span><span class="w"> </span><span class="p">(</span><span class="n">secp256r1</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">F</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="o">|</span><span class="w">     </span><span class="n">compressors</span><span class="o">:</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="o">|</span><span class="w">       </span><span class="nb">NULL</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17"></a><span class="o">|</span><span class="w">     </span><span class="n">cipher</span><span class="w"> </span><span class="n">preference</span><span class="o">:</span><span class="w"> </span><span class="n">server</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="o">|</span><span class="w">     </span><span class="n">warnings</span><span class="o">:</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19"></a><span class="o">|</span><span class="w">       </span><span class="n">Insecure</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="p">(</span><span class="n">SHA1</span><span class="p">),</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="n">capped</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">F</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20"></a><span class="o">|</span><span class="n">_</span><span class="w">  </span><span class="n">least</span><span class="w"> </span><span class="n">strength</span><span class="o">:</span><span class="w"> </span><span class="n">F</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21"></a><span class="hll"><span class="o">|</span><span class="w"> </span><span class="n">ssl</span><span class="o">-</span><span class="n">cert</span><span class="o">:</span><span class="w"> </span><span class="n">Subject</span><span class="o">:</span><span class="w"> </span><span class="n">commonName</span><span class="o">=</span><span class="n">IOS</span><span class="o">-</span><span class="n">Self</span><span class="o">-</span><span class="n">Signed</span><span class="o">-</span><span class="n">Certificate</span><span class="mi">-1097548300</span>
</span></span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22"></a><span class="hll"><span class="o">|</span><span class="w"> </span><span class="n">Issuer</span><span class="o">:</span><span class="w"> </span><span class="n">commonName</span><span class="o">=</span><span class="n">IOS</span><span class="o">-</span><span class="n">Self</span><span class="o">-</span><span class="n">Signed</span><span class="o">-</span><span class="n">Certificate</span><span class="mi">-1097548300</span>
</span></span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23"></a><span class="hll"><span class="o">|</span><span class="w"> </span><span class="n">Public</span><span class="w"> </span><span class="n">Key</span><span class="w"> </span><span class="n">type</span><span class="o">:</span><span class="w"> </span><span class="n">rsa</span>
</span></span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24"></a><span class="hll"><span class="o">|</span><span class="w"> </span><span class="n">Public</span><span class="w"> </span><span class="n">Key</span><span class="w"> </span><span class="n">bits</span><span class="o">:</span><span class="w"> </span><span class="mi">2048</span>
</span></span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25"></a><span class="hll"><span class="o">|</span><span class="w"> </span><span class="n">Signature</span><span class="w"> </span><span class="n">Algorithm</span><span class="o">:</span><span class="w"> </span><span class="n">sha1WithRSAEncryption</span>
</span></span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26"></a><span class="hll"><span class="o">|</span><span class="w"> </span><span class="n">Not</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">before</span><span class="o">:</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-03</span><span class="mi">-08</span><span class="n">T00</span><span class="o">:</span><span class="mi">38</span><span class="o">:</span><span class="mi">42</span>
</span></span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27"></a><span class="hll"><span class="o">|</span><span class="w"> </span><span class="n">Not</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">after</span><span class="o">:</span><span class="w">  </span><span class="mi">2030</span><span class="mo">-01-01</span><span class="n">T00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
</span></span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28"></a><span class="hll"><span class="o">|</span><span class="w"> </span><span class="n">MD5</span><span class="o">:</span><span class="w">   </span><span class="mi">12</span><span class="n">d5</span><span class="o">:</span><span class="mi">9652</span><span class="o">:</span><span class="mi">7129</span><span class="o">:</span><span class="mi">3</span><span class="n">c66</span><span class="o">:</span><span class="mi">169</span><span class="n">d</span><span class="o">:</span><span class="mf">1e69</span><span class="o">:</span><span class="mi">2</span><span class="n">dc1</span><span class="o">:</span><span class="n">ddcc</span>
</span></span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29"></a><span class="hll"><span class="o">|</span><span class="n">_SHA</span><span class="mi">-1</span><span class="o">:</span><span class="w"> </span><span class="mf">9f</span><span class="n">cc</span><span class="o">:</span><span class="mi">9</span><span class="n">d66</span><span class="o">:</span><span class="n">f55a</span><span class="o">:</span><span class="n">ccec</span><span class="o">:</span><span class="mi">4949</span><span class="o">:</span><span class="mi">4</span><span class="n">da8</span><span class="o">:</span><span class="n">a3f7</span><span class="o">:</span><span class="mi">205</span><span class="n">a</span><span class="o">:</span><span class="mo">046</span><span class="n">d</span><span class="o">:</span><span class="mi">78</span><span class="n">b0</span>
</span></span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30"></a><span class="n">MAC</span><span class="w"> </span><span class="n">Address</span><span class="o">:</span><span class="w"> </span><span class="n">F8</span><span class="o">:</span><span class="mi">7</span><span class="n">B</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span><span class="mi">34</span><span class="o">:</span><span class="n">A3</span><span class="o">:</span><span class="n">C6</span><span class="w"> </span><span class="p">(</span><span class="n">Cisco</span><span class="w"> </span><span class="n">Systems</span><span class="p">)</span>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31"></a>
</span><span id="__span-26-32"><a id="__codelineno-26-32" name="__codelineno-26-32"></a><span class="n">Nmap</span><span class="w"> </span><span class="n">done</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">up</span><span class="p">)</span><span class="w"> </span><span class="n">scanned</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="mf">1.53</span><span class="w"> </span><span class="n">seconds</span>
</span></code></pre></div></td></tr></table></div>
<p>For new deployments you should take the time to remove legacy crypto in the switch configuration that you build. Once you decide on the best setup, add it to your base template. This is a best practice and will save you some embarrassment if the customer has a security team. Don't ask me how I know this.</p>
<p>If you have written permission from the network owner, you can use this script to do a quick cipher suite assessment of the existing network devices. I have a python script that creates a menu of nmap scripts for security testing. You can find it <a href="https://github.com/rikosintie/nmap-python">here</a>. The script is easy to use has a lot of nmap goodness for a network engineer.</p>
<hr />
<h2 id="ssh-gui-clients">SSH GUI Clients</h2>
<p>Here are three different GUI SSH clients for Linux.</p>
<h3 id="putty">Putty</h3>
<p>If you are coming from Windows you have probably used Putty. There is a Linux version of putty that is free to use.</p>
<h4 id="installation">Installation</h4>
<p>You can install putty using the Ubuntu package manager:</p>
<p><code>sudo apt-get install -y putty</code></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>putty
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="o">[</span>sudo<span class="o">]</span><span class="w"> </span>password<span class="w"> </span><span class="k">for</span><span class="w"> </span>mhubbard:
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>Reading<span class="w"> </span>package<span class="w"> </span>lists...<span class="w"> </span>Done
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>Building<span class="w"> </span>dependency<span class="w"> </span>tree...<span class="w"> </span>Done
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>Reading<span class="w"> </span>state<span class="w"> </span>information...<span class="w"> </span>Done
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>The<span class="w"> </span>following<span class="w"> </span>additional<span class="w"> </span>packages<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>installed:
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="w">  </span>putty-tools
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>Suggested<span class="w"> </span>packages:
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="w">  </span>putty-doc
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>The<span class="w"> </span>following<span class="w"> </span>NEW<span class="w"> </span>packages<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>installed:
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="w">  </span>putty<span class="w"> </span>putty-tools
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="m">0</span><span class="w"> </span>upgraded,<span class="w"> </span><span class="m">2</span><span class="w"> </span>newly<span class="w"> </span>installed,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>remove<span class="w"> </span>and<span class="w"> </span><span class="m">6</span><span class="w"> </span>not<span class="w"> </span>upgraded.
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>Need<span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span><span class="m">1</span>,240<span class="w"> </span>kB<span class="w"> </span>of<span class="w"> </span>archives.
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>putty<span class="w"> </span>--version
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>putty<span class="w"> </span>--version
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>PuTTY:<span class="w"> </span>Release<span class="w"> </span><span class="m">0</span>.78
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>Build<span class="w"> </span>platform:<span class="w"> </span><span class="m">64</span>-bit<span class="w"> </span>Unix<span class="w"> </span><span class="o">(</span>GTK<span class="w"> </span>+<span class="w"> </span>X11<span class="o">)</span>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>Compiler:<span class="w"> </span>gcc<span class="w"> </span><span class="m">13</span>.2.0
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>Compiled<span class="w"> </span>against<span class="w"> </span>GTK<span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.24.38
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>Source<span class="w"> </span>commit:<span class="w"> </span>4ff82ab29a22936b78510c68f544a99e677efed3
</span></code></pre></div>
<p>Notice that it's a fairly old version. Tap the Super key and type <code>putty</code> to run it. I would not install it, instead use ssh from terminator or purchase Termius/SecureCRT.</p>
<h3 id="termius">Termius</h3>
<p>Termius is a modern SSH client and terminal that works on:</p>
<ul>
<li>Windows</li>
<li>Mac OS</li>
<li>Linux</li>
<li>IOS</li>
<li>Android</li>
</ul>
<p>Which makes it a great option. I personally use it on all of those except Windows. It syncs to the cloud so no matter what device I am on I have all of my hosts, keys, etc. It also has color coding for most network devices and a lot of themes.</p>
<p>I bought it years ago when it was in beta. It's now a $10.00 per month subscription. I think it's worth $10 per month but you will have to decide for yourself.</p>
<h4 id="installation-termius">Installation Termius</h4>
<p>go to <a href="https://termius.com/download/windows">download</a> and select <code>Download .DEB</code> then open a terminal and run <code>sudo dpkg -i Termius.deb</code></p>
<hr />
<h3 id="securecrt">SecureCRT</h3>
<p>This is the 800lb Gorilla of SSH clients. If your company pays for a license for Windows users, you should be able jump on that plan. If not it's $209 for a three year subscription or $129 for a 1 year subscription.</p>
<p>I have never used SecureCRT so I am just going to put a link to the download here and you can research it yourself.</p>
<h4 id="installation-securecrt">Installation SecureCRT</h4>
<p><a href="https://www.vandyke.com/cgi-bin/releases.php?product=securecrt">SecureCRT Downloads</a></p>
<hr />
<h2 id="creating-ssh-keys">Creating SSH Keys</h2>
<p>The OpenSSH client allows you to create custom SSH keys. You can create as many keys as you need. You should think about your security requirements and create SSH keys to fit the requirements. For example, if you work for a VAR or MSP, you may want to create unique keys for each customer. You can create subdirectories for different customers. For example:</p>
<p><code>~/.ssh/customer1/</code></p>
<p>See the section <a href="#network-devices-with-legacy-ciphers">Network Devices with legacy ciphers</a> for an example of how to add a key to a device profile.</p>
<p>My current recommended public-key signing algorithm is Dan Bernstein's ED25519. To create a set of keys using ed25519, run the following in the terminal from the ~/.ssh directory:</p>
<p><code>ssh-keygen -a 100 -f id_custom_25519 -o -t ed25519 -C "$(whoami)@$(uname -n)-$(date -I)"</code></p>
<p>-a 100 Use 100 rounds of pbkdf2 (password based key derivation function 2).</p>
<p>-f name for the key pair.</p>
<p>-o Use the new RFC4716 key format and the use of a modern key derivation function powered by bcrypt.</p>
<p>-t Specifies the type of key to create. The options are:</p>
<ul>
<li>dsa (weak)</li>
<li>ecdsa</li>
<li>ecdsa‐sk</li>
<li>ed25519</li>
<li>ed25519‐sk</li>
<li>rsa (weak)</li>
</ul>
<p>dsa and rsa are not good choices as they are deprecated. The keys with -sk at the end are for use with physical Security Keys. See the <a href="#yubico-authenticator">Yubico</a> topic later in this section for more information.</p>
<p>-C Specifies a comment to be added to the public key to make it easier to identify the key in the authorized_keys file of the server you connect to. This is optional. In the example:</p>
<ul>
<li>whoami - The username</li>
<li>uname -n - The device hostname</li>
<li>date -I - The year-month-day</li>
</ul>
<p>Specify a strong passphrase when prompted. The passphrase is required anytime you use the key. If you don’t password protect the key, and an attacker gets access to the keys, they can log into any server you used them on.</p>
<p>Here is what the output of the command should look like:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span>
<span class="normal"><a href="#__codelineno-28-18">18</a></span>
<span class="normal"><a href="#__codelineno-28-19">19</a></span>
<span class="normal"><a href="#__codelineno-28-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="hll">ssh-keygen<span class="w"> </span>-a<span class="w"> </span><span class="m">100</span><span class="w"> </span>-o<span class="w"> </span>-C<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>whoami<span class="k">)</span><span class="s2">@</span><span class="k">$(</span>uname<span class="w"> </span>-n<span class="k">)</span><span class="s2">-</span><span class="k">$(</span>date<span class="w"> </span>-I<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>-f<span class="w"> </span>id_custom_25519<span class="w"> </span>-t<span class="w"> </span>ed25519
</span></span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2"></a>Generating<span class="w"> </span>public/private<span class="w"> </span>ed25519<span class="w"> </span>key<span class="w"> </span>pair.
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3"></a>Enter<span class="w"> </span>passphrase<span class="w"> </span><span class="o">(</span>empty<span class="w"> </span><span class="k">for</span><span class="w"> </span>no<span class="w"> </span>passphrase<span class="o">)</span>:
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4"></a>Enter<span class="w"> </span>same<span class="w"> </span>passphrase<span class="w"> </span>again:
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="hll">Your<span class="w"> </span>identification<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>saved<span class="w"> </span><span class="k">in</span><span class="w"> </span>id_custom_25519
</span></span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="hll">Your<span class="w"> </span>public<span class="w"> </span>key<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>saved<span class="w"> </span><span class="k">in</span><span class="w"> </span>id_custom_25519.pub
</span></span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="hll">The<span class="w"> </span>key<span class="w"> </span>fingerprint<span class="w"> </span>is:
</span></span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8"></a>SHA256:4alqMRHMO/O91aJjlON2NLOUVcwZ5WLBVpcIaOFKylw<span class="w"> </span>mhubbard@1S1K-G5-5587-2024-07-11
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9"></a>The<span class="w"> </span>key<span class="err">&#39;</span>s<span class="w"> </span>randomart<span class="w"> </span>image<span class="w"> </span>is:
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10"></a>+--<span class="o">[</span>ED25519<span class="w"> </span><span class="m">256</span><span class="o">]</span>--+
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="p">|</span><span class="w">   </span>o<span class="w">     </span>.o..++<span class="o">==</span><span class="p">|</span>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="p">|</span><span class="w">    </span>+<span class="w">   </span>.o<span class="w">   </span>.B+.<span class="p">|</span>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="p">|</span><span class="w">     </span>o<span class="w"> </span>Eo.<span class="w">   </span>oo<span class="w"> </span>.<span class="p">|</span>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="p">|</span><span class="w">    </span>B<span class="w"> </span>+..o<span class="w">  </span>..<span class="w"> </span>.<span class="w"> </span><span class="p">|</span>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="p">|</span><span class="w">     </span>O<span class="w"> </span>oS.<span class="w"> </span>+<span class="w">     </span><span class="p">|</span>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="p">|</span><span class="w">    </span>o<span class="w"> </span>..<span class="o">=</span><span class="w"> </span>O<span class="w"> </span>.<span class="w">    </span><span class="p">|</span>
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17"></a><span class="p">|</span><span class="w">     </span>o.o<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">=</span><span class="w">     </span><span class="p">|</span>
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18"></a><span class="p">|</span><span class="w">    </span>..<span class="w">  </span>B<span class="w"> </span>o<span class="w">      </span><span class="p">|</span>
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19"></a><span class="p">|</span><span class="w">   </span>..<span class="w">  </span>o<span class="w"> </span>o<span class="w">       </span><span class="p">|</span>
</span><span id="__span-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20"></a>+----<span class="o">[</span>SHA256<span class="o">]</span>-----+
</span></code></pre></div></td></tr></table></div>
<p>Here is what the public key looks like with the comment:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span>
<span class="normal"><a href="#__codelineno-29-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="hll">cat<span class="w"> </span>id_custom_25519.pub
</span></span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">       </span>│<span class="w"> </span>File:<span class="w"> </span>id_custom_25519.pub
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">       </span>│<span class="w"> </span>ssh-ed25519·AAAAC3NzaC1lZDI1NTE5AAAAINCnTz475PiCydfW10kXIwPqpRpufeeuicoY9NLUndbt·mhubbard@1S1K-G5-5587-2024-07-11
</span></code></pre></div></td></tr></table></div>
<p>You can see my username (mhubbard), hostname (1S1K-G5-5587) and date at the end.</p>
<p>You can replace any of the variables between the starting <code>"</code> and ending <code>"</code>. For example instead of hostname you could use <code>key-4-cisco</code>:</p>
<p><code>"$(whoami)-key4cisco-$(date -I)"</code></p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span>
<span class="normal"><a href="#__codelineno-30-2">2</a></span>
<span class="normal"><a href="#__codelineno-30-3">3</a></span>
<span class="normal"><a href="#__codelineno-30-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="hll">ssh-keygen<span class="w"> </span>-a<span class="w"> </span><span class="m">100</span><span class="w"> </span>-f<span class="w"> </span>id_custom_25519<span class="w">  </span>-o<span class="w">  </span>-t<span class="w"> </span>ed25519<span class="w"> </span>-C<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>whoami<span class="k">)</span><span class="s2">-key4cisco-</span><span class="k">$(</span>date<span class="w"> </span>-I<span class="k">)</span><span class="s2">&quot;</span>
</span></span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2"></a>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3"></a>The<span class="w"> </span>key<span class="w"> </span>fingerprint<span class="w"> </span>is:
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="hll">SHA256:nDm2hRdFrE7xLV3UxKh1DHEOS1C5Ftm0l/Wtqvb6OgI<span class="w"> </span>mhubbard-key4cisco-2024-07-24
</span></span></code></pre></div></td></tr></table></div>
<hr />
<h3 id="display-the-existing-keys-on-ubuntu">Display the existing keys on Ubuntu</h3>
<div class="admonition note">
<p class="admonition-title">Tip for naming keys</p>
<p>I always start my key names wih <code>id_</code>. If you don't, you will need to modify the <code>~/.ssh/id_*</code> section of the next command.</p>
</div>
<p><code>for keyfile in ~/.ssh/id_*; do ssh-keygen -l -f "${keyfile}"; done | uniq</code></p>
<ul>
<li>DSA or RSA 1024 bits: This is a red flag. Unsafe.</li>
<li>RSA 2048: This is a yellow flag, recommended to change</li>
<li>RSA 3072/4096: Good, but ED25519 is better!</li>
<li>ECDSA: depends. Recommended to change</li>
<li>ED25519: The best choice!</li>
</ul>
<p>Here is what it looked like on my laptop.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span>
<span class="normal"><a href="#__codelineno-31-3">3</a></span>
<span class="normal"><a href="#__codelineno-31-4">4</a></span>
<span class="normal"><a href="#__codelineno-31-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="hll"><span class="k">for</span><span class="w"> </span>keyfile<span class="w"> </span><span class="k">in</span><span class="w"> </span>~/.ssh/id_*<span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>ssh-keygen<span class="w"> </span>-l<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">keyfile</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">done</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq
</span></span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="m">256</span><span class="w"> </span>SHA256:2uWbzS9A/4dI+ZS+bM8f5q6wTqeb8vsBvylvQi5B9dE<span class="w"> </span>mhubbard@1S1K-G5-5587-2024-07-08<span class="w"> </span><span class="o">(</span>ED25519<span class="o">)</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="m">256</span><span class="w"> </span>SHA256:2XtMiDbg64rBnUXOzcFFXqwzUbbAjAO2Y9RwrWvVTB4<span class="w"> </span>michael.hubbard999@gmail.com<span class="w"> </span><span class="o">(</span>ED25519<span class="o">)</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="m">4096</span><span class="w"> </span>SHA256:0WF9uxNBCPeeHzMAGsYJy2wrsOXNrhPxJ+3lp2PxI+E<span class="w"> </span>mhubbard@1S1K-G5-5587-2024-07-11<span class="w"> </span><span class="o">(</span>RSA<span class="o">)</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="m">2048</span><span class="w"> </span>SHA256:YRwfm94a26cfCQZK6mT3SO29XaLoAHWJgnixN2OZDM0<span class="w"> </span>mhubbard@1S1K-G5-5587<span class="w"> </span><span class="o">(</span>RSA<span class="o">)</span>
</span></code></pre></div></td></tr></table></div>
<p>You can see the comment on the first key.</p>
<p>You can print the file name out by adding a print statement:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span>
<span class="normal"><a href="#__codelineno-32-3">3</a></span>
<span class="normal"><a href="#__codelineno-32-4">4</a></span>
<span class="normal"><a href="#__codelineno-32-5">5</a></span>
<span class="normal"><a href="#__codelineno-32-6">6</a></span>
<span class="normal"><a href="#__codelineno-32-7">7</a></span>
<span class="normal"><a href="#__codelineno-32-8">8</a></span>
<span class="normal"><a href="#__codelineno-32-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="hll"><span class="k">for</span><span class="w"> </span>keyfile<span class="w"> </span><span class="k">in</span><span class="w"> </span>~/.ssh/id_*.pub<span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>ssh-keygen<span class="w"> </span>-l<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">keyfile</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span>print<span class="w"> </span><span class="si">${</span><span class="nv">keyfile</span><span class="si">}</span><span class="p">;</span><span class="w"> </span><span class="k">done</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq
</span></span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="m">256</span><span class="w"> </span>SHA256:2uWbzS9A/4dI+ZS+bM8f5q6wTqeb8vsBvylvQi5B9dE<span class="w"> </span>mhubbard@1S1K-G5-5587-2024-07-08<span class="w"> </span><span class="o">(</span>ED25519<span class="o">)</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="hll">/home/mhubbard/.ssh/id_custom_25519.pub
</span></span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="m">256</span><span class="w"> </span>SHA256:2XtMiDbg64rBnUXOzcFFXqwzUbbAjAO2Y9RwrWvVTB4<span class="w"> </span>michael.hubbard999@gmail.com<span class="w"> </span><span class="o">(</span>ED25519<span class="o">)</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="hll">/home/mhubbard/.ssh/id_github.pub
</span></span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="m">4096</span><span class="w"> </span>SHA256:0WF9uxNBCPeeHzMAGsYJy2wrsOXNrhPxJ+3lp2PxI+E<span class="w"> </span>mhubbard@1S1K-G5-5587-2024-07-11<span class="w"> </span><span class="o">(</span>RSA<span class="o">)</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="hll">/home/mhubbard/.ssh/id_rsa.pub
</span></span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="m">2048</span><span class="w"> </span>SHA256:YRwfm94a26cfCQZK6mT3SO29XaLoAHWJgnixN2OZDM0<span class="w"> </span>mhubbard@1S1K-G5-5587<span class="w"> </span><span class="o">(</span>RSA<span class="o">)</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="hll">/home/mhubbard/.ssh/id_rsa_pub_2096.pub
</span></span></code></pre></div></td></tr></table></div>
<h3 id="ssh-key-permissions">SSH Key permissions</h3>
<p>The private key should have rw permission to only the user. No other users or groups should have any permissions. Use the following to view/set the permissions:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span>
<span class="normal"><a href="#__codelineno-33-4">4</a></span>
<span class="normal"><a href="#__codelineno-33-5">5</a></span>
<span class="normal"><a href="#__codelineno-33-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="hll">ls<span class="w"> </span>-l
</span></span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2"></a>-rw-------<span class="w">    </span><span class="m">1</span><span class="w"> </span>mhubbard<span class="w">  </span>staff<span class="w">   </span>464B<span class="w"> </span>Jul<span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">15</span>:54<span class="w"> </span>id_custom_25519
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3"></a>-rw-r--r--<span class="w">    </span><span class="m">1</span><span class="w"> </span>mhubbard<span class="w">  </span>staff<span class="w">   </span>108B<span class="w"> </span>Jul<span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">15</span>:54<span class="w"> </span>id_custom_25519.pub
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4"></a>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5"></a>If<span class="w"> </span>the<span class="w"> </span>permissions<span class="w"> </span>are<span class="w"> </span>wrong,<span class="w"> </span>use<span class="w"> </span>the<span class="w"> </span>following:
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="hll">chmod<span class="w"> </span><span class="m">600</span><span class="w"> </span>~/.ssh/id_custom_25519
</span></span></code></pre></div></td></tr></table></div>
<p>Here is the output using keys with 0644 instead of 0600:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span>
<span class="normal"><a href="#__codelineno-34-6">6</a></span>
<span class="normal"><a href="#__codelineno-34-7">7</a></span>
<span class="normal"><a href="#__codelineno-34-8">8</a></span>
<span class="normal"><a href="#__codelineno-34-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="hll">ssh<span class="w"> </span>-i<span class="w"> </span>~/.ssh/juniper_ed25519_key<span class="w"> </span>root@192.168.10.162
</span></span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a>Authorized<span class="w"> </span>access<span class="w"> </span>only!<span class="w"> </span>Violators<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>violated!
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a>@<span class="w">         </span>WARNING:<span class="w"> </span>UNPROTECTED<span class="w"> </span>PRIVATE<span class="w"> </span>KEY<span class="w"> </span>FILE!<span class="w">          </span>@
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="hll">Permissions<span class="w"> </span><span class="m">0664</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s1">&#39;/home/mhubbard/.ssh/juniper_ed25519_key&#39;</span><span class="w"> </span>are<span class="w"> </span>too<span class="w"> </span>open.
</span></span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7"></a>It<span class="w"> </span>is<span class="w"> </span>required<span class="w"> </span>that<span class="w"> </span>your<span class="w"> </span>private<span class="w"> </span>key<span class="w"> </span>files<span class="w"> </span>are<span class="w"> </span>NOT<span class="w"> </span>accessible<span class="w"> </span>by<span class="w"> </span>others.
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8"></a>This<span class="w"> </span>private<span class="w"> </span>key<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>ignored.
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9"></a>Load<span class="w"> </span>key<span class="w"> </span><span class="s2">&quot;/home/mhubbard/.ssh/juniper_ed25519_key&quot;</span>:<span class="w"> </span>bad<span class="w"> </span>permissions
</span></code></pre></div></td></tr></table></div>
<hr />
<h2 id="using-the-ssh-keys">Using the SSH keys</h2>
<p><img alt="▶" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/25b6.svg" title=":arrow_forward:" /> KEY TAKEAWAYS</p>
<ul>
<li>SSH Keys use Public Key Infrastructure (PKI) instead of usernames/passwords. Keys are more challenging to brute force than passwords.</li>
<li>Linux servers are very easy to configure to use ssh keys on. The <code>ssh-copy-id -i ~/.ssh/id_rsa.pub &lt;Server_IP&gt;</code> command copies the public key to the server in one step.</li>
<li>Hardware Security devices such as Yubico <a href="https://www.yubico.com/products/security-key/">Yubikey</a> and the Google <a href="https://store.google.com/product/titan_security_key?hl=en-US&amp;pli=1">Titan Security Key</a> allow you to store your keys securely and login from any laptop or desktop.</li>
<li>Many Network Devices (Cisco, Aruba, Juniper, Arista, Ubiquiti, etc.) support ssh key authentication.</li>
</ul>
<hr />
<p>Once you have keys created what do you do with them? If you support Linux servers it's very easy to copy the public key to the server. Using a Public/Private key pair instead of a password to authenticate an SSH session is popular on Linux/Unix boxes. If you spin up a Virtual Private server on Digital Ocean or Linode you will want to use keys instead of a username and password.</p>
<p>Digital Ocean, a Virtual Private Server (VPS) provider, has this advice on how you should log into their Droplets:  "you should use public key authentication instead of passwords, if at all possible. This is because SSH keys provide a more secure way of logging in compared to using a password alone. While a password can eventually be cracked with a brute-force attack, SSH keys are nearly impossible to decipher by brute force alone." Plus, it means you never have to type C!$c0 again!</p>
<p>See <a href="#brute-forcing-ssh">Brute Forcing SSH</a> below for an example of brute forcing ssh with nmap.</p>
<hr />
<h3 id="ssh-keys-with-a-linux-server">SSH Keys with a Linux server</h3>
<p>Following along with our <code>id_custom_25519</code> example and an Ubuntu server at 192.168.10.223:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span>
<span class="normal"><a href="#__codelineno-35-19">19</a></span>
<span class="normal"><a href="#__codelineno-35-20">20</a></span>
<span class="normal"><a href="#__codelineno-35-21">21</a></span>
<span class="normal"><a href="#__codelineno-35-22">22</a></span>
<span class="normal"><a href="#__codelineno-35-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="hll"><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_custom_25519</span><span class="w"> </span><span class="mf">192.168.10.223</span>
</span></span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">INFO</span><span class="p">:</span><span class="w"> </span><span class="n">Source</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">key</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">installed</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/home/mhubbard/.ssh/id_custom_25519.pub&quot;</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="n">The</span><span class="w"> </span><span class="n">authenticity</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="err">&#39;</span><span class="mf">192.168.10.223</span><span class="w"> </span><span class="p">(</span><span class="mf">192.168.10.223</span><span class="p">)</span><span class="err">&#39;</span><span class="w"> </span><span class="n">can</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">established</span><span class="p">.</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="n">RSA</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">fingerprint</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">SHA256</span><span class="p">:</span><span class="n">oKfQX</span><span class="o">+/</span><span class="mi">8l</span><span class="n">wu3rfP8OMRpAfoeJo8EaOeUZ9kxMQfFNsc</span><span class="p">.</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="n">This</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">known</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">names</span><span class="o">/</span><span class="n">addresses</span><span class="p">:</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">    </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">known_hosts</span><span class="p">:</span><span class="mi">186</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">hashed</span><span class="w"> </span><span class="n">name</span><span class="p">]</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="n">Are</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">continue</span><span class="w"> </span><span class="nf">connecting</span><span class="w"> </span><span class="p">(</span><span class="n">yes</span><span class="o">/</span><span class="n">no</span><span class="o">/</span><span class="p">[</span><span class="n">fingerprint</span><span class="p">])</span><span class="o">?</span><span class="w"> </span><span class="n">yes</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">INFO</span><span class="p">:</span><span class="w"> </span><span class="n">attempting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">key</span><span class="p">(</span><span class="n">s</span><span class="p">),</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">installed</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">INFO</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">key</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">remain</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">prompted</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">keys</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="n">mhubbard</span><span class="err">@</span><span class="mf">192.168.10.223</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="p">:</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11"></a>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="n">Number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nf">key</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">added</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13"></a>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="n">Now</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">logging</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">machine</span><span class="p">,</span><span class="w"> </span><span class="k">with</span><span class="p">:</span><span class="w">   </span><span class="s">&quot;ssh &#39;192.168.10.223&#39;&quot;</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15"></a><span class="k">and</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nf">key</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">wanted</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">added</span><span class="p">.</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16"></a>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17"></a>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="w"> </span><span class="err">⌚</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span><span class="mi">05</span>
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19"></a><span class="hll"><span class="err">$</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="mf">192.168.10.223</span>
</span></span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20"></a><span class="n">Welcome</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Ubuntu</span><span class="w"> </span><span class="mf">24.04</span><span class="w"> </span><span class="n">LTS</span><span class="w"> </span><span class="p">(</span><span class="n">GNU</span><span class="o">/</span><span class="n">Linux</span><span class="w"> </span><span class="mf">6.8.0</span><span class="o">-</span><span class="mi">35</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="n">x86_64</span><span class="p">)</span>
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21"></a><span class="err">╭─</span><span class="n">mhubbard@ubuntu</span><span class="o">-</span><span class="n">server</span><span class="w"> </span><span class="o">~</span>
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22"></a><span class="hll"><span class="err">╰─$</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">authorized_keys</span>
</span></span><span id="__span-35-23"><a id="__codelineno-35-23" name="__codelineno-35-23"></a><span class="n">ssh</span><span class="o">-</span><span class="n">ed25519</span><span class="w"> </span><span class="n">AAAAC3NzaC1lZDI1NTE5AAAAIGrwMtnnQo0kfjQVwcWOKx72SgsTB7Qj8FPTyyVwduxn</span><span class="w"> </span><span class="n">mhubbard</span><span class="err">@</span><span class="mi">1</span><span class="n">S1K</span><span class="o">-</span><span class="n">G5</span><span class="o">-</span><span class="mi">5587</span><span class="o">-</span><span class="mi">2024</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">08</span>
</span></code></pre></div></td></tr></table></div>
<p>You can see how the comment makes the key easy to identify in the authorized_keys file.</p>
<p>Since we created a passphrase for the key we are prompted for the passphrase, then logged in.</p>
<h3 id="automatic-logins">Automatic logins</h3>
<p>If you need to have an automated login, you can create a key without a passphrase. The actual connection is still secure, but if you lose control of the private key anyone can use it. It's one of those religious arguments that exit in security circles.</p>
<p>Alternatively, you can add the ssh private key to the ssh agent using the following command:</p>
<p><code>ssh-add ~/.ssh/id_custom_ed25519</code></p>
<p>You will be prompted for the passphrase.</p>
<h4 id="ssh-add-switches">ssh-add switches</h4>
<p>You can find all switches using <code>man ssh-add</code>. Here I'm listing the more common switches.</p>
<ul>
<li>D Deletes all identities from the agent.</li>
<li>d Deletes the given identities from the agent. The private key files for the identities to be deleted should be listed on the command line.</li>
<li>K Load resident keys from a FIDO authenticator.</li>
<li>k When loading keys into or deleting keys from the agent, process plain private keys only, skipping certificates.</li>
<li>L Lists public key parameters of all identities currently represented by the agent.</li>
<li>l Lists fingerprints of all identities currently represented by the agent.</li>
<li>X Unlocks the agent. This asks for a password to unlock.</li>
<li>x Locks the agent. This asks for a password; the password is required for unlocking the agent. When the agent is locked, it cannot be used for authentication.</li>
</ul>
<p>Be sure to ask your security team if using the ssh-agent is permitted.</p>
<h3 id="i-get-an-error-when-trying-to-use-the-key">I get an error when trying to use the key</h3>
<p>If the login fails, rerun the ssh command with -vvvv <code>ssh -vvvv 192.168.10.253</code>. If you see a debug message <code>sign_and_send_pubkey: signing failed: agent refused operation</code> the first time you use the key enter the following:</p>
<p><code>ssh-add</code> to add the default private keys to the ssh agent and</p>
<p><code>ssh-add ~/.ssh/id_custom_ed25519</code> to add our custom key.</p>
<p>You can view the keys in the agent using:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span>
<span class="normal"><a href="#__codelineno-36-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="hll">ssh-add<span class="w"> </span>-l
</span></span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="m">4096</span><span class="w"> </span>SHA256:0WF9uxNBCPeeHzMAGsYJy2wrsOXNrhPxJ+3lp2PxI+E<span class="w"> </span>mhubbard@1S1K-G5-5587-2024-07-11<span class="w"> </span><span class="o">(</span>RSA<span class="o">)</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="m">4096</span><span class="w"> </span>SHA256:569SKPB/kLsw1DqVlSV4J+bE+NYUDfY/LHNbvjvRs+o<span class="w"> </span>mhubbard@vectorusa.com<span class="w"> </span><span class="o">(</span>RSA<span class="o">)</span>
</span></code></pre></div></td></tr></table></div>
<p>For the first key you can see the size, 4096 bits, the fingerprint, the label we used when creating the key and the type (RSA).</p>
<h3 id="references-ssh-add">References ssh-add</h3>
<ul>
<li><a href="https://www.ssh.com/academy/ssh/add-command">SSH Keys for SSO: Usage, ssh-add Command, ssh-agent</a></li>
</ul>
<hr />
<h3 id="ssh-keys-with-github">SSH Keys with github</h3>
<p>Github doesn't accept username/password for repositories any longer. You will need to use a key pair and configure git to use it. I created a key pair just for github named id_github. To add it to your global git configuration:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span>
<span class="normal"><a href="#__codelineno-37-5">5</a></span>
<span class="normal"><a href="#__codelineno-37-6">6</a></span>
<span class="normal"><a href="#__codelineno-37-7">7</a></span>
<span class="normal"><a href="#__codelineno-37-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a>add<span class="w"> </span>the<span class="w"> </span>key
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="hll">git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>user.signingkey<span class="w"> </span>~/.ssh/id_github.pub
</span></span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4"></a>Display<span class="w"> </span>the<span class="w"> </span>user<span class="w"> </span>settings<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>~/.gitconfig<span class="w"> </span>file
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="hll">git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>--list
</span></span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6"></a>user.name<span class="o">=</span>rikosintie
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7"></a>user.email<span class="o">=</span>michael.hubbard999@gmail.com
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8"></a>user.signingkey<span class="o">=</span>/home/mhubbard/.ssh/id_github.pub
</span></code></pre></div></td></tr></table></div>
<p>Once you have the key configured in the ~/.gitconfig file you will need log into github.com, settings, SSH and GPG keys, and click "New SSH key".</p>
<hr />
<h3 id="using-ssh-keys-with-network-devices">Using SSH keys with network devices</h3>
<p>First off why would you want to use ssh keys on switches/routers/etc? With large customers you typically use Cisco ISE, Aruba Clearpass or Microsoft Network Policy Server (NPS) and authenticate to Microsoft AD.</p>
<p>But with smaller customers you may not have these infrastructure services available. Using SSH keys on switches/routers/etc when ISE, Clearpass or NPS isn't available is better than using local users and passwords. In this situation, over time,  the customer will usually have several different usernames and passwords across different switches and it can be a nightmare to log into all the switches.</p>
<p>They may not even have the credentials for all devices. In that case, you may want to use the nmap ssh-brute script. See <a href="#brute-forcing-ssh">Brute Forcing SSH</a> below for an example of brute forcing ssh with nmap.</p>
<p>If you add your public key to the network devices before deploying, at least you will be able to log in efficiently without wasting time trying different passwords. You can also give the private key to the customer and they can import it into Putty.</p>
<hr />
<h2 id="using-ssh-keys-with-a-cisco-ios-switch">Using SSH keys with a Cisco IOS switch</h2>
<p>Unfortunately it's not quite as easy to enable key based login on network devices but it's just a process. You can include it in your basic security template for example and automate it.</p>
<p>I'm using a WS-C3850-48U running 16.12.3a CAT3K_CAA-UNIVERSALK9 for this example.</p>
<hr />
<h3 id="configure-a-time-server">Configure a Time Server</h3>
<p>Accurate time is required to use ssh keys. The first step is to configure a time server.</p>
<div class="language-c# highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="n">no</span><span class="w"> </span><span class="n">ntp</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="n">ntp</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">time</span><span class="o">-</span><span class="n">b</span><span class="p">.</span><span class="n">nist</span><span class="p">.</span><span class="n">gov</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="n">ntp</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="mf">192.168.10.222</span><span class="w"> </span><span class="n">prefer</span>
</span></code></pre></div>
<p>The <code>no ntp allow mode control 3</code> is a Cisco recommended best practice to prevent DOS attacks.</p>
<ul>
<li>ntp allow mode control 3 --&gt; causes the device to respond to mode 6 packet with a delay of 3 seconds, hence rate limiting and being considered not vulnerable (recommended)</li>
</ul>
<h4 id="check-ntp-server-config-with-nmap">Check NTP server config with nmap</h4>
<p>nmap has two built in scripts for checking the NTP server configuration.</p>
<div class="language-c# highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="n">sudo</span><span class="w"> </span><span class="n">nmap</span><span class="w"> </span><span class="o">-</span><span class="n">sU</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="o">--</span><span class="n">script</span><span class="o">=</span><span class="n">ntp</span><span class="o">-</span><span class="n">monlist</span><span class="w">  </span><span class="mf">192.168.10.253</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="n">sudo</span><span class="w"> </span><span class="n">nmap</span><span class="w"> </span><span class="o">-</span><span class="n">sU</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="o">--</span><span class="n">script</span><span class="w"> </span><span class="n">ntp</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span></code></pre></div>
<p>The first one is for verifying that your ntp server doesn't support the "Monitor List" command that led to serious DDoS attacks back in 2014. Here I ran it against the ntp server on the Cisco 3850:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="hll"><span class="n">sudo</span><span class="w"> </span><span class="n">nmap</span><span class="w"> </span><span class="o">-</span><span class="n">sU</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="o">--</span><span class="n">script</span><span class="o">=</span><span class="n">ntp</span><span class="o">-</span><span class="n">monlist</span><span class="w">  </span><span class="mf">192.168.10.253</span>
</span></span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="n">Starting</span><span class="w"> </span><span class="n">Nmap</span><span class="w"> </span><span class="mf">7.94</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="c1">//nmap.org ) at 2024-07-12 13:50 PDT</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="n">Nmap</span><span class="w"> </span><span class="n">scan</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="n">Host</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nf">up</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0052</span><span class="n">s</span><span class="w"> </span><span class="n">latency</span><span class="p">).</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5"></a>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="n">PORT</span><span class="w">    </span><span class="n">STATE</span><span class="w"> </span><span class="n">SERVICE</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="mi">123</span><span class="o">/</span><span class="n">udp</span><span class="w"> </span><span class="n">open</span><span class="w">  </span><span class="n">ntp</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="n">MAC</span><span class="w"> </span><span class="n">Address</span><span class="p">:</span><span class="w"> </span><span class="n">F8</span><span class="p">:</span><span class="mi">7</span><span class="n">B</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">34</span><span class="p">:</span><span class="n">A3</span><span class="p">:</span><span class="n">C6</span><span class="w"> </span><span class="p">(</span><span class="n">Cisco</span><span class="w"> </span><span class="n">Systems</span><span class="p">)</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9"></a>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="n">Nmap</span><span class="w"> </span><span class="n">done</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">up</span><span class="p">)</span><span class="w"> </span><span class="n">scanned</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">5.34</span><span class="w"> </span><span class="n">seconds</span>
</span></code></pre></div></td></tr></table></div>
<p>Notice the only output is that the port is open. If the switch supported "monitor list" it would have returned a list of devices that have requested time.</p>
<p>The second is very useful when you are having time issues. You can run it against the configured time server and see if you get response. I have an alias setup for this script:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="err">#</span><span class="n">Run</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">nmap</span><span class="w"> </span><span class="n">ntp</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="n">script</span><span class="p">.</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ntp</span><span class="w"> </span><span class="n">server</span><span class="p">.</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="hll"><span class="k">alias</span><span class="w"> </span><span class="n">mw</span><span class="o">-</span><span class="n">ntp</span><span class="o">=</span><span class="err">&#39;</span><span class="p">(){</span><span class="n">sudo</span><span class="w"> </span><span class="n">nmap</span><span class="w"> </span><span class="o">-</span><span class="n">sU</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="o">--</span><span class="n">script</span><span class="w"> </span><span class="n">ntp</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="p">}</span><span class="err">&#39;</span>
</span></span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="n">mw</span><span class="o">-</span><span class="n">ntp</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span></code></pre></div></td></tr></table></div>
<p>Here I ran it against my Cisco 3850 after I configured it for time.</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-42-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-42-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-42-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-42-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-42-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-42-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-42-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-42-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-42-10">10</a></span>
<span class="normal"><a href="#__codelineno-42-11">11</a></span>
<span class="normal"><a href="#__codelineno-42-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="hll"><span class="n">sudo</span><span class="w"> </span><span class="n">nmap</span><span class="w"> </span><span class="o">-</span><span class="n">sU</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="o">--</span><span class="n">script</span><span class="w"> </span><span class="n">ntp</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span></span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="n">Starting</span><span class="w"> </span><span class="n">Nmap</span><span class="w"> </span><span class="mf">7.94</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="c1">//nmap.org ) at 2024-07-12 13:50 PDT</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="n">Nmap</span><span class="w"> </span><span class="n">scan</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">3850</span><span class="p">.</span><span class="n">pu</span><span class="p">.</span><span class="n">pri</span><span class="w"> </span><span class="p">(</span><span class="mf">192.168.10.253</span><span class="p">)</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="n">Host</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nf">up</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0032</span><span class="n">s</span><span class="w"> </span><span class="n">latency</span><span class="p">).</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5"></a>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="n">PORT</span><span class="w">    </span><span class="n">STATE</span><span class="w"> </span><span class="n">SERVICE</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="mi">123</span><span class="o">/</span><span class="n">udp</span><span class="w"> </span><span class="n">open</span><span class="w">  </span><span class="n">ntp</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="o">|</span><span class="w"> </span><span class="n">ntp</span><span class="o">-</span><span class="n">info</span><span class="p">:</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9"></a><span class="o">|</span><span class="n">_</span><span class="w">  </span><span class="n">receive</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">stamp</span><span class="p">:</span><span class="w"> </span><span class="mi">2024</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">12</span><span class="n">T20</span><span class="p">:</span><span class="mi">51</span><span class="p">:</span><span class="mi">09</span>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="n">MAC</span><span class="w"> </span><span class="n">Address</span><span class="p">:</span><span class="w"> </span><span class="n">F8</span><span class="p">:</span><span class="mi">7</span><span class="n">B</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">34</span><span class="p">:</span><span class="n">A3</span><span class="p">:</span><span class="n">C6</span><span class="w"> </span><span class="p">(</span><span class="n">Cisco</span><span class="w"> </span><span class="n">Systems</span><span class="p">)</span>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11"></a>
</span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12"></a><span class="n">Nmap</span><span class="w"> </span><span class="n">done</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">up</span><span class="p">)</span><span class="w"> </span><span class="n">scanned</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">10.35</span><span class="w"> </span><span class="n">seconds</span>
</span></code></pre></div></td></tr></table></div>
<p>To verify that the switch is syncing with the ntp server I configured:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">1</a></span>
<span class="normal"><a href="#__codelineno-43-2">2</a></span>
<span class="normal"><a href="#__codelineno-43-3">3</a></span>
<span class="normal"><a href="#__codelineno-43-4">4</a></span>
<span class="normal"><a href="#__codelineno-43-5">5</a></span>
<span class="normal"><a href="#__codelineno-43-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="hll"><span class="n">show</span><span class="w"> </span><span class="n">ntp</span><span class="w"> </span><span class="n">association</span>
</span></span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2"></a>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="w">  </span><span class="n">address</span><span class="w">         </span><span class="k">ref</span><span class="w"> </span><span class="n">clock</span><span class="w">       </span><span class="n">st</span><span class="w">   </span><span class="k">when</span><span class="w">   </span><span class="n">poll</span><span class="w"> </span><span class="n">reach</span><span class="w">  </span><span class="n">delay</span><span class="w">  </span><span class="n">offset</span><span class="w">   </span><span class="n">disp</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="o">+~</span><span class="mf">129.6.15.29</span><span class="w">     </span><span class="p">.</span><span class="n">NIST</span><span class="p">.</span><span class="w">           </span><span class="mi">1</span><span class="w">    </span><span class="mi">369</span><span class="w">   </span><span class="mi">1024</span><span class="w">   </span><span class="mi">377</span><span class="w"> </span><span class="mf">68.998</span><span class="w">  </span><span class="o">-</span><span class="mf">1.408</span><span class="w">  </span><span class="mf">1.066</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5"></a><span class="o">*~</span><span class="mf">192.168.10.222</span><span class="w">  </span><span class="mf">129.6.15.28</span><span class="w">      </span><span class="mi">2</span><span class="w">    </span><span class="mi">109</span><span class="w">   </span><span class="mi">1024</span><span class="w">   </span><span class="mi">377</span><span class="w">  </span><span class="mf">0.989</span><span class="w">   </span><span class="mf">0.619</span><span class="w">  </span><span class="mf">1.037</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sys</span><span class="p">.</span><span class="n">peer</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">selected</span><span class="p">,</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">candidate</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">outlyer</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">falseticker</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">configured</span>
</span></code></pre></div></td></tr></table></div>
<hr />
<h3 id="add-a-domain-name-create-the-key-set-ssh-v2">Add a Domain Name, create the key, set SSH v2</h3>
<p>To enable ssh on the switch you have to create an SSH key pair. I used a modulus of 4096, the maximum. It took 113 seconds to generate!  We will copy our RSA public key to the switch's pubkey-chain in the next section. That public key will be used with our private key to secure the SSH session.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>ip<span class="w"> </span>domain<span class="w"> </span>name<span class="w"> </span>pu.pri
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>crypto<span class="w"> </span>key<span class="w"> </span>generate<span class="w"> </span>rsa<span class="w"> </span>modulus<span class="w"> </span><span class="m">4096</span><span class="w"> </span>exportable<span class="w"> </span>label<span class="w"> </span>RSA-SSH-Key
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>ip<span class="w"> </span>ssh<span class="w"> </span>version<span class="w"> </span><span class="m">2</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>ip<span class="w"> </span>ssh<span class="w"> </span>rsa<span class="w"> </span>keypair-name<span class="w"> </span>RSA-SSH-Key<span class="w"> </span>!associate<span class="w"> </span>keys<span class="w"> </span>to<span class="w"> </span>SSH
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Optional but informational</p>
<p>The "exportable" parameter. This isn't required but I wanted to point that out that you can make the keys exportable. It's not so important in this case but if you have setup GetVPN on a router you absolutely want to export the keys used for the tunnels. If you don't and the router fails you will have to touch EVERY tunnel once you replace the hardware. If you have exported the keys you just reload them on the new hardware and call it a day.</p>
</div>
<hr />
<h4 id="display-the-key">Display the key</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>show<span class="w"> </span>crypto<span class="w"> </span>key<span class="w"> </span>mypubkey<span class="w"> </span>rsa<span class="w"> </span>RSA-SSH-Key
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>%<span class="w"> </span>Key<span class="w"> </span>pair<span class="w"> </span>was<span class="w"> </span>generated<span class="w"> </span>at:<span class="w"> </span><span class="m">14</span>:15:39<span class="w"> </span>PDT<span class="w"> </span>Jul<span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">2024</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>Key<span class="w"> </span>name:<span class="w"> </span>RSA-SSH-Key
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>Key<span class="w"> </span>type:<span class="w"> </span>RSA<span class="w"> </span>KEYS
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="w"> </span>Storage<span class="w"> </span>Device:<span class="w"> </span>not<span class="w"> </span>specified
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="w"> </span>Usage:<span class="w"> </span>General<span class="w"> </span>Purpose<span class="w"> </span>Key
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="w"> </span>Key<span class="w"> </span>is<span class="w"> </span>exportable.<span class="w"> </span>Redundancy<span class="w"> </span>enabled.
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="w"> </span>Key<span class="w"> </span>Data:
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="w">  </span><span class="m">30820222</span><span class="w"> </span>300D0609<span class="w"> </span>2A864886<span class="w"> </span>F70D0101<span class="w"> </span><span class="m">01050003</span><span class="w"> </span>82020F00<span class="w"> </span>3082020A<span class="w"> </span><span class="m">02820201</span>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="w">  </span>009EB39F<span class="w"> </span>14DF98CA<span class="w"> </span>96D74597<span class="w"> </span>E3056C4B<span class="w"> </span>A1DD37B3<span class="w"> </span>71019ADC<span class="w"> </span>D8FD0AD7<span class="w"> </span>81335E21
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="w">  </span>D14CC267<span class="w"> </span>79409A66<span class="w"> </span>FD687EA3<span class="w"> </span>312D65A5<span class="w"> </span>E6D14A22<span class="w"> </span>0EE598BC<span class="w"> </span>0991E5FB<span class="w"> </span><span class="m">91261101</span>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a><span class="w">  </span>B29BDF85<span class="w"> </span><span class="m">05058257</span><span class="w"> </span>8373F9B6<span class="w"> </span>83093E65<span class="w"> </span>ABBCF25C<span class="w"> </span>422965EB<span class="w"> </span>5D84A07D<span class="w"> </span>9E97F8D1
</span><span id="__span-45-13"><a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a><span class="w">  </span>E834BE4B<span class="w"> </span><span class="m">74970547</span><span class="w"> </span>42F5C48C<span class="w"> </span>BFA3A968<span class="w"> </span><span class="m">00569467</span><span class="w"> </span>FA65080B<span class="w"> </span>A0F5F8DC<span class="w"> </span>27AFC43C
</span><span id="__span-45-14"><a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a><span class="w">  </span>B00FBAE6<span class="w"> </span>899C8B5C<span class="w"> </span>3B5F6A6A<span class="w"> </span>9F8EC065<span class="w"> </span>C7A50455<span class="w"> </span>6B5D4345<span class="w"> </span>F3CD9B74<span class="w"> </span>C55D0180
</span><span id="__span-45-15"><a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a><span class="w">  </span>F8870094<span class="w"> </span>55A86FDF<span class="w"> </span>A514C4BA<span class="w"> </span>74FC2E21<span class="w"> </span>B7F3D7F4<span class="w"> </span>1924847C<span class="w"> </span>B420BF2C<span class="w"> </span>4FD14250
</span><span id="__span-45-16"><a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a><span class="w">  </span>C7D40209<span class="w"> </span>914F3FF6<span class="w"> </span>67F2EEEA<span class="w"> </span>F4674BDF<span class="w"> </span>FF692E36<span class="w"> </span>C73BC4DF<span class="w"> </span>597261D2<span class="w"> </span>80B7FFC3
</span><span id="__span-45-17"><a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a><span class="w">  </span>DAF6E93C<span class="w"> </span>C167F196<span class="w"> </span>D1A3B7AE<span class="w"> </span>A4B8EFC3<span class="w"> </span>1FB3DA2C<span class="w"> </span>681C1A9F<span class="w"> </span>601F096E<span class="w"> </span>1E73534F
</span><span id="__span-45-18"><a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a><span class="w">  </span>CCE25F9E<span class="w"> </span>DC753531<span class="w"> </span>98DADDB1<span class="w"> </span>C6C127E9<span class="w"> </span>033EF061<span class="w"> </span>7EB1DD44<span class="w"> </span><span class="m">33186410</span><span class="w"> </span>15D23500
</span><span id="__span-45-19"><a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a><span class="w">  </span>A5569BE0<span class="w"> </span>B1FB1C5F<span class="w"> </span>83C017C2<span class="w"> </span>8C223DD5<span class="w"> </span>C07B3759<span class="w"> </span>816E84B7<span class="w"> </span>D9D6E503<span class="w"> </span>C0A3DDD3
</span><span id="__span-45-20"><a id="__codelineno-45-20" name="__codelineno-45-20" href="#__codelineno-45-20"></a><span class="w">  </span>5B3323AE<span class="w"> </span>485744F9<span class="w"> </span>B131422F<span class="w"> </span>45E8DAED<span class="w"> </span>CF595280<span class="w"> </span>F8ACE13A<span class="w"> </span>E2DFF9BE<span class="w"> </span>A75EA8ED
</span><span id="__span-45-21"><a id="__codelineno-45-21" name="__codelineno-45-21" href="#__codelineno-45-21"></a><span class="w">  </span>78AB6DB3<span class="w"> </span>52FC940C<span class="w"> </span>40D4AC25<span class="w"> </span>CF976D72<span class="w"> </span>47E51F67<span class="w"> </span>6EC05E8F<span class="w"> </span>CB6BEE99<span class="w"> </span>53318C0D
</span><span id="__span-45-22"><a id="__codelineno-45-22" name="__codelineno-45-22" href="#__codelineno-45-22"></a><span class="w">  </span>076880F0<span class="w"> </span>A6AE0FD6<span class="w"> </span>950AE9ED<span class="w"> </span>B17C5CCE<span class="w"> </span>D95209EA<span class="w"> </span>CA74B09B<span class="w"> </span>83B103A9<span class="w"> </span>510357CB
</span><span id="__span-45-23"><a id="__codelineno-45-23" name="__codelineno-45-23" href="#__codelineno-45-23"></a><span class="w">  </span>D5514EA8<span class="w"> </span>DD71BFC4<span class="w"> </span>C57E7FD6<span class="w"> </span>8EFE80E1<span class="w"> </span>FA6CAADD<span class="w"> </span>751EA11B<span class="w"> </span>7D179394<span class="w"> </span>791CE1BC
</span><span id="__span-45-24"><a id="__codelineno-45-24" name="__codelineno-45-24" href="#__codelineno-45-24"></a><span class="w">  </span><span class="m">71660659</span><span class="w"> </span>E59E9FA0<span class="w"> </span>9D0A3A0C<span class="w"> </span>078C569D<span class="w"> </span>FF3CCB4D<span class="w"> </span>4D6191E6<span class="w"> </span>1A627C1E<span class="w"> </span>64BC9649
</span><span id="__span-45-25"><a id="__codelineno-45-25" name="__codelineno-45-25" href="#__codelineno-45-25"></a><span class="w">  </span>C25476B0<span class="w"> </span>610EA0BC<span class="w"> </span>1A124B93<span class="w"> </span>FD6B61BC<span class="w"> </span>F5B09D38<span class="w"> </span>427019FD<span class="w"> </span>D8D7B5D8<span class="w"> </span>AB0AF723
</span><span id="__span-45-26"><a id="__codelineno-45-26" name="__codelineno-45-26" href="#__codelineno-45-26"></a><span class="w">  </span>B5020301<span class="w"> </span><span class="m">0001</span>
</span></code></pre></div>
<hr />
<h4 id="export-the-key">Export the Key</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="o">(</span>config<span class="o">)</span><span class="c1">#crypto key export rsa RSA-SSH-Key pem terminal 3des Sup3rS3crt</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>%<span class="w"> </span>Key<span class="w"> </span>name:<span class="w"> </span>RSA-SSH-Key
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="w">   </span>Usage:<span class="w"> </span>General<span class="w"> </span>Purpose<span class="w"> </span>Key
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">   </span>Key<span class="w"> </span>data:
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>-----BEGIN<span class="w"> </span>PUBLIC<span class="w"> </span>KEY-----
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAnrOfFN+YypbXRZfjBWxL
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>od03s3EBmtzY/QrXgTNeIdFMwmd5QJpm/Wh+ozEtZaXm0UoiDuWYvAmR5fuRJhEB
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>spvfhQUFgleDc/m2gwk+Zau88lxCKWXrXYSgfZ6X+NHoNL5LdJcFR0L1xIy/o6lo
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a>AFaUZ/plCAug9fjcJ6/EPLAPuuaJnItcO19qap+OwGXHpQRVa11DRfPNm3TFXQGA
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>+IcAlFWob9+lFMS6dPwuIbfz1/QZJIR8tCC/LE/RQlDH1AIJkU8/9mfy7ur0Z0vf
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>/2kuNsc7xN9ZcmHSgLf/w9r26TzBZ/GW0aO3rqS478Mfs9osaBwan2AfCW4ec1NP
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>zOJfntx1NTGY2t2xxsEn6QM+8GF+sd1EMxhkEBXSNQClVpvgsfscX4PAF8KMIj3V
</span><span id="__span-46-13"><a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a>wHs3WYFuhLfZ1uUDwKPd01szI65IV0T5sTFCL0Xo2u3PWVKA+KzhOuLf+b6nXqjt
</span><span id="__span-46-14"><a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a>eKtts1L8lAxA1Kwlz5dtckflH2duwF6Py2vumVMxjA0HaIDwpq4P1pUK6e2xfFzO
</span><span id="__span-46-15"><a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a>2VIJ6sp0sJuDsQOpUQNXy9VRTqjdcb/ExX5/1o7+gOH6bKrddR6hG30Xk5R5HOG8
</span><span id="__span-46-16"><a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a>cWYGWeWen6CdCjoMB4xWnf88y01NYZHmGmJ8HmS8lknCVHawYQ6gvBoSS5P9a2G8
</span><span id="__span-46-17"><a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="nv">9bCdOEJwGf3Y17XYqwr3I7UCAwEAAQ</span><span class="o">==</span>
</span><span id="__span-46-18"><a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a>-----END<span class="w"> </span>PUBLIC<span class="w"> </span>KEY-----
</span><span id="__span-46-19"><a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a>-----BEGIN<span class="w"> </span>RSA<span class="w"> </span>PRIVATE<span class="w"> </span>KEY-----
</span><span id="__span-46-20"><a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a>Proc-Type:<span class="w"> </span><span class="m">4</span>,ENCRYPTED
</span><span id="__span-46-21"><a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a>DEK-Info:<span class="w"> </span>DES-EDE3-CBC,067C3CC2D69C7213
</span><span id="__span-46-22"><a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a>
</span><span id="__span-46-23"><a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a>TQ6ytl7+uSw/P4lHdpykCnJux8hAfT3LnC7OPcUE0hRjVPhP0+dPC4AlYhZ9AuPw
</span><span id="__span-46-24"><a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a>1J3tXogtfy+gry5lmRZn6xa6HFvxGywfA5ekj7jfYWiIp9tlC4YqZFFgkdLC5gwJ
</span><span id="__span-46-25"><a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a>nEov0ZzXYPU9gmRBloA5lpFtAPuhoSVXscCoDBnrsdxfLa7yQbd7LjQKp9xCWtF/
</span><span id="__span-46-26"><a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a>CjN392p7TPS4tNE7X8SE4F+dm7DOFdUUalcV3J0CLtIkNs/wxJke+qheBqIgVT3o
</span><span id="__span-46-27"><a id="__codelineno-46-27" name="__codelineno-46-27" href="#__codelineno-46-27"></a>2fhJJNLc09nvsetyI/ezxqAidwBK47ZU7lsmu7O59uRCRwUndedIWMoRZ8Odr68Y
</span><span id="__span-46-28"><a id="__codelineno-46-28" name="__codelineno-46-28" href="#__codelineno-46-28"></a>g5XEhoNiDFGS743kIoiL0Ahx2fCg+crh+Kw1vO3GbLDBfG0jtIKOcO3ua+laC2cB
</span><span id="__span-46-29"><a id="__codelineno-46-29" name="__codelineno-46-29" href="#__codelineno-46-29"></a>Uk5Vj4UEztK9TzD/3MzAOQlBdxDnfMTCWI0qyKuQ5vcPap+mEBk+FVkyftu+aV4n
</span><span id="__span-46-30"><a id="__codelineno-46-30" name="__codelineno-46-30" href="#__codelineno-46-30"></a>Aat8vCdWGxDSKueHgHNggR2JvP371i4ZfbIjtO8nQDGz9DYsYuSNPxl0xjr9Ivd3
</span><span id="__span-46-31"><a id="__codelineno-46-31" name="__codelineno-46-31" href="#__codelineno-46-31"></a>LGfz3srfe6R4NHlu2g2fzp4jLumfB79t6ZO2GPTxGtTs6OYEvdN9zrH2yGw7VYOP
</span><span id="__span-46-32"><a id="__codelineno-46-32" name="__codelineno-46-32" href="#__codelineno-46-32"></a>gMrvZcXpKUADZyDzO+Dt0prsRAsYruM5n5E/ofwr/tgqH8cpnJ6c6rcUzFbZMnp5
</span><span id="__span-46-33"><a id="__codelineno-46-33" name="__codelineno-46-33" href="#__codelineno-46-33"></a>Mxjas3IdYZ5YoS3yPlUfIq/tFfXZgqJmxxNJyjZcQn1Q0H9RFv3jZcjdOlwWvuV2
</span><span id="__span-46-34"><a id="__codelineno-46-34" name="__codelineno-46-34" href="#__codelineno-46-34"></a>Js5tn/ZrzV/lUengx6lkCuLA33vrDQjmM2K4xScbKbuNDW/xjxHoFyUkj0oNretU
</span><span id="__span-46-35"><a id="__codelineno-46-35" name="__codelineno-46-35" href="#__codelineno-46-35"></a>xIvl+O3vVRA0wRVmtRUDBN/2r9eOqGsDX2BynCnksvO8hdn2JF4k7jsClVn5jYcg
</span><span id="__span-46-36"><a id="__codelineno-46-36" name="__codelineno-46-36" href="#__codelineno-46-36"></a>LMVUEKsWiLNkUWJlcw/fkT38gAF5DH8J0yjz0rrhzkJ7dMwDcMc0qA9DGUy8Kwj6
</span><span id="__span-46-37"><a id="__codelineno-46-37" name="__codelineno-46-37" href="#__codelineno-46-37"></a>mUZtr8TR1VlwRB9O3dFvdo9TGzhlugNE0Tm8CaOp8bS5wPiKUQPPw4EbSPBYdo/7
</span><span id="__span-46-38"><a id="__codelineno-46-38" name="__codelineno-46-38" href="#__codelineno-46-38"></a>EBBincyjeNrhiSdVWIfNYhUMZU95wSafgCnHFDRIO9hdOof3550uo72xwk4NTbpm
</span><span id="__span-46-39"><a id="__codelineno-46-39" name="__codelineno-46-39" href="#__codelineno-46-39"></a>qc8Lqygx6DJry6hJio9emLNHKf75jX7zYsEoy6Jvofz4ky5O1Ace1scgEW7bgjoa
</span><span id="__span-46-40"><a id="__codelineno-46-40" name="__codelineno-46-40" href="#__codelineno-46-40"></a>eXq+Xskri3T78gCUMEP4WxWlxE4UbU3GQ7LsW9x9Yz4qd/BkcvSD1VmTcju3t/KC
</span><span id="__span-46-41"><a id="__codelineno-46-41" name="__codelineno-46-41" href="#__codelineno-46-41"></a>8vRx0LwaqhSycedO2M0lGsmlH9OSmdh7Aui5QU3e8Zj6Vb/qUTNS88pyWWi5+zGC
</span><span id="__span-46-42"><a id="__codelineno-46-42" name="__codelineno-46-42" href="#__codelineno-46-42"></a>zVejUEi9zdCQcfdhdvgMphVyq86fagoEFMpu4m+61JuWFqtjLxncSr6hOW8+R9xN
</span><span id="__span-46-43"><a id="__codelineno-46-43" name="__codelineno-46-43" href="#__codelineno-46-43"></a>D6YiAgobH1sXkcgQsS2iRJrqGSFVL09NetEApTBpgZmmoQDd14VRKiqXFd5djHk+
</span><span id="__span-46-44"><a id="__codelineno-46-44" name="__codelineno-46-44" href="#__codelineno-46-44"></a>GjOqn6cFJCQynfehHKJVkoTuSLa1CYDQ46YSdEwisXU+CVDt26OZ4G3GieNAUzQn
</span><span id="__span-46-45"><a id="__codelineno-46-45" name="__codelineno-46-45" href="#__codelineno-46-45"></a>yTzHuONMffnjTJlSiVhbIGnV+3UMQY/lyTKyJpMePidvhC7Aue19TLc6TSZcFNIK
</span><span id="__span-46-46"><a id="__codelineno-46-46" name="__codelineno-46-46" href="#__codelineno-46-46"></a>QFlkONDOEftIq4ceRozKwkijqg+PmJ5iYMUwlunW9b4gqfI2QrSJ0NLZhsV0ItqT
</span><span id="__span-46-47"><a id="__codelineno-46-47" name="__codelineno-46-47" href="#__codelineno-46-47"></a>vbM+UTc8UI4xODdi+5CGhY5zCV+Up6EBkkrnuDCVUrPVPEBkOkkDXjPx/WVNHzQ+
</span><span id="__span-46-48"><a id="__codelineno-46-48" name="__codelineno-46-48" href="#__codelineno-46-48"></a>oaCDxHVz8238yiw9ztqPqaL3G8JAPzNtn2mBgK/HgACsLKeD3xUsI8c27YJB/M1M
</span><span id="__span-46-49"><a id="__codelineno-46-49" name="__codelineno-46-49" href="#__codelineno-46-49"></a>YvL9glbKIhSuoySKxFvMEsqic2uQXDHPJTdKLPbdwnhBDiRo7vHOPXzoth74p/Hw
</span><span id="__span-46-50"><a id="__codelineno-46-50" name="__codelineno-46-50" href="#__codelineno-46-50"></a>xGycOvkSW1xt+vIcqdJ4dXO+sXLzzK2xd8cxrDD6yHcu3axmUNz8hfPwVUfIl8Cy
</span><span id="__span-46-51"><a id="__codelineno-46-51" name="__codelineno-46-51" href="#__codelineno-46-51"></a>Gz0NaDyGByHhVjpigZ4GSyXiyPfIZlgol2yyblktLrPGRgJyWlU5lb6ZYm8E0+K/
</span><span id="__span-46-52"><a id="__codelineno-46-52" name="__codelineno-46-52" href="#__codelineno-46-52"></a>gmz85q7JgfuQm3KihDRpOq3rqaIaabg6rhgxEazk7Z/tqRg7BIZelmSI8BRGwK/t
</span><span id="__span-46-53"><a id="__codelineno-46-53" name="__codelineno-46-53" href="#__codelineno-46-53"></a>N76YVG19DjzLB93we25euV2pXKJ09DN4noILRK3hialvaGwT6LZ3eUqfiJ2vdHAT
</span><span id="__span-46-54"><a id="__codelineno-46-54" name="__codelineno-46-54" href="#__codelineno-46-54"></a>30N8/QYxfh5avrTXKO0siwTBheslDwUq31oJXOvygrCDDusZ3Qf3IKp3AjZr1fv3
</span><span id="__span-46-55"><a id="__codelineno-46-55" name="__codelineno-46-55" href="#__codelineno-46-55"></a>MMV3qhkpDiiLZOcqGbmLjzzONSvyq23DR31vHLhijct5lVjXtHTe1neiChvmgNp7
</span><span id="__span-46-56"><a id="__codelineno-46-56" name="__codelineno-46-56" href="#__codelineno-46-56"></a>ciWj2J+Xu4krw/5ewO8JfQXkb2JQc/WraVKJxmT4oxPq0djGIWjOdz6RNShXIppt
</span><span id="__span-46-57"><a id="__codelineno-46-57" name="__codelineno-46-57" href="#__codelineno-46-57"></a>UmP9TTK9KEQbgj+lI4djj0W++fI5j6GK3CDckJoTyZ2NS2WoQU9aeb1ucxEAsye+
</span><span id="__span-46-58"><a id="__codelineno-46-58" name="__codelineno-46-58" href="#__codelineno-46-58"></a>sudObLhH+af1e1kFBjaMiVoGzBsTOM5tzXIlKuNASB2pJTwWPjkCWXlSDrSE0g+F
</span><span id="__span-46-59"><a id="__codelineno-46-59" name="__codelineno-46-59" href="#__codelineno-46-59"></a>i2bhIa/VA5Xhgb6Pxp2eUjodOHPXyFiP78BpjOtLRrVwp70QHudXbXTqmMceE3DV
</span><span id="__span-46-60"><a id="__codelineno-46-60" name="__codelineno-46-60" href="#__codelineno-46-60"></a>rHD3u2ag5HO66RpE1Jgd0VBt4ImQ9aNOZemXmLC/Z+S5Zz5lrkR5Ar8q6LONYxSL
</span><span id="__span-46-61"><a id="__codelineno-46-61" name="__codelineno-46-61" href="#__codelineno-46-61"></a>3r7VfyLbzHz2itnsoXM0rJ9WY80su3cz1pbYW20kURVkRAfgUTk9si0w2nhZfLnr
</span><span id="__span-46-62"><a id="__codelineno-46-62" name="__codelineno-46-62" href="#__codelineno-46-62"></a>9uQtsgPc10z72BhlLjhMhq2SFK6HUQUUpi4oehOmSWz6xr627GyOV+u5A6SRlGlV
</span><span id="__span-46-63"><a id="__codelineno-46-63" name="__codelineno-46-63" href="#__codelineno-46-63"></a>4Ps4t9Ug8+wjsC+nC/B9DZkB6dEE4iESXbblx4fI/EN8BwGUgBQvh/1PV8uRA+ND
</span><span id="__span-46-64"><a id="__codelineno-46-64" name="__codelineno-46-64" href="#__codelineno-46-64"></a>eiwXU4vY3MR/Iy4G4Rp8JbJggkNPFOmKhStoH3U06Zi+9E2lXhXVNIadGyRCmeXI
</span><span id="__span-46-65"><a id="__codelineno-46-65" name="__codelineno-46-65" href="#__codelineno-46-65"></a>p77a8fCXIofO20R0lHyOW4Za0eJ8+xDcE26wRAOvXa80IIPu5rfNszKz4cTep4/q
</span><span id="__span-46-66"><a id="__codelineno-46-66" name="__codelineno-46-66" href="#__codelineno-46-66"></a>aShY1vQmBlfgge0D5G1cDG05kN8gJlHY5Q8z8KdMXJtRNG+ae2yoWSHb1Ca0Cnul
</span><span id="__span-46-67"><a id="__codelineno-46-67" name="__codelineno-46-67" href="#__codelineno-46-67"></a>j4oyrxUhaG4UtR0W7czGIb8oMj8vfhd6PxYsZIjpnQHBSx3HvCeue7ef1+Zf/P1H
</span><span id="__span-46-68"><a id="__codelineno-46-68" name="__codelineno-46-68" href="#__codelineno-46-68"></a>X4/JfLE14Qe85/IKYZD9wXEth4zFbGpUsDE3YQe2YQLsOUgZZeQhvgTHOYDCxwTA
</span><span id="__span-46-69"><a id="__codelineno-46-69" name="__codelineno-46-69" href="#__codelineno-46-69"></a>9abHL6YkXTWrcTc2dXMsrgIVCXyGJYmdVLX761y3sCiSMwoYSFC+inuPIPjZVh5y
</span><span id="__span-46-70"><a id="__codelineno-46-70" name="__codelineno-46-70" href="#__codelineno-46-70"></a>bUtxlWRFyuRx0t0eFzb7rMHf9y0KvCfr3RTRnVNa/1l0dd3UJ+ok7RCGHyynYwZr
</span><span id="__span-46-71"><a id="__codelineno-46-71" name="__codelineno-46-71" href="#__codelineno-46-71"></a>n6FpY2CsvK9R5cDrjLWMjjHCC4Y+adD3pS1g4CQWH3saQH1PmbSQ9ul/K8fYYe2v
</span><span id="__span-46-72"><a id="__codelineno-46-72" name="__codelineno-46-72" href="#__codelineno-46-72"></a>-----END<span class="w"> </span>RSA<span class="w"> </span>PRIVATE<span class="w"> </span>KEY-----
</span></code></pre></div>
<p>Copy the key stating at <code>BEGIN PUBLIC KEY</code> until <code>END PRIVATE KEY</code>, save it to a file and store it in a secure place.</p>
<hr />
<h3 id="configure-aaa-authentication">Configure AAA authentication</h3>
<p>The aaa new-model command causes the local username and password on the router to be used in the absence of other AAA statements. Once you enter "aaa new-model" you will not be able to enter "login local" on vty line configuration. If you had login local configured it will be removed.</p>
<p>When you create the username be sure to include a secret. If you don't, anyone will be able to login with just the username. As always, create a strong secret and use a password manager to store it.</p>
<div class="language-c# highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="err">#</span><span class="n">username</span><span class="w"> </span><span class="n">mhubbard</span><span class="w"> </span><span class="n">privilege</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="n">algorithm</span><span class="o">-</span><span class="n">type</span><span class="w"> </span><span class="n">scrypt</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="o">^</span><span class="mi">8</span><span class="p">(</span><span class="n">nn</span><span class="o">-!</span><span class="err">#</span><span class="n">who</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="err">#</span><span class="n">aaa</span><span class="w"> </span><span class="k">new</span><span class="o">-</span><span class="n">model</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="err">#</span><span class="n">aaa</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">local</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="err">#</span><span class="n">aaa</span><span class="w"> </span><span class="n">authorization</span><span class="w"> </span><span class="n">exec</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">local</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="p">(</span><span class="n">Authentication</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">SSH</span><span class="p">)</span>
</span></code></pre></div>
<hr />
<h4 id="configure-the-vty-lines">Configure the vty lines</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="o">(</span>config<span class="o">)</span><span class="c1">#line vty 0 4</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="o">(</span>config-line<span class="o">)</span><span class="c1">#transport input ssh</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="o">(</span>config-line<span class="o">)</span><span class="c1">#logging sync (prevents console messages from interfering with your inputs)</span>
</span></code></pre></div>
<hr />
<h3 id="add-your-public-key-to-the-device">Add your PUBLIC key to the device</h3>
<p>Open the public key file you created earlier in a text editor (not a word processor). Copy the text between the comments. If you generated a 2048/4096 bit key you will need to break it into smaller pieces or you may see "%SSH: Failed to decode the Key Value" when you exit. I break it into 100 characters per line.</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1">1</a></span>
<span class="normal"><a href="#__codelineno-49-2">2</a></span>
<span class="normal"><a href="#__codelineno-49-3">3</a></span>
<span class="normal"><a href="#__codelineno-49-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="hll">gnome-text-editor id_rsa.pub
</span></span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2"></a>break the lines into lengths of 100 characters
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3"></a>copy the text after ssh-rsa till the comment begins.
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4"></a>close the key file but do not save it
</span></code></pre></div></td></tr></table></div>
<p><strong>Paste the key into the device</strong></p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-50-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-50-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-50-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-50-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-50-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-50-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-50-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-50-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-50-10">10</a></span>
<span class="normal"><a href="#__codelineno-50-11">11</a></span>
<span class="normal"><a href="#__codelineno-50-12">12</a></span>
<span class="normal"><a href="#__codelineno-50-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="hll"><span class="o">(</span>config<span class="o">)</span><span class="c1">#ip ssh pubkey-chain</span>
</span></span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="hll"><span class="o">(</span>conf-ssh-pubkey<span class="o">)</span><span class="c1">#username mhubbard</span>
</span></span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="hll"><span class="o">(</span>conf-ssh-pubkey-user<span class="o">)</span><span class="c1">#key-string</span>
</span></span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="o">(</span>conf-ssh-pubkey-data<span class="o">)</span><span class="c1">#AAAAB3NzaC1yc2EAAAADAQABAAACAQDhgWxFej4ybQHAEtMHo9gYL6zU5t7HeQE0vy3IFONK9JFsM0HSoxZPK18nh26</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="o">(</span>conf-ssh-pubkey-data<span class="o">)</span><span class="c1">#58l+i8FonksmnhhjX+VOn6dkPwdedEHAOZeSPNGbPdCwQeMZhRZSgE+NCxCesgp3wOOlYLvIaBYFnpF3TbXG8SGSjPmXvupvl75</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="o">(</span>conf-ssh-pubkey-data<span class="o">)</span><span class="c1">#6Obax6cxi/o5MvnRi0aA4kmQYkoDHm/3SDc/fkeEJ3Cqljsc4kTJOGOLiFvfik+wDFILt630J/2cKV/iGhk98cYxVUsPVtlV254</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="o">(</span>conf-ssh-pubkey-data<span class="o">)</span><span class="c1">#ayu8x1aUxTzIhdj11T7Yw20H/+2NHbGbwLRyNn2xMPgFz6UmqnPMreNBWspR0xGcmCjqIxsI73UNZjA0YMm7ob1wTDPHRbJU7Yn</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8"></a><span class="o">(</span>conf-ssh-pubkey-data<span class="o">)</span><span class="c1">#j1Oyiqo4fISNtc6nI+MY0t95JEKBcpt653Bq//h/319pzI2h0FAh4UL2XgV581TWMZWtAe2gFQmh5wLyUhxkPyZpwdZomxS58An</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9"></a><span class="o">(</span>conf-ssh-pubkey-data<span class="o">)</span><span class="c1">#ZbxQtO8YaSJTGbWzd06lPaWYKYQ+6CMmfGTdPMPS3LsG17rfWUoE4T9ot8uWvD/+ZfteGId+gftva8kxl0rX3VW4lmOG5Vf0FNG</span>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10"></a><span class="o">(</span>conf-ssh-pubkey-data<span class="o">)</span><span class="c1">#HoVRNyQ00xj/rRRo6zgfzJQe7rpjp1nEWmftc2ZouTHtidGCtJ2fmfFS09A+kUHdY51gS1FeJLCySSz+2HIkZpaOVOqlhqz//xa</span>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11"></a><span class="o">(</span>conf-ssh-pubkey-data<span class="o">)</span><span class="c1">#g9QIk4RSWAfpKt+TqB5R+iBCpWYoQ==</span>
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12"></a><span class="hll"><span class="o">(</span>conf-ssh-pubkey-data<span class="o">)</span><span class="c1">#exit</span>
</span></span><span id="__span-50-13"><a id="__codelineno-50-13" name="__codelineno-50-13"></a><span class="hll"><span class="o">(</span>conf-ssh-pubkey-user<span class="o">)</span><span class="c1">#end</span>
</span></span></code></pre></div></td></tr></table></div>
<p>Make sure to press <code>enter</code> after <code>key-string</code> before you paste the key in. You have to use <code>exit</code> to end the key-string input. Then use <code>end</code> to exit configuration mode.</p>
<hr />
<h3 id="verify-the-ssh-configuration">Verify the ssh configuration</h3>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-51-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-51-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-51-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-51-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-51-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-51-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-51-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-51-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-51-10">10</a></span>
<span class="normal"><a href="#__codelineno-51-11">11</a></span>
<span class="normal"><a href="#__codelineno-51-12">12</a></span>
<span class="normal"><a href="#__codelineno-51-13">13</a></span>
<span class="normal"><a href="#__codelineno-51-14">14</a></span>
<span class="normal"><a href="#__codelineno-51-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="hll">show<span class="w"> </span>run<span class="w"> </span><span class="p">|</span><span class="w"> </span>sec<span class="w"> </span>ssh
</span></span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2"></a>ip<span class="w"> </span>ssh<span class="w"> </span>source-interface<span class="w"> </span>Vlan10
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3"></a>ip<span class="w"> </span>ssh<span class="w"> </span>rsa<span class="w"> </span>keypair-name<span class="w"> </span>RSA-SSH-Key
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4"></a>ip<span class="w"> </span>ssh<span class="w"> </span>logging<span class="w"> </span>events
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5"></a>ip<span class="w"> </span>ssh<span class="w"> </span>version<span class="w"> </span><span class="m">2</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6"></a>ip<span class="w"> </span>ssh<span class="w"> </span>dh<span class="w"> </span>min<span class="w"> </span>size<span class="w"> </span><span class="m">4096</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7"></a>ip<span class="w"> </span>ssh<span class="w"> </span>pubkey-chain
</span><span id="__span-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="w">  </span>username<span class="w"> </span>mhubbard
</span><span id="__span-51-9"><a id="__codelineno-51-9" name="__codelineno-51-9"></a><span class="w">   </span>key-hash<span class="w"> </span>ssh-rsa<span class="w"> </span>5D24EA1D261C1836E437F4E67E2CEBEB
</span><span id="__span-51-10"><a id="__codelineno-51-10" name="__codelineno-51-10"></a><span class="w">   </span>key-hash<span class="w"> </span>ssh-rsa<span class="w"> </span>CCA79DBB37A7EA060C781DA2767509C0
</span><span id="__span-51-11"><a id="__codelineno-51-11" name="__codelineno-51-11"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>mac<span class="w"> </span>hmac-sha2-256<span class="w"> </span>hmac-sha2-512
</span><span id="__span-51-12"><a id="__codelineno-51-12" name="__codelineno-51-12"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>encryption<span class="w"> </span>aes256-ctr<span class="w"> </span>aes192-ctr<span class="w"> </span>aes128-ctr
</span><span id="__span-51-13"><a id="__codelineno-51-13" name="__codelineno-51-13"></a>ip<span class="w"> </span>ssh<span class="w"> </span>server<span class="w"> </span>algorithm<span class="w"> </span>kex<span class="w"> </span>diffie-hellman-group14-sha1
</span><span id="__span-51-14"><a id="__codelineno-51-14" name="__codelineno-51-14"></a><span class="w"> </span>transport<span class="w"> </span>input<span class="w"> </span>ssh
</span><span id="__span-51-15"><a id="__codelineno-51-15" name="__codelineno-51-15"></a><span class="w"> </span>transport<span class="w"> </span>output<span class="w"> </span>ssh
</span></code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Use the hash for setting up the rest of the switches</p>
<p>You can use the HASH instead of the key for the next devices you setup. Instead of using "Key-string" in the ip ssh pubkey-chain statement use <code>key-hash ssh-rsa 5D24EA1D261C1836E437F4E67E2CEBEB</code>.</p>
</div>
<p>If you need to remove a key use the <code>no</code> keyword with the key-hash keyword. I needed to remove the old 2096 bit RSA key after I changed the <code>ip ssh dh min key size</code> to 4096.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1">1</a></span>
<span class="normal"><a href="#__codelineno-52-2">2</a></span>
<span class="normal"><a href="#__codelineno-52-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1"></a>ip<span class="w"> </span>ssh<span class="w"> </span>pubkey-chain
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2"></a>username<span class="w"> </span>mhubbard
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="hll">no<span class="w"> </span>key-hash<span class="w"> </span>ssh-rsa<span class="w"> </span>4682578A0267D583568FCDCD1229B62C
</span></span></code></pre></div></td></tr></table></div>
<hr />
<h3 id="login-using-the-ssh-keys">Login using the SSH Keys</h3>
<p>Continuing in the theme of network devices having legacy crypto, you will have to add <code>PubkeyAcceptedKeyTypes +ssh-rsa</code> to the <code>~/.ssh/config</code> file for the host.</p>
<p><code>ssh -i ~/.ssh/id_rsa.pub 192.168.10.253</code></p>
<p>Remember that you can add -vvvv to the command to get verbose debugging. I had to do that because the key was failing. In the debugs I saw <code>send_pubkey_test: no mutual signature algorithm</code> which reminded me to add  <code>PubkeyAcceptedKeyTypes +ssh-rsa</code> to the config file for this host.</p>
<p>You can also use <code>ssh 192.168.10.253</code> and the SSH client will try all the keys. I prefer to explicitly call the key, but it doesn't matter if you don't.</p>
<p>Here is the complete configuration and debug to log into the Cisco 3850 using the id_rsa key:</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-53-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-53-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-53-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-53-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-53-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-53-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-53-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-53-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-53-10">10</a></span>
<span class="normal"><a href="#__codelineno-53-11">11</a></span>
<span class="normal"><a href="#__codelineno-53-12">12</a></span>
<span class="normal"><a href="#__codelineno-53-13">13</a></span>
<span class="normal"><a href="#__codelineno-53-14">14</a></span>
<span class="normal"><a href="#__codelineno-53-15">15</a></span>
<span class="normal"><a href="#__codelineno-53-16">16</a></span>
<span class="normal"><a href="#__codelineno-53-17">17</a></span>
<span class="normal"><a href="#__codelineno-53-18">18</a></span>
<span class="normal"><a href="#__codelineno-53-19">19</a></span>
<span class="normal"><a href="#__codelineno-53-20">20</a></span>
<span class="normal"><a href="#__codelineno-53-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="hll"><span class="n">gnome</span><span class="o">-</span><span class="n">text</span><span class="o">-</span><span class="n">editor</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>
</span></span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="n">Host</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="w">        </span><span class="n">Protocol</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="w">        </span><span class="n">HostKeyAlgorithms</span><span class="w"> </span><span class="o">+</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span><span class="p">,</span><span class="n">ssh</span><span class="o">-</span><span class="n">dss</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="w">        </span><span class="n">MACs</span><span class="w"> </span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">512</span><span class="p">,</span><span class="n">hmac</span><span class="o">-</span><span class="n">sha2</span><span class="o">-</span><span class="mi">256</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="w">        </span><span class="n">KexAlgorithms</span><span class="w"> </span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="k">group</span><span class="o">-</span><span class="n">exchange</span><span class="o">-</span><span class="n">sha256</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group14</span><span class="o">-</span><span class="n">sha1</span><span class="p">,</span><span class="n">diffie</span><span class="o">-</span><span class="n">hellman</span><span class="o">-</span><span class="n">group1</span><span class="o">-</span><span class="n">sha1</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7"></a><span class="w">        </span><span class="n">PubkeyAcceptedKeyTypes</span><span class="w"> </span><span class="o">+</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8"></a><span class="w">        </span><span class="n">IdentityFile</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9"></a>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10"></a><span class="hll"><span class="n">ssh</span><span class="w"> </span><span class="o">-</span><span class="n">vvvv</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span></span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11"></a><span class="n">Next</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">method</span><span class="p">:</span><span class="w"> </span><span class="n">publickey</span>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12"></a><span class="n">Offering</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">mhubbard</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">.</span><span class="n">pub</span><span class="w"> </span><span class="n">RSA</span><span class="w"> </span><span class="n">SHA256</span><span class="p">:</span><span class="mi">0</span><span class="n">WF9uxNBCPeeHzMAGsYJy2wrsOXNrhPxJ</span><span class="o">+</span><span class="mi">3l</span><span class="n">p2PxI</span><span class="o">+</span><span class="n">E</span><span class="w"> </span><span class="k">explicit</span><span class="w"> </span><span class="n">agent</span>
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13"></a><span class="n">send</span><span class="w"> </span><span class="n">packet</span><span class="p">:</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="mi">50</span>
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14"></a><span class="n">we</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">publickey</span><span class="w"> </span><span class="n">packet</span><span class="p">,</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">reply</span>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15"></a><span class="n">receive</span><span class="w"> </span><span class="n">packet</span><span class="p">:</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="mi">60</span>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16"></a><span class="hll"><span class="n">Server</span><span class="w"> </span><span class="n">accepts</span><span class="w"> </span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">mhubbard</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">.</span><span class="n">pub</span><span class="w"> </span><span class="n">RSA</span><span class="w"> </span><span class="n">SHA256</span><span class="p">:</span><span class="mi">0</span><span class="n">WF9uxNBCPeeHzMAGsYJy2wrsOXNrhPxJ</span><span class="o">+</span><span class="mi">3l</span><span class="n">p2PxI</span><span class="o">+</span><span class="n">E</span><span class="w"> </span><span class="k">explicit</span><span class="w"> </span><span class="n">agent</span>
</span></span><span id="__span-53-17"><a id="__codelineno-53-17" name="__codelineno-53-17"></a><span class="n">sign_and_send_pubkey</span><span class="p">:</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="nn">publickey</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">RSA</span><span class="w"> </span><span class="n">SHA256</span><span class="p">:</span><span class="mi">0</span><span class="n">WF9uxNBCPeeHzMAGsYJy2wrsOXNrhPxJ</span><span class="o">+</span><span class="mi">3l</span><span class="n">p2PxI</span><span class="o">+</span><span class="n">E</span>
</span><span id="__span-53-18"><a id="__codelineno-53-18" name="__codelineno-53-18"></a><span class="n">sign_and_send_pubkey</span><span class="p">:</span><span class="w"> </span><span class="n">signing</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="nn">ssh</span><span class="o">-</span><span class="n">rsa</span><span class="w"> </span><span class="n">SHA256</span><span class="p">:</span><span class="mi">0</span><span class="n">WF9uxNBCPeeHzMAGsYJy2wrsOXNrhPxJ</span><span class="o">+</span><span class="mi">3l</span><span class="n">p2PxI</span><span class="o">+</span><span class="n">E</span>
</span><span id="__span-53-19"><a id="__codelineno-53-19" name="__codelineno-53-19"></a><span class="n">send</span><span class="w"> </span><span class="n">packet</span><span class="p">:</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="mi">50</span>
</span><span id="__span-53-20"><a id="__codelineno-53-20" name="__codelineno-53-20"></a><span class="n">receive</span><span class="w"> </span><span class="n">packet</span><span class="p">:</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="mi">52</span>
</span><span id="__span-53-21"><a id="__codelineno-53-21" name="__codelineno-53-21"></a><span class="n">Authenticated</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">192.168.10.253</span><span class="w"> </span><span class="p">([</span><span class="mf">192.168.10.253</span><span class="p">]:</span><span class="mi">22</span><span class="p">)</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="err">&quot;</span><span class="nn">publickey</span><span class="s">&quot;.</span>
</span></code></pre></div></td></tr></table></div>
<p>Once you have entered the passphrase it will be added to the ssh agent and you won't be prompted again until you close the terminal and open a new one. If you want to remove the key from the agent without closing the terminal use:</p>
<p><code>ssh-add -D ~/.ssh/id_rsa</code></p>
<p>If you want to change the password on the key use:</p>
<p><code>ssh-keygen -p -f ~/.ssh/id_rsa</code></p>
<hr />
<h3 id="using-keys-with-putty">Using keys with Putty</h3>
<p>If you want to connect from a Windows computer with Putty I have a blog with a tutorial on how to create keys and connect using putty/puttygen - <a href="https://mwhubbard.blogspot.com/2015/07/authenticating-to-cisco-devices-using_92.html">Authenticating to Cisco devices using SSH and your RSA Public Key</a>.</p>
<h4 id="can-users-still-login-who-dont-have-keys-configured">Can users still login who don't have keys configured?</h4>
<p>Yes, the key-chain must be configured for each user.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1">1</a></span>
<span class="normal"><a href="#__codelineno-54-2">2</a></span>
<span class="normal"><a href="#__codelineno-54-3">3</a></span>
<span class="normal"><a href="#__codelineno-54-4">4</a></span>
<span class="normal"><a href="#__codelineno-54-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="hll">sh<span class="w"> </span>run<span class="w"> </span><span class="p">|</span><span class="w"> </span>sec<span class="w"> </span>pubkey
</span></span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2"></a>ip<span class="w"> </span>ssh<span class="w"> </span>pubkey-chain
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="w">  </span>username<span class="w"> </span>mhubbard
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4"></a><span class="w">   </span>key-hash<span class="w"> </span>ssh-rsa<span class="w"> </span>5D24EA1D261C1836E437F4E67E2CEBEB
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5"></a><span class="w">   </span>key-hash<span class="w"> </span>ssh-rsa<span class="w"> </span>CCA79DBB37A7EA060C781DA2767509C0
</span></code></pre></div></td></tr></table></div>
<p>Here are the users I have configured on this switch:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1">1</a></span>
<span class="normal"><a href="#__codelineno-55-2">2</a></span>
<span class="normal"><a href="#__codelineno-55-3">3</a></span>
<span class="normal"><a href="#__codelineno-55-4">4</a></span>
<span class="normal"><a href="#__codelineno-55-5">5</a></span>
<span class="normal"><a href="#__codelineno-55-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="hll">show<span class="w"> </span>run<span class="w"> </span><span class="p">|</span><span class="w"> </span>sec<span class="w"> </span>user
</span></span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2"></a>username<span class="w"> </span>thubbard<span class="w"> </span>privilege<span class="w"> </span><span class="m">15</span><span class="w"> </span>secret<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="nv">$9$95</span>tTO1OC4HNmIE<span class="nv">$bt1Z4</span>.7aw/EBUQHl3NmLUNMacw4hRPI.742Kbs2r4jA
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3"></a>username<span class="w"> </span>mhubbard<span class="w"> </span>privilege<span class="w"> </span><span class="m">15</span><span class="w"> </span>secret<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="nv">$9$y4j0lAgHcDtV3</span>.<span class="nv">$sH6LI79G3qmdpVdICokss8dzjGUC3u7we4</span>.wcPnwNQ.
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4"></a><span class="w">  </span>username<span class="w"> </span>mhubbard
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5"></a><span class="w">   </span>key-hash<span class="w"> </span>ssh-rsa<span class="w"> </span>5D24EA1D261C1836E437F4E67E2CEBEB
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6"></a><span class="w">   </span>key-hash<span class="w"> </span>ssh-rsa<span class="w"> </span>CCA79DBB37A7EA060C781DA2767509C0
</span></code></pre></div></td></tr></table></div>
<p>You can see that <code>thubbard</code> has to use a password but <code>mhubbard</code> can use a password or SSH keys. User <code>mhubbard</code> has two keys listed because I generated keys on my Ubuntu machine and my M1 MacBook Air. I could have copied my private key from Ubuntu to the MacBook but I wanted to show two keys.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>IOS only allows two keys in the key-chain.</p>
</div>
<p>You can see in the ouput the user's secret is hashed as type 9. In Cisco speak that is scrypt. Scrypt is a <code>memory</code> hard hash so having hardware GPUs doesn't speed up reversing the hash. To create a users with scrypt:</p>
<p><code>username thubbard privilege 15 algorithm-type scrypt secret Sup3rS3cr3t</code></p>
<hr />
<h2 id="using-the-keys-with-a-junos-switch">Using the keys with a JunOS switch</h2>
<p>Setting up the JunOS switch is similar to setting up the Cisco switch.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-56-1">1</a></span>
<span class="normal"><a href="#__codelineno-56-2">2</a></span>
<span class="normal"><a href="#__codelineno-56-3">3</a></span>
<span class="normal"><a href="#__codelineno-56-4">4</a></span>
<span class="normal"><a href="#__codelineno-56-5">5</a></span>
<span class="normal"><a href="#__codelineno-56-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="hll">ssh<span class="w"> </span>-i<span class="w"> </span>~/.ssh/juniper_ed25519_key<span class="w"> </span>root@192.168.10.162
</span></span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2"></a>Authorized<span class="w"> </span>access<span class="w"> </span>only!<span class="w"> </span>Violators<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>violated!
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3"></a>Enter<span class="w"> </span>passphrase<span class="w"> </span><span class="k">for</span><span class="w"> </span>key<span class="w"> </span><span class="s1">&#39;/home/mhubbard/.ssh/juniper_ed25519_key&#39;</span>:
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4"></a>Last<span class="w"> </span>login:<span class="w"> </span>Fri<span class="w"> </span>Jul<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">14</span>:01:28<span class="w"> </span><span class="m">2024</span><span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.10.143
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5"></a>---<span class="w"> </span>JUNOS<span class="w"> </span><span class="m">18</span>.2R1.9<span class="w"> </span>Kernel<span class="w"> </span><span class="m">64</span>-bit<span class="w">  </span>JNPR-11.0-20180614.6c3f819_buil
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6"></a>root@TEST-Router:~<span class="w"> </span><span class="c1">#</span>
</span></code></pre></div></td></tr></table></div>
<hr />
<h2 id="using-the-keys-with-an-aruba-cx-switch">Using the keys with an Aruba CX switch</h2>
<p>The Aruba CX switches are easy to set up for SSH and public key access. They support strong cipher suites and it's easy to reset the cipher suite if you remove some and your client can't connect. I personally think they set the standard for how the SSH server implementation should be done on network devices.</p>
<h3 id="initial-setup">Initial setup</h3>
<p>In the Cisco section above we configured NTP, and the user accounts before setting up SSH. You need to do the same for the Aruba CX.</p>
<p>You need to decide which VRF to enable the server on. In this example, we will use the mgmt vrf. Use the following command to enable the ssh server:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>ssh<span class="w"> </span>server<span class="w"> </span>vrf<span class="w"> </span>mgmt
</span></code></pre></div>
<p>When an SSH server is enabled on a VRF for the first time, host-keys are generated. Keeping with the "Aruba sets the standard for ssh" theme, the default RSA key is 4096 bits!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the host-key of the given type exists, a warning message is displayed with a request to overwrite the previous host-key with the new key.</p>
<p>That isn't a problem as far as setting up ssh, but keep in mind that if you have connected before, the client will complain that the key has changed.</p>
</div>
<p>If that happens you will see the following message:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-58-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-58-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-58-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-58-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-58-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-58-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-58-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-58-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-58-10">10</a></span>
<span class="normal"><a href="#__codelineno-58-11">11</a></span>
<span class="normal"><a href="#__codelineno-58-12">12</a></span>
<span class="normal"><a href="#__codelineno-58-13">13</a></span>
<span class="normal"><a href="#__codelineno-58-14">14</a></span>
<span class="normal"><a href="#__codelineno-58-15">15</a></span>
<span class="normal"><a href="#__codelineno-58-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="hll">ssh<span class="w"> </span><span class="m">192</span>.168.10.233
</span></span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2"></a>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3"></a>@<span class="w">    </span>WARNING:<span class="w"> </span>REMOTE<span class="w"> </span>HOST<span class="w"> </span>IDENTIFICATION<span class="w"> </span>HAS<span class="w"> </span>CHANGED!<span class="w">     </span>@
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4"></a>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5"></a>IT<span class="w"> </span>IS<span class="w"> </span>POSSIBLE<span class="w"> </span>THAT<span class="w"> </span>SOMEONE<span class="w"> </span>IS<span class="w"> </span>DOING<span class="w"> </span>SOMETHING<span class="w"> </span>NASTY!
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6"></a>Someone<span class="w"> </span>could<span class="w"> </span>be<span class="w"> </span>eavesdropping<span class="w"> </span>on<span class="w"> </span>you<span class="w"> </span>right<span class="w"> </span>now<span class="w"> </span><span class="o">(</span>man-in-the-middle<span class="w"> </span>attack<span class="o">)</span>!
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7"></a>It<span class="w"> </span>is<span class="w"> </span>also<span class="w"> </span>possible<span class="w"> </span>that<span class="w"> </span>a<span class="w"> </span>host<span class="w"> </span>key<span class="w"> </span>has<span class="w"> </span>just<span class="w"> </span>been<span class="w"> </span>changed.
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8"></a>The<span class="w"> </span>fingerprint<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>ED25519<span class="w"> </span>key<span class="w"> </span>sent<span class="w"> </span>by<span class="w"> </span>the<span class="w"> </span>remote<span class="w"> </span>host<span class="w"> </span>is
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9"></a>SHA256:fImGI4bZxLw7eRKZ1Sz5PJPLVGy...J3W4.
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10"></a>Please<span class="w"> </span>contact<span class="w"> </span>your<span class="w"> </span>system<span class="w"> </span>administrator.
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11"></a>Add<span class="w"> </span>correct<span class="w"> </span>host<span class="w"> </span>key<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/mhubbard/.ssh/known_hosts<span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span>rid<span class="w"> </span>of<span class="w"> </span>this<span class="w"> </span>message.
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12"></a>Offending<span class="w"> </span>RSA<span class="w"> </span>key<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/mhubbard/.ssh/known_hosts:200
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13"></a><span class="w">  </span>remove<span class="w"> </span>with:
</span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14"></a><span class="w">  </span>ssh-keygen<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/home/mhubbard/.ssh/known_hosts&quot;</span><span class="w"> </span>-R<span class="w"> </span><span class="s2">&quot;192.168.10.233&quot;</span>
</span><span id="__span-58-15"><a id="__codelineno-58-15" name="__codelineno-58-15"></a>Host<span class="w"> </span>key<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">192</span>.168.10.233<span class="w"> </span>has<span class="w"> </span>changed<span class="w"> </span>and<span class="w"> </span>you<span class="w"> </span>have<span class="w"> </span>requested<span class="w"> </span>strict<span class="w"> </span>checking.
</span><span id="__span-58-16"><a id="__codelineno-58-16" name="__codelineno-58-16"></a>Host<span class="w"> </span>key<span class="w"> </span>verification<span class="w"> </span>failed.
</span></code></pre></div></td></tr></table></div>
<p>You can copy/paste the following into the terminal to remove the old host:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-59-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1"></a>ssh-keygen<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/home/mhubbard/.ssh/known_hosts&quot;</span><span class="w"> </span>-R<span class="w"> </span><span class="s2">&quot;192.168.10.233&quot;</span>
</span></code></pre></div></td></tr></table></div>
<p>On macOS you don't get the command to delete the old key but it does give you the line number in the <code>~/.ssh/config</code> file that you need to delete.</p>
<h3 id="viewing-the-host-keys">Viewing the host-keys</h3>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-60-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-60-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-60-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-60-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-60-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-60-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-60-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-60-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-60-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-60-10">10</a></span>
<span class="normal"><a href="#__codelineno-60-11">11</a></span>
<span class="normal"><a href="#__codelineno-60-12">12</a></span>
<span class="normal"><a href="#__codelineno-60-13">13</a></span>
<span class="normal"><a href="#__codelineno-60-14">14</a></span>
<span class="normal"><a href="#__codelineno-60-15">15</a></span>
<span class="normal"><a href="#__codelineno-60-16">16</a></span>
<span class="normal"><a href="#__codelineno-60-17">17</a></span>
<span class="normal"><a href="#__codelineno-60-18">18</a></span>
<span class="normal"><a href="#__codelineno-60-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1"></a><span class="hll">show<span class="w"> </span>ssh<span class="w"> </span>host-key<span class="w"> </span>?
</span></span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2"></a><span class="w">  </span>ecdsa<span class="w">    </span>Show<span class="w"> </span>SSH<span class="w"> </span>server<span class="w"> </span>ECDSA<span class="w"> </span>host-key.
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3"></a><span class="w">  </span>ed25519<span class="w">  </span>Show<span class="w"> </span>SSH<span class="w"> </span>server<span class="w"> </span>ED25519<span class="w"> </span>host-key.
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4"></a><span class="w">  </span>rsa<span class="w">      </span>Show<span class="w"> </span>SSH<span class="w"> </span>server<span class="w"> </span>RSA<span class="w"> </span>host-key.
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5"></a>
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6"></a>To<span class="w"> </span>Show<span class="w"> </span>all<span class="w"> </span>keys
</span><span id="__span-60-7"><a id="__codelineno-60-7" name="__codelineno-60-7"></a>
</span><span id="__span-60-8"><a id="__codelineno-60-8" name="__codelineno-60-8"></a><span class="hll">show<span class="w"> </span>ssh<span class="w"> </span>host-key
</span></span><span id="__span-60-9"><a id="__codelineno-60-9" name="__codelineno-60-9"></a>
</span><span id="__span-60-10"><a id="__codelineno-60-10" name="__codelineno-60-10"></a>Key<span class="w"> </span>Type<span class="w"> </span>:<span class="w"> </span>ECDSA<span class="w">     </span>Curve<span class="w"> </span>:<span class="w"> </span>ecdsa-sha2-nistp256
</span><span id="__span-60-11"><a id="__codelineno-60-11" name="__codelineno-60-11"></a>ecdsa-sha2-nistp256<span class="w"> </span>AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBEcAjbbHW7bUnubX5SFZJ31Tkgs5dDSXMxyrXFFVC8P+rm48GQ75WIvxp4mPFFsmkJoi5OhuAA+rTncTXl3bAYM<span class="o">=</span><span class="w"> </span>root@switch
</span><span id="__span-60-12"><a id="__codelineno-60-12" name="__codelineno-60-12"></a>
</span><span id="__span-60-13"><a id="__codelineno-60-13" name="__codelineno-60-13"></a>
</span><span id="__span-60-14"><a id="__codelineno-60-14" name="__codelineno-60-14"></a>Key<span class="w"> </span>Type<span class="w"> </span>:<span class="w"> </span>ED25519
</span><span id="__span-60-15"><a id="__codelineno-60-15" name="__codelineno-60-15"></a>ssh-ed25519<span class="w"> </span>AAAAC3NzaC1lZDI1NTE5AAAAIOV1JvayGmBsryg+uyR/fKwABQ5jllra6mBRnc1pwprY
</span><span id="__span-60-16"><a id="__codelineno-60-16" name="__codelineno-60-16"></a>
</span><span id="__span-60-17"><a id="__codelineno-60-17" name="__codelineno-60-17"></a>
</span><span id="__span-60-18"><a id="__codelineno-60-18" name="__codelineno-60-18"></a>Key<span class="w"> </span>Type<span class="w"> </span>:<span class="w"> </span>RSA<span class="w">       </span>Key<span class="w"> </span>Size<span class="w"> </span>:<span class="w"> </span><span class="m">4096</span>
</span><span id="__span-60-19"><a id="__codelineno-60-19" name="__codelineno-60-19"></a>ssh-rsa<span class="w"> </span>AAAAB3NzaC1yc2EAAAADAQABAAACAQCpG5P1MQOp1q98++nLoVMnwwZFsYgapfB/akN44rJ+ULOusPX95+sGCDl33kBebzeA0+AbkvBNetZRWJ7J+CBihpQ9f9ms6jS4wb1GtlV/HlP9JbpYEPIfCH9HxKHThuMLd36K/UeDkaZo4B22l8DJBIJrYl5T5hVZ73VBqdf7O/UsC9gUGZSDp7nXmCFWc38x8CW6+VBNo0K7MsHHff7ajLAi6lfrlbSOOn/Xzls3eil9bX0uzL69biflyA6y7ESnMX7PFijOoYqz2hp0cxk4La0NSJbRi+efbUyyaZ/0/xYUcnrv/QXYvCPGZEfDOycyBYgtgVD942OO+OZC3NB5jRb6QtIlb+tbw43yGcDdQiFrPUi3cxZlvnUr/CCVrnSaNEj4yliQ+QF9tLG5ap+cbAxW8I6ofy/eX6xvIuNf43ycilN+E/OJbPTvW4lndTATDeyNhHeIrPae87x0Cx0x2sHEi5dXgJdl/IQlrJFNLqydJQq1DSazVSaG7Zfd12a/9XW0fm/1InS/rQ5gd9Rot4Ou/VtNO1+v7CyAG2aaPKLaYSi4jfbCB7NFrbSlqdzLP4ODVzsWZg6CNk9bqmAb/eKaMCXK2u4w0rKVPcQJ5yYWThmAb6X2SUEi3mbGZzOEko2T9uSHpPch1EOJ6gmPkJ7kt53x2fDfbpTcUoBTEw<span class="o">==</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="list-the-enabled-auth-methods">List the enabled auth methods</h3>
<p>Before adding our public key check to make sure publickey authentication is enabled. Public Key Authentication is enabled by default.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-61-1">1</a></span>
<span class="normal"><a href="#__codelineno-61-2">2</a></span>
<span class="normal"><a href="#__codelineno-61-3">3</a></span>
<span class="normal"><a href="#__codelineno-61-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1"></a><span class="hll">show<span class="w"> </span>ssh<span class="w"> </span>authentication-method
</span></span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2"></a><span class="w"> </span>SSH<span class="w"> </span>publickey<span class="w"> </span>authentication<span class="w">  </span>:<span class="w"> </span>Enabled
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3"></a><span class="w"> </span>SSH<span class="w"> </span>password<span class="w"> </span>authentication<span class="w">   </span>:<span class="w"> </span>Enabled
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4"></a><span class="w"> </span>SSH<span class="w"> </span>two<span class="w"> </span>factor<span class="w"> </span>authentication<span class="w"> </span>:<span class="w"> </span>Disabled
</span></code></pre></div></td></tr></table></div>
<p>Public key authentication can be enabled/disabled using the following:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-62-1">1</a></span>
<span class="normal"><a href="#__codelineno-62-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1"></a><span class="hll">no<span class="w"> </span>ssh<span class="w"> </span>public-key-authentication
</span></span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2"></a>ssh<span class="w"> </span>public-key-authentication
</span></code></pre></div></td></tr></table></div>
<h3 id="add-your-public-key">Add your public key</h3>
<p>This is where the Aruba shines! You need to display the public key on your laptop and copy it to the clipboard. In the <a href="#creating-ssh-keys">Creating SSH Keys</a> section we created id_custom_25519, you can use the following commands to view that public key on your computer and copy it to the Aruba:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-63-1">1</a></span>
<span class="normal"><a href="#__codelineno-63-2">2</a></span>
<span class="normal"><a href="#__codelineno-63-3">3</a></span>
<span class="normal"><a href="#__codelineno-63-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1"></a><span class="hll">gnome-text-editor<span class="w"> </span>id_custom_25519.pub
</span></span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2"></a>CX-10-10<span class="o">(</span>config<span class="o">)</span><span class="c1"># user mhubbard authorized-key ssh-ed25519 AAAAC3NzaC1...FC8 mhubbard@HP8600-2328.local-2024-07-08</span>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3"></a>end
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4"></a>write<span class="w"> </span>mem
</span></code></pre></div></td></tr></table></div>
<h3 id="view-the-public-key">View the public key</h3>
<p>In this example, I have copied the public keys from my Linux and Mac laptops:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-64-1">1</a></span>
<span class="normal"><a href="#__codelineno-64-2">2</a></span>
<span class="normal"><a href="#__codelineno-64-3">3</a></span>
<span class="normal"><a href="#__codelineno-64-4">4</a></span>
<span class="normal"><a href="#__codelineno-64-5">5</a></span>
<span class="normal"><a href="#__codelineno-64-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1"></a><span class="hll">CX-10-10#<span class="w"> </span>show<span class="w"> </span>user<span class="w"> </span>mhubbard<span class="w"> </span>authorized-key
</span></span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2"></a>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3"></a><span class="m">1</span>.<span class="w"> </span>ed25519<span class="w"> </span>AAAAC3NzaC1lZDI1NTE5...uxn<span class="w"> </span>mhubbard@1S1K-G5-5587-2024-07-08
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4"></a>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5"></a><span class="m">2</span>.<span class="w"> </span>Key<span class="w"> </span>Type<span class="w"> </span>:<span class="w"> </span>ED25519
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6"></a>ssh-ed25519<span class="w"> </span>AAAAC3NzaC1lZDI1NT...KFC8<span class="w"> </span>mhubbard@HP8600-2328.local-2024-07-08
</span></code></pre></div></td></tr></table></div>
<p>That's all that's needed to setup pulic key login on the Aruba CX switches!</p>
<h3 id="list-logged-in-users">List logged in users</h3>
<p>I logged into the switch from my Linux and Mac laptops:</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-65-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-65-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-65-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-65-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-65-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-65-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-65-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-65-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-65-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-65-10">10</a></span>
<span class="normal"><a href="#__codelineno-65-11">11</a></span>
<span class="normal"><a href="#__codelineno-65-12">12</a></span>
<span class="normal"><a href="#__codelineno-65-13">13</a></span>
<span class="normal"><a href="#__codelineno-65-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1"></a><span class="hll">show ssh server sessions all-vrfs
</span></span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2"></a>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3"></a>SSH sessions on VRF default :
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4"></a>    IPv4 SSH Sessions :
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5"></a>        Server IP        : 192.168.10.233
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6"></a>        Client IP        : 192.168.10.106
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7"></a>        Client Port      : 64407
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8"></a>
</span><span id="__span-65-9"><a id="__codelineno-65-9" name="__codelineno-65-9"></a>        Server IP        : 192.168.10.233
</span><span id="__span-65-10"><a id="__codelineno-65-10" name="__codelineno-65-10"></a>        Client IP        : 192.168.10.130
</span><span id="__span-65-11"><a id="__codelineno-65-11" name="__codelineno-65-11"></a>        Client Port      : 42954
</span><span id="__span-65-12"><a id="__codelineno-65-12" name="__codelineno-65-12"></a>
</span><span id="__span-65-13"><a id="__codelineno-65-13" name="__codelineno-65-13"></a>    IPv6 SSH Sessions :
</span><span id="__span-65-14"><a id="__codelineno-65-14" name="__codelineno-65-14"></a>        IPv6 session does not exist.
</span></code></pre></div></td></tr></table></div>
<h3 id="configure-key-exchange">Configure Key Exchange</h3>
<p>The default key exchange algorithms are good but <code>diffie-hellman-group14-sha1</code> is available. Since I'm using Ubuntu 24.04 and this switch is in my lab I changed the algorithms using the following. Notice that no comma is used between the algorithms.:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-66-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1"></a><span class="hll">ssh<span class="w"> </span>key-exchange-algorithms<span class="w"> </span>curve25519-sha256<span class="w"> </span>curve25519-sha256@libssh.org<span class="w"> </span>ecdh-sha2-nistp256<span class="w"> </span>ecdh-sha2-nistp384<span class="sb">`</span>
</span></span></code></pre></div></td></tr></table></div>
<h3 id="configure-macs">Configure MACs</h3>
<p>MAC stands for  message authentication code. In SSH it's actually HMAC, or Hash Message Authentication code. The default MACs are good but it does include <code>hmac-sha1</code> which is weak. Since I'm using Ubuntu 24.04 and this switch is in my lab I changed the MACs using the following. Notice that no comma is used between the macs.:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-67-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1"></a><span class="hll">ssh<span class="w"> </span>macs<span class="w"> </span>hmac-sha2-256-etm@openssh.com<span class="w"> </span>hmac-sha2-512-etm@openssh.com<span class="w"> </span>hmac-sha1-etm@openssh.com<span class="w"> </span>hmac-sha2-256<span class="w"> </span>hmac-sha2-512
</span></span></code></pre></div></td></tr></table></div>
<h3 id="configure-the-public-key-algorithms">Configure the Public Key Algorithms</h3>
<p>Again, the default public key algorithms are good but it does include ssh-rsa with is weak.  Since I'm using Ubuntu 24.04 and this switch is in my lab I changed the MACs using the following. I shortened the list substantially, and I really would just use the ssh-ed-25519 if I had all modern clients in my organization. Notice that no comma is used between the algorithms.:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-68-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1"></a><span class="hll">ssh<span class="w"> </span>public-key-algorithms<span class="w"> </span>rsa-sha2-512<span class="w"> </span>ecdsa-sha2-nistp256<span class="w"> </span>ecdsa-sha2-nistp384<span class="w"> </span>ecdsa-sha2-nistp521<span class="w"> </span>ssh-ed25519
</span></span></code></pre></div></td></tr></table></div>
<h3 id="final-ssh-ciphers">Final SSH ciphers</h3>
<p>Here is what the final ssh server configuration looks like. Notice that Aruba doesn't even offer ssh v1, version 2 has been available since 2006. I have no ideas why Cisco and others still ship it.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-69-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-69-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-69-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-69-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-69-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-69-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-69-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-69-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-69-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-69-10">10</a></span>
<span class="normal"><a href="#__codelineno-69-11">11</a></span>
<span class="normal"><a href="#__codelineno-69-12">12</a></span>
<span class="normal"><a href="#__codelineno-69-13">13</a></span>
<span class="normal"><a href="#__codelineno-69-14">14</a></span>
<span class="normal"><a href="#__codelineno-69-15">15</a></span>
<span class="normal"><a href="#__codelineno-69-16">16</a></span>
<span class="normal"><a href="#__codelineno-69-17">17</a></span>
<span class="normal"><a href="#__codelineno-69-18">18</a></span>
<span class="normal"><a href="#__codelineno-69-19">19</a></span>
<span class="normal"><a href="#__codelineno-69-20">20</a></span>
<span class="normal"><a href="#__codelineno-69-21">21</a></span>
<span class="normal"><a href="#__codelineno-69-22">22</a></span>
<span class="normal"><a href="#__codelineno-69-23">23</a></span>
<span class="normal"><a href="#__codelineno-69-24">24</a></span>
<span class="normal"><a href="#__codelineno-69-25">25</a></span>
<span class="normal"><a href="#__codelineno-69-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1"></a><span class="hll">CX-10-10#<span class="w"> </span>show<span class="w"> </span>ssh<span class="w"> </span>server
</span></span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2"></a>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3"></a>SSH<span class="w"> </span>server<span class="w"> </span>configuration<span class="w"> </span>on<span class="w"> </span>VRF<span class="w"> </span>default<span class="w"> </span>:
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4"></a>
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5"></a><span class="w">    </span>IP<span class="w"> </span>Version<span class="w">        </span>:<span class="w"> </span>IPv4<span class="w"> </span>and<span class="w"> </span>IPv6<span class="w">        </span>SSH<span class="w"> </span>Version<span class="w">          </span>:<span class="w"> </span><span class="m">2</span>.0
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6"></a><span class="w">    </span>TCP<span class="w"> </span>Port<span class="w">          </span>:<span class="w"> </span><span class="m">22</span><span class="w">                   </span>Grace<span class="w"> </span>Timeout<span class="w"> </span><span class="o">(</span>sec<span class="o">)</span><span class="w">  </span>:<span class="w"> </span><span class="m">60</span>
</span><span id="__span-69-7"><a id="__codelineno-69-7" name="__codelineno-69-7"></a><span class="w">    </span>Max<span class="w"> </span>Auth<span class="w"> </span>Attempts<span class="w"> </span>:<span class="w"> </span><span class="m">6</span>
</span><span id="__span-69-8"><a id="__codelineno-69-8" name="__codelineno-69-8"></a>
</span><span id="__span-69-9"><a id="__codelineno-69-9" name="__codelineno-69-9"></a><span class="w">    </span>Ciphers:
</span><span id="__span-69-10"><a id="__codelineno-69-10" name="__codelineno-69-10"></a><span class="w">    </span>chacha20-poly1305@openssh.com,<span class="w"> </span>aes128-ctr,<span class="w"> </span>aes192-ctr,<span class="w"> </span>aes256-ctr,
</span><span id="__span-69-11"><a id="__codelineno-69-11" name="__codelineno-69-11"></a><span class="w">    </span>aes128-gcm@openssh.com,<span class="w"> </span>aes256-gcm@openssh.com
</span><span id="__span-69-12"><a id="__codelineno-69-12" name="__codelineno-69-12"></a>
</span><span id="__span-69-13"><a id="__codelineno-69-13" name="__codelineno-69-13"></a><span class="w">    </span>Host<span class="w"> </span>Key<span class="w"> </span>Algorithms:
</span><span id="__span-69-14"><a id="__codelineno-69-14" name="__codelineno-69-14"></a><span class="w">    </span>ssh-ed25519,<span class="w"> </span>ecdsa-sha2-nistp521
</span><span id="__span-69-15"><a id="__codelineno-69-15" name="__codelineno-69-15"></a>
</span><span id="__span-69-16"><a id="__codelineno-69-16" name="__codelineno-69-16"></a><span class="w">    </span>Key<span class="w"> </span>Exchange<span class="w"> </span>Algorithms:
</span><span id="__span-69-17"><a id="__codelineno-69-17" name="__codelineno-69-17"></a><span class="w">    </span>curve25519-sha256,<span class="w"> </span>curve25519-sha256@libssh.org,<span class="w"> </span>ecdh-sha2-nistp256,
</span><span id="__span-69-18"><a id="__codelineno-69-18" name="__codelineno-69-18"></a><span class="w">    </span>ecdh-sha2-nistp384
</span><span id="__span-69-19"><a id="__codelineno-69-19" name="__codelineno-69-19"></a>
</span><span id="__span-69-20"><a id="__codelineno-69-20" name="__codelineno-69-20"></a><span class="w">    </span>MACs:
</span><span id="__span-69-21"><a id="__codelineno-69-21" name="__codelineno-69-21"></a><span class="w">    </span>hmac-sha2-256-etm@openssh.com,<span class="w"> </span>hmac-sha2-512-etm@openssh.com,
</span><span id="__span-69-22"><a id="__codelineno-69-22" name="__codelineno-69-22"></a><span class="w">    </span>hmac-sha1-etm@openssh.com,<span class="w"> </span>hmac-sha2-256,<span class="w"> </span>hmac-sha2-512
</span><span id="__span-69-23"><a id="__codelineno-69-23" name="__codelineno-69-23"></a>
</span><span id="__span-69-24"><a id="__codelineno-69-24" name="__codelineno-69-24"></a><span class="w">    </span>Public<span class="w"> </span>Key<span class="w"> </span>Algorithms:
</span><span id="__span-69-25"><a id="__codelineno-69-25" name="__codelineno-69-25"></a><span class="w">    </span>rsa-sha2-512,<span class="w"> </span>ecdsa-sha2-nistp256,<span class="w"> </span>ecdsa-sha2-nistp384,<span class="w"> </span>ecdsa-sha2-nistp521,
</span><span id="__span-69-26"><a id="__codelineno-69-26" name="__codelineno-69-26"></a><span class="w">    </span>ssh-ed25519
</span></code></pre></div></td></tr></table></div>
<h3 id="reset-cipher-suites">Reset cipher suites</h3>
<p>You can reset individual cipher components or run all of these to get back to factory default settings.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-70-1">1</a></span>
<span class="normal"><a href="#__codelineno-70-2">2</a></span>
<span class="normal"><a href="#__codelineno-70-3">3</a></span>
<span class="normal"><a href="#__codelineno-70-4">4</a></span>
<span class="normal"><a href="#__codelineno-70-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1"></a><span class="hll">no<span class="w"> </span>ssh<span class="w"> </span>ciphers
</span></span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2"></a>no<span class="w"> </span>host-key-algorithms
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3"></a>no<span class="w"> </span>key-exchange-algorithms
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4"></a>no<span class="w"> </span>ssh<span class="w"> </span>macs
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5"></a>no<span class="w"> </span>ssh<span class="w"> </span>public-key-algorithms
</span></code></pre></div></td></tr></table></div>
<h3 id="aruba-cx-ssh-server-commands">Aruba CX SSH server commands</h3>
<p>The following commands cover everything you need to do to configure ssh.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Task</th>
<th style="text-align: left;">Command</th>
<th style="text-align: left;">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Enabling the SSH server</td>
<td style="text-align: left;">ssh server vrf</td>
<td style="text-align: left;">ssh server vrf default</td>
</tr>
<tr>
<td style="text-align: left;">Disabling the SSH server</td>
<td style="text-align: left;">no ssh server vrf</td>
<td style="text-align: left;">no ssh server vrf default</td>
</tr>
<tr>
<td style="text-align: left;">Clearing the list of trusted SSH servers for your user account</td>
<td style="text-align: left;">ssh known-host remove</td>
<td style="text-align: left;">ssh known-host remove 192.168.10.130</td>
</tr>
<tr>
<td style="text-align: left;">Configuring SSH to use a set of ciphers</td>
<td style="text-align: left;">ssh ciphers</td>
<td style="text-align: left;">ssh ciphers chacha20-poly1305@openssh.com aes256-ctr aes256-cbc</td>
</tr>
<tr>
<td style="text-align: left;">Configuring SSH to use a set of host key algorithms</td>
<td style="text-align: left;">ssh host-key-algorithms</td>
<td style="text-align: left;">ssh host-key-algorithms ssh-rsa ssh-ed25519 ecdsa-sha2-nistp521</td>
</tr>
<tr>
<td style="text-align: left;">Configuring SSH to use a set of MACs</td>
<td style="text-align: left;">ssh macs</td>
<td style="text-align: left;">ssh macs hmac-sha2-256 hmac-sha2-512</td>
</tr>
<tr>
<td style="text-align: left;">Configuring SSH to use a set of key exchange algorithms</td>
<td style="text-align: left;">ssh key-exchange-algorithms</td>
<td style="text-align: left;">ssh key-exchange-algorithms ecdh-sha2-nistp256</td>
</tr>
<tr>
<td style="text-align: left;">Configuring SSH to use a set of public key algorithms</td>
<td style="text-align: left;">ssh public-key-algorithms</td>
<td style="text-align: left;">ssh public-key-algorithms x509v3-ssh-rsa ssh-rsa rsa-sha2-256</td>
</tr>
<tr>
<td style="text-align: left;">Showing the SSH server configuration</td>
<td style="text-align: left;">show ssh server</td>
<td style="text-align: left;">show ssh server all-vrfs</td>
</tr>
<tr>
<td style="text-align: left;">Showing the active SSH sessions</td>
<td style="text-align: left;">show ssh server sessions</td>
<td style="text-align: left;">show ssh server sessions all-vrfs</td>
</tr>
<tr>
<td style="text-align: left;">Showing the SSH server host keys</td>
<td style="text-align: left;">show ssh host-key</td>
<td style="text-align: left;">show ssh host-key ecdsa</td>
</tr>
<tr>
<td style="text-align: left;">Show state of local password-based (for SSH) and SSH public key authentication</td>
<td style="text-align: left;">show ssh authentication-method</td>
<td style="text-align: left;">show ssh authentication-method</td>
</tr>
<tr>
<td style="text-align: left;">Copying the client SSH public key into the key list</td>
<td style="text-align: left;">user authorized-key</td>
<td style="text-align: left;">user admin authorized-key ssh-ed25519 AAAAC3NzaC1lZD...uxn mhubbard@1S1K-G5-5587-2024-07-08</td>
</tr>
<tr>
<td style="text-align: left;">Removing SSH public keys from the key list</td>
<td style="text-align: left;">user authorized-key</td>
<td style="text-align: left;">no user admin authorized-key 2</td>
</tr>
<tr>
<td style="text-align: left;">Showing the SSH client public key list</td>
<td style="text-align: left;">show user</td>
<td style="text-align: left;">show user admin authorized-key</td>
</tr>
<tr>
<td style="text-align: left;">Configuring SSH idle session timeout</td>
<td style="text-align: left;">cli-session</td>
<td style="text-align: left;"><ul><li>switch(config)# cli-session</li><li> switch(config-cli-session)# timeout 20</li></ul></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="using-the-keys-with-an-hpe-procurve-switch">Using the keys with an HPE Procurve switch</h2>
<hr />
<h2 id="colorizing-the-ssh-output">Colorizing the ssh output</h2>
<p>There is a github project called chromaterm that allows you to colorize the linux <code>screen</code> command which allows you to use a USB serial cable with color. Unfortunately that project was discontinued in 2022. It is still available on github if you want to try it out <a href="https://github.com/hSaria/ChromaTerm">chromaterm</a></p>
<p>Luckily a new project is available called chromaterm-- and works great with the latest version of Ubuntu. Here is the link <a href="https://github.com/Houseman303/ChromaTerm--">chromaterm--</a></p>
<p>On macOS, it's available from brew using <code>brew install hSaria/tap/chromaterm</code></p>
<p>For Ubuntu we will clone the repository and install it. I have a directory 04_tools that I use for networking tools. You should make a directory for tools, cd into it and then run:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/hSaria/ChromaTerm--.git
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="nb">cd</span><span class="w"> </span>ChromaTerm--/src/
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>./configure
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a>sudo<span class="w"> </span>make<span class="w"> </span>install
</span></code></pre></div>
<p>Copy the chromatermrc config file into ~/.chromatermrc. The configuration is written in Perl Compatable Regular Expression v2. You can test new regexes using <a href="https://regex101.com/">Regex101</a>. Set the FLAVOUR to PCRE2 (PHP &gt;=7.3).</p>
<p>You can also use chatGPT to help you create new regexes. Just tell it you need PCRE v2 regexes and it will create a regex. It will probably be an interative deal to get the regex just right.</p>
<p>I found a good starting configuration file <a href="https://gist.github.com/vista-/88c90110dd320be4c78da4f55783b41a">here</a> and then added several Cisco IOS XE regexes.</p>
<p>My config file is at <a href="https://raw.githubusercontent.com/rikosintie/Ubuntu4NetworkEngineers/main/.chromatermrc">Ubuntu4NetworkEngineers</a>. You can click on the linnk, and copy it. Save it to <code>~/.chromatermrc</code></p>
<p>You can use chromaterm with a lot of Linux commands, to use it with ssh simply pipe the output to ct.</p>
<p><code>ssh 192.168.10.253 | ct</code></p>
<p>Here is an <a href="https://asciinema.org/a/670211">asciinema recording</a> of chromaterm-- in action.</p>
<hr />
<h2 id="the-openssh-server">The OpenSSH Server</h2>
<p><img alt="▶" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/25b6.svg" title=":arrow_forward:" /> KEY TAKEAWAYS</p>
<ul>
<li>OpenSSH is a powerful collection of tools for remotely controlling networked computers and transferring data between them.</li>
<li>OpenSSH includes SCP so you can copy files to and from a network device.</li>
<li>OpenSSH can use passwords or public keys to authenticate.</li>
</ul>
<p>Ubuntu comes with an SSH client. If you want to be able to ssh back into your laptop or send files to network devices using SCP you need to install and configure the OpenSSH server. Run these commands to enable the SSH server:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>openssh-server
</span></code></pre></div>
<hr />
<h3 id="useful-ssh-system-commands">Useful SSH system commands</h3>
<ul>
<li>sudo systemctl start ssh - Start the SSH server</li>
<li>sudo systemctl stop ssh - Stop the SSH server</li>
<li>systemctl status ssh - Show server status</li>
<li>sudo systemctl disable ssh – disables SSH server after next reboot</li>
<li>sudo systemctl enable ssh – enables SSH after the next reboot.</li>
</ul>
<p>Example with OpenSSH installed but not started:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-73-1">1</a></span>
<span class="normal"><a href="#__codelineno-73-2">2</a></span>
<span class="normal"><a href="#__codelineno-73-3">3</a></span>
<span class="normal"><a href="#__codelineno-73-4">4</a></span>
<span class="normal"><a href="#__codelineno-73-5">5</a></span>
<span class="normal"><a href="#__codelineno-73-6">6</a></span>
<span class="normal"><a href="#__codelineno-73-7">7</a></span>
<span class="normal"><a href="#__codelineno-73-8">8</a></span>
<span class="normal"><a href="#__codelineno-73-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1"></a><span class="hll"><span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>ssh
</span></span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2"></a>○<span class="w"> </span>ssh.service<span class="w"> </span>-<span class="w"> </span>OpenBSD<span class="w"> </span>Secure<span class="w"> </span>Shell<span class="w"> </span>server
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3"></a><span class="w">     </span>Loaded:<span class="w"> </span>loaded<span class="w"> </span><span class="o">(</span>/lib/systemd/system/ssh.service<span class="p">;</span><span class="w"> </span>disabled<span class="p">;</span><span class="w"> </span>preset:<span class="w"> </span>enabled<span class="o">)</span>
</span><span id="__span-73-4"><a id="__codelineno-73-4" name="__codelineno-73-4"></a><span class="w">    </span>Drop-In:<span class="w"> </span>/etc/systemd/system/ssh.service.d
</span><span id="__span-73-5"><a id="__codelineno-73-5" name="__codelineno-73-5"></a><span class="w">             </span>└─00-socket.conf
</span><span id="__span-73-6"><a id="__codelineno-73-6" name="__codelineno-73-6"></a><span class="w">     </span>Active:<span class="w"> </span>inactive<span class="w"> </span><span class="o">(</span>dead<span class="o">)</span>
</span><span id="__span-73-7"><a id="__codelineno-73-7" name="__codelineno-73-7"></a>TriggeredBy:<span class="w"> </span>●<span class="w"> </span>ssh.socket
</span><span id="__span-73-8"><a id="__codelineno-73-8" name="__codelineno-73-8"></a><span class="w">       </span>Docs:<span class="w"> </span>man:sshd<span class="o">(</span><span class="m">8</span><span class="o">)</span>
</span><span id="__span-73-9"><a id="__codelineno-73-9" name="__codelineno-73-9"></a><span class="w">             </span>man:sshd_config<span class="o">(</span><span class="m">5</span><span class="o">)</span>
</span></code></pre></div></td></tr></table></div>
<p>Notice the Active status is <code>inactive (dead)</code>.</p>
<p>Example with OpenSSH installed and started:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-74-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-74-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-74-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-74-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-74-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-74-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-74-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-74-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-74-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-74-10">10</a></span>
<span class="normal"><a href="#__codelineno-74-11">11</a></span>
<span class="normal"><a href="#__codelineno-74-12">12</a></span>
<span class="normal"><a href="#__codelineno-74-13">13</a></span>
<span class="normal"><a href="#__codelineno-74-14">14</a></span>
<span class="normal"><a href="#__codelineno-74-15">15</a></span>
<span class="normal"><a href="#__codelineno-74-16">16</a></span>
<span class="normal"><a href="#__codelineno-74-17">17</a></span>
<span class="normal"><a href="#__codelineno-74-18">18</a></span>
<span class="normal"><a href="#__codelineno-74-19">19</a></span>
<span class="normal"><a href="#__codelineno-74-20">20</a></span>
<span class="normal"><a href="#__codelineno-74-21">21</a></span>
<span class="normal"><a href="#__codelineno-74-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1"></a><span class="hll">sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>ssh
</span></span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2"></a>
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3"></a><span class="hll">systemctl<span class="w"> </span>status<span class="w"> </span>ssh
</span></span><span id="__span-74-4"><a id="__codelineno-74-4" name="__codelineno-74-4"></a>●<span class="w"> </span>ssh.service<span class="w"> </span>-<span class="w"> </span>OpenBSD<span class="w"> </span>Secure<span class="w"> </span>Shell<span class="w"> </span>server
</span><span id="__span-74-5"><a id="__codelineno-74-5" name="__codelineno-74-5"></a><span class="w">     </span>Loaded:<span class="w"> </span>loaded<span class="w"> </span><span class="o">(</span>/lib/systemd/system/ssh.service<span class="p">;</span><span class="w"> </span>disabled<span class="p">;</span><span class="w"> </span>preset:<span class="w"> </span>enabled<span class="o">)</span>
</span><span id="__span-74-6"><a id="__codelineno-74-6" name="__codelineno-74-6"></a><span class="w">    </span>Drop-In:<span class="w"> </span>/etc/systemd/system/ssh.service.d
</span><span id="__span-74-7"><a id="__codelineno-74-7" name="__codelineno-74-7"></a><span class="w">             </span>└─00-socket.conf
</span><span id="__span-74-8"><a id="__codelineno-74-8" name="__codelineno-74-8"></a><span class="w">     </span>Active:<span class="w"> </span>active<span class="w"> </span><span class="o">(</span>running<span class="o">)</span><span class="w"> </span>since<span class="w"> </span>Mon<span class="w"> </span><span class="m">2024</span>-07-15<span class="w"> </span><span class="m">09</span>:38:12<span class="w"> </span>PDT<span class="p">;</span><span class="w"> </span>4s<span class="w"> </span>ago
</span><span id="__span-74-9"><a id="__codelineno-74-9" name="__codelineno-74-9"></a>TriggeredBy:<span class="w"> </span>●<span class="w"> </span>ssh.socket
</span><span id="__span-74-10"><a id="__codelineno-74-10" name="__codelineno-74-10"></a><span class="w">       </span>Docs:<span class="w"> </span>man:sshd<span class="o">(</span><span class="m">8</span><span class="o">)</span>
</span><span id="__span-74-11"><a id="__codelineno-74-11" name="__codelineno-74-11"></a><span class="w">             </span>man:sshd_config<span class="o">(</span><span class="m">5</span><span class="o">)</span>
</span><span id="__span-74-12"><a id="__codelineno-74-12" name="__codelineno-74-12"></a><span class="w">    </span>Process:<span class="w"> </span><span class="m">3410496</span><span class="w"> </span><span class="nv">ExecStartPre</span><span class="o">=</span>/usr/sbin/sshd<span class="w"> </span>-t<span class="w"> </span><span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited,<span class="w"> </span><span class="nv">status</span><span class="o">=</span><span class="m">0</span>/SUCCESS<span class="o">)</span>
</span><span id="__span-74-13"><a id="__codelineno-74-13" name="__codelineno-74-13"></a><span class="w">   </span>Main<span class="w"> </span>PID:<span class="w"> </span><span class="m">3410497</span><span class="w"> </span><span class="o">(</span>sshd<span class="o">)</span>
</span><span id="__span-74-14"><a id="__codelineno-74-14" name="__codelineno-74-14"></a><span class="w">      </span>Tasks:<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>limit:<span class="w"> </span><span class="m">38055</span><span class="o">)</span>
</span><span id="__span-74-15"><a id="__codelineno-74-15" name="__codelineno-74-15"></a><span class="w">     </span>Memory:<span class="w"> </span><span class="m">1</span>.4M
</span><span id="__span-74-16"><a id="__codelineno-74-16" name="__codelineno-74-16"></a><span class="w">        </span>CPU:<span class="w"> </span>28ms
</span><span id="__span-74-17"><a id="__codelineno-74-17" name="__codelineno-74-17"></a><span class="w">     </span>CGroup:<span class="w"> </span>/system.slice/ssh.service
</span><span id="__span-74-18"><a id="__codelineno-74-18" name="__codelineno-74-18"></a><span class="w">             </span>└─3410497<span class="w"> </span><span class="s2">&quot;sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups&quot;</span>
</span><span id="__span-74-19"><a id="__codelineno-74-19" name="__codelineno-74-19"></a>
</span><span id="__span-74-20"><a id="__codelineno-74-20" name="__codelineno-74-20"></a>Jul<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">09</span>:38:12<span class="w"> </span>1S1K-G5-5587<span class="w"> </span>systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>Starting<span class="w"> </span>ssh.service<span class="w"> </span>-<span class="w"> </span>OpenBSD<span class="w"> </span>Secure<span class="w"> </span>Shell<span class="w"> </span>server...
</span><span id="__span-74-21"><a id="__codelineno-74-21" name="__codelineno-74-21"></a>Jul<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">09</span>:38:12<span class="w"> </span>1S1K-G5-5587<span class="w"> </span>sshd<span class="o">[</span><span class="m">3410497</span><span class="o">]</span>:<span class="w"> </span>Server<span class="w"> </span>listening<span class="w"> </span>on<span class="w"> </span>::<span class="w"> </span>port<span class="w"> </span><span class="m">22</span>.
</span><span id="__span-74-22"><a id="__codelineno-74-22" name="__codelineno-74-22"></a>Jul<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">09</span>:38:12<span class="w"> </span>1S1K-G5-5587<span class="w"> </span>systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>Started<span class="w"> </span>ssh.service<span class="w"> </span>-<span class="w"> </span>OpenBSD<span class="w"> </span>Secure<span class="w"> </span>Shell<span class="w"> </span>server.
</span></code></pre></div></td></tr></table></div>
<p>Notice the Active status is <code>active (running) since Mon 2024-07-15 09:38:12 PDT; 4s ago</code></p>
<p>You can see the daemon starting, listening on port 22, and then the status of the daemon changes to <code>Started ssh.service - OpenBSD Secure Shell server</code></p>
<p>I don't use the <code>sudo systemctl enable ssh</code> command because I don't need SSH running all the time. I start and stop it as needed for added security.</p>
<hr />
<h3 id="edit-the-openssh-configuration-file">Edit the OpenSSH configuration file</h3>
<p>The OpenSSH server configuration file is located at <code>/etc/ssh/ssh_config</code>. To edit the configuration file use the following command:</p>
<p><code>sudo nano /etc/ssh/ssh_config</code> to edit in the terminal
or
<code>sudo gnome-text-editor /etc/ssh/ssh_config</code> if you want a GUI</p>
<p>Tip:
Before editing the configuration file, you should make a copy of the original /etc/ssh/sshd_config file and protect it from writing so you will have the original settings as a reference and to reuse as necessary. You can do this with the following commands:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="w">    </span>sudo<span class="w"> </span>cp<span class="w"> </span>/etc/ssh/sshd_config<span class="w"> </span>/etc/ssh/sshd_config.original
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a><span class="w">    </span>sudo<span class="w"> </span>chmod<span class="w"> </span>a-w<span class="w"> </span>/etc/ssh/sshd_config.original
</span></code></pre></div>
<hr />
<h3 id="check-the-openssh-server-version">Check the OpenSSH server version</h3>
<p>To check the version of the OpenSSH daemon installed:</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-76-1">1</a></span>
<span class="normal"><a href="#__codelineno-76-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1"></a><span class="hll">sshd -V
</span></span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2"></a>OpenSSH_9.3, OpenSSL 3.0.10 1 Aug 2023
</span></code></pre></div></td></tr></table></div>
<hr />
<h3 id="open-the-ssh-port-on-the-firewall">Open the SSH port on the Firewall</h3>
<p>If you need to have a switch connect to your laptop to copy files over SCP or you want to ssh back into the laptop you will need to allow SSH through the firewall.</p>
<p>The following command will allow SSH through the firewall from any IP address.
<code>sudo ufw allow 22/tcp comment 'Open port ssh tcp port 22'</code></p>
<p>If you want to lock down to a specific IP and subnet, in this example the host 192.168.10.100 and subnet 192.168.20.0/24:</p>
<div class="language-c# highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="n">sudo</span><span class="w"> </span><span class="n">ufw</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="mf">192.168.10.100</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="mi">22</span>
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="n">sudo</span><span class="w"> </span><span class="n">ufw</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="mf">192.168.20.0</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="mi">22</span><span class="w"> </span><span class="n">proto</span><span class="w"> </span><span class="n">tcp</span>
</span></code></pre></div>
<hr />
<h3 id="verify-the-ufw-firewall-configuration">Verify the UFW firewall configuration</h3>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-78-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-78-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-78-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-78-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-78-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-78-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-78-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-78-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-78-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-78-10">10</a></span>
<span class="normal"><a href="#__codelineno-78-11">11</a></span>
<span class="normal"><a href="#__codelineno-78-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1"></a><span class="hll">sudo<span class="w"> </span>ufw<span class="w"> </span>status<span class="w"> </span>numbered
</span></span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2"></a><span class="o">[</span>sudo<span class="o">]</span><span class="w"> </span>password<span class="w"> </span><span class="k">for</span><span class="w"> </span>mhubbard:
</span><span id="__span-78-3"><a id="__codelineno-78-3" name="__codelineno-78-3"></a>Status:<span class="w"> </span>active
</span><span id="__span-78-4"><a id="__codelineno-78-4" name="__codelineno-78-4"></a>
</span><span id="__span-78-5"><a id="__codelineno-78-5" name="__codelineno-78-5"></a><span class="w">     </span>To<span class="w">                         </span>Action<span class="w">      </span>From
</span><span id="__span-78-6"><a id="__codelineno-78-6" name="__codelineno-78-6"></a><span class="w">     </span>--<span class="w">                         </span>------<span class="w">      </span>----
</span><span id="__span-78-7"><a id="__codelineno-78-7" name="__codelineno-78-7"></a><span class="o">[</span><span class="w"> </span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="m">514</span>/udp<span class="w">                    </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere
</span><span id="__span-78-8"><a id="__codelineno-78-8" name="__codelineno-78-8"></a><span class="o">[</span><span class="w"> </span><span class="m">2</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/tcp<span class="w">              </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere
</span><span id="__span-78-9"><a id="__codelineno-78-9" name="__codelineno-78-9"></a><span class="o">[</span><span class="w"> </span><span class="m">3</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/udp<span class="w">              </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere
</span><span id="__span-78-10"><a id="__codelineno-78-10" name="__codelineno-78-10"></a><span class="o">[</span><span class="w"> </span><span class="m">4</span><span class="o">]</span><span class="w"> </span><span class="m">514</span>/udp<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">               </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span><span id="__span-78-11"><a id="__codelineno-78-11" name="__codelineno-78-11"></a><span class="o">[</span><span class="w"> </span><span class="m">5</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/tcp<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">         </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span><span id="__span-78-12"><a id="__codelineno-78-12" name="__codelineno-78-12"></a><span class="o">[</span><span class="w"> </span><span class="m">6</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/udp<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">         </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span></code></pre></div></td></tr></table></div>
<p>You can see that I have an IPv6 stack running. I use IPv6 in my home lab. I also have the syslog daemon installed on port 514 and I use GSConnect to communicate with my iPhone and Android phone on ports 1716-1764. Obviously I don't have a rule for SSH so let's add a UFW rule allowing SSH from any address.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-79-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-79-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-79-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-79-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-79-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-79-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-79-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-79-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-79-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-79-10">10</a></span>
<span class="normal"><a href="#__codelineno-79-11">11</a></span>
<span class="normal"><a href="#__codelineno-79-12">12</a></span>
<span class="normal"><a href="#__codelineno-79-13">13</a></span>
<span class="normal"><a href="#__codelineno-79-14">14</a></span>
<span class="normal"><a href="#__codelineno-79-15">15</a></span>
<span class="normal"><a href="#__codelineno-79-16">16</a></span>
<span class="normal"><a href="#__codelineno-79-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1"></a><span class="hll">sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">22</span>/tcp<span class="w"> </span>comment<span class="w"> </span><span class="s1">&#39;Open ssh tcp port 22&#39;</span>
</span></span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2"></a>Rule<span class="w"> </span>added
</span><span id="__span-79-3"><a id="__codelineno-79-3" name="__codelineno-79-3"></a>Rule<span class="w"> </span>added<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span><span id="__span-79-4"><a id="__codelineno-79-4" name="__codelineno-79-4"></a>
</span><span id="__span-79-5"><a id="__codelineno-79-5" name="__codelineno-79-5"></a><span class="hll">sudo<span class="w"> </span>ufw<span class="w"> </span>status<span class="w"> </span>numbered
</span></span><span id="__span-79-6"><a id="__codelineno-79-6" name="__codelineno-79-6"></a>Status:<span class="w"> </span>active
</span><span id="__span-79-7"><a id="__codelineno-79-7" name="__codelineno-79-7"></a>
</span><span id="__span-79-8"><a id="__codelineno-79-8" name="__codelineno-79-8"></a><span class="w">     </span>To<span class="w">                         </span>Action<span class="w">      </span>From
</span><span id="__span-79-9"><a id="__codelineno-79-9" name="__codelineno-79-9"></a><span class="w">     </span>--<span class="w">                         </span>------<span class="w">      </span>----
</span><span id="__span-79-10"><a id="__codelineno-79-10" name="__codelineno-79-10"></a><span class="o">[</span><span class="w"> </span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="m">514</span>/udp<span class="w">                    </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere
</span><span id="__span-79-11"><a id="__codelineno-79-11" name="__codelineno-79-11"></a><span class="o">[</span><span class="w"> </span><span class="m">2</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/tcp<span class="w">              </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere
</span><span id="__span-79-12"><a id="__codelineno-79-12" name="__codelineno-79-12"></a><span class="o">[</span><span class="w"> </span><span class="m">3</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/udp<span class="w">              </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere
</span><span id="__span-79-13"><a id="__codelineno-79-13" name="__codelineno-79-13"></a><span class="o">[</span><span class="w"> </span><span class="m">4</span><span class="o">]</span><span class="w"> </span><span class="m">22</span>/tcp<span class="w">                     </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w">                   </span><span class="c1"># Open port ssh tcp port 22</span>
</span><span id="__span-79-14"><a id="__codelineno-79-14" name="__codelineno-79-14"></a><span class="o">[</span><span class="w"> </span><span class="m">5</span><span class="o">]</span><span class="w"> </span><span class="m">514</span>/udp<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">               </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span><span id="__span-79-15"><a id="__codelineno-79-15" name="__codelineno-79-15"></a><span class="o">[</span><span class="w"> </span><span class="m">6</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/tcp<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">         </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span><span id="__span-79-16"><a id="__codelineno-79-16" name="__codelineno-79-16"></a><span class="o">[</span><span class="w"> </span><span class="m">7</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/udp<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">         </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span><span id="__span-79-17"><a id="__codelineno-79-17" name="__codelineno-79-17"></a><span class="o">[</span><span class="w"> </span><span class="m">8</span><span class="o">]</span><span class="w"> </span><span class="m">22</span>/tcp<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">                </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">              </span><span class="c1"># Open port ssh tcp port 22</span>
</span></code></pre></div></td></tr></table></div>
<hr />
<h3 id="when-finished-with-ssh">When finished with SSH</h3>
<p>You can either disable SSH and remove the rule or just disable SSH if you use it on a regular basis.</p>
<p>From the output above ssh is on lines 4 and 8. Once rule 4 is deleted, rule 8 will become rule 7!</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-80-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-80-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-80-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-80-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-80-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-80-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-80-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-80-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-80-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-80-10">10</a></span>
<span class="normal"><a href="#__codelineno-80-11">11</a></span>
<span class="normal"><a href="#__codelineno-80-12">12</a></span>
<span class="normal"><a href="#__codelineno-80-13">13</a></span>
<span class="normal"><a href="#__codelineno-80-14">14</a></span>
<span class="normal"><a href="#__codelineno-80-15">15</a></span>
<span class="normal"><a href="#__codelineno-80-16">16</a></span>
<span class="normal"><a href="#__codelineno-80-17">17</a></span>
<span class="normal"><a href="#__codelineno-80-18">18</a></span>
<span class="normal"><a href="#__codelineno-80-19">19</a></span>
<span class="normal"><a href="#__codelineno-80-20">20</a></span>
<span class="normal"><a href="#__codelineno-80-21">21</a></span>
<span class="normal"><a href="#__codelineno-80-22">22</a></span>
<span class="normal"><a href="#__codelineno-80-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1"></a><span class="hll">sudo<span class="w"> </span>ufw<span class="w"> </span>delete<span class="w"> </span><span class="m">4</span>
</span></span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2"></a>Deleting:
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3"></a><span class="w"> </span>allow<span class="w"> </span><span class="m">22</span>/tcp<span class="w"> </span>comment<span class="w"> </span><span class="s1">&#39;Open port ssh tcp port 22&#39;</span>
</span><span id="__span-80-4"><a id="__codelineno-80-4" name="__codelineno-80-4"></a>Proceed<span class="w"> </span>with<span class="w"> </span>operation<span class="w"> </span><span class="o">(</span>y<span class="p">|</span>n<span class="o">)</span>?<span class="w"> </span>y
</span><span id="__span-80-5"><a id="__codelineno-80-5" name="__codelineno-80-5"></a>Rule<span class="w"> </span>deleted
</span><span id="__span-80-6"><a id="__codelineno-80-6" name="__codelineno-80-6"></a>
</span><span id="__span-80-7"><a id="__codelineno-80-7" name="__codelineno-80-7"></a><span class="hll">sudo<span class="w"> </span>ufw<span class="w"> </span>delete<span class="w"> </span><span class="m">7</span>
</span></span><span id="__span-80-8"><a id="__codelineno-80-8" name="__codelineno-80-8"></a>Deleting:
</span><span id="__span-80-9"><a id="__codelineno-80-9" name="__codelineno-80-9"></a><span class="w"> </span>allow<span class="w"> </span><span class="m">22</span>/tcp<span class="w"> </span>comment<span class="w"> </span><span class="s1">&#39;Open port ssh tcp port 22&#39;</span>
</span><span id="__span-80-10"><a id="__codelineno-80-10" name="__codelineno-80-10"></a>Proceed<span class="w"> </span>with<span class="w"> </span>operation<span class="w"> </span><span class="o">(</span>y<span class="p">|</span>n<span class="o">)</span>?<span class="w"> </span>y
</span><span id="__span-80-11"><a id="__codelineno-80-11" name="__codelineno-80-11"></a>Rule<span class="w"> </span>deleted<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span><span id="__span-80-12"><a id="__codelineno-80-12" name="__codelineno-80-12"></a>
</span><span id="__span-80-13"><a id="__codelineno-80-13" name="__codelineno-80-13"></a><span class="hll">sudo<span class="w"> </span>ufw<span class="w"> </span>status<span class="w"> </span>numbered
</span></span><span id="__span-80-14"><a id="__codelineno-80-14" name="__codelineno-80-14"></a>Status:<span class="w"> </span>active
</span><span id="__span-80-15"><a id="__codelineno-80-15" name="__codelineno-80-15"></a>
</span><span id="__span-80-16"><a id="__codelineno-80-16" name="__codelineno-80-16"></a><span class="w">     </span>To<span class="w">                         </span>Action<span class="w">      </span>From
</span><span id="__span-80-17"><a id="__codelineno-80-17" name="__codelineno-80-17"></a><span class="w">     </span>--<span class="w">                         </span>------<span class="w">      </span>----
</span><span id="__span-80-18"><a id="__codelineno-80-18" name="__codelineno-80-18"></a><span class="o">[</span><span class="w"> </span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="m">514</span>/udp<span class="w">                    </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere
</span><span id="__span-80-19"><a id="__codelineno-80-19" name="__codelineno-80-19"></a><span class="o">[</span><span class="w"> </span><span class="m">2</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/tcp<span class="w">              </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere
</span><span id="__span-80-20"><a id="__codelineno-80-20" name="__codelineno-80-20"></a><span class="o">[</span><span class="w"> </span><span class="m">3</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/udp<span class="w">              </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere
</span><span id="__span-80-21"><a id="__codelineno-80-21" name="__codelineno-80-21"></a><span class="o">[</span><span class="w"> </span><span class="m">4</span><span class="o">]</span><span class="w"> </span><span class="m">514</span>/udp<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">               </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span><span id="__span-80-22"><a id="__codelineno-80-22" name="__codelineno-80-22"></a><span class="o">[</span><span class="w"> </span><span class="m">5</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/tcp<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">         </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span><span id="__span-80-23"><a id="__codelineno-80-23" name="__codelineno-80-23"></a><span class="o">[</span><span class="w"> </span><span class="m">6</span><span class="o">]</span><span class="w"> </span><span class="m">1716</span>:1764/udp<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span><span class="w">         </span>ALLOW<span class="w"> </span>IN<span class="w">    </span>Anywhere<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</span></code></pre></div></td></tr></table></div>
<hr />
<h3 id="an-alias-to-start-ssh-and-add-the-ufw-rule">An alias to start ssh and add the UFW rule</h3>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-81-1">1</a></span>
<span class="normal"><a href="#__codelineno-81-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1"></a><span class="c1"># start the ssh daemon and display the status</span>
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2"></a><span class="hll"><span class="nb">alias</span><span class="w"> </span>mw-ssh<span class="o">=</span><span class="s1">&#39;sudo systemctl start ssh &amp;&amp; sudo ufw allow 22/tcp comment &quot;Open ssh tcp port 22&quot; &amp;&amp; sudo systemctl status ssh &amp;&amp; sudo ufw status numbered&#39;</span>
</span></span></code></pre></div></td></tr></table></div>
<p>Here is the output of the alias command:</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-82-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-82-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-82-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-82-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-82-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-82-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-82-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-82-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-82-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-82-10">10</a></span>
<span class="normal"><a href="#__codelineno-82-11">11</a></span>
<span class="normal"><a href="#__codelineno-82-12">12</a></span>
<span class="normal"><a href="#__codelineno-82-13">13</a></span>
<span class="normal"><a href="#__codelineno-82-14">14</a></span>
<span class="normal"><a href="#__codelineno-82-15">15</a></span>
<span class="normal"><a href="#__codelineno-82-16">16</a></span>
<span class="normal"><a href="#__codelineno-82-17">17</a></span>
<span class="normal"><a href="#__codelineno-82-18">18</a></span>
<span class="normal"><a href="#__codelineno-82-19">19</a></span>
<span class="normal"><a href="#__codelineno-82-20">20</a></span>
<span class="normal"><a href="#__codelineno-82-21">21</a></span>
<span class="normal"><a href="#__codelineno-82-22">22</a></span>
<span class="normal"><a href="#__codelineno-82-23">23</a></span>
<span class="normal"><a href="#__codelineno-82-24">24</a></span>
<span class="normal"><a href="#__codelineno-82-25">25</a></span>
<span class="normal"><a href="#__codelineno-82-26">26</a></span>
<span class="normal"><a href="#__codelineno-82-27">27</a></span>
<span class="normal"><a href="#__codelineno-82-28">28</a></span>
<span class="normal"><a href="#__codelineno-82-29">29</a></span>
<span class="normal"><a href="#__codelineno-82-30">30</a></span>
<span class="normal"><a href="#__codelineno-82-31">31</a></span>
<span class="normal"><a href="#__codelineno-82-32">32</a></span>
<span class="normal"><a href="#__codelineno-82-33">33</a></span>
<span class="normal"><a href="#__codelineno-82-34">34</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1"></a><span class="hll">mw-ssh
</span></span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2"></a>Rule updated
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3"></a>Rule updated (v6)
</span><span id="__span-82-4"><a id="__codelineno-82-4" name="__codelineno-82-4"></a>● ssh.service - OpenBSD Secure Shell server
</span><span id="__span-82-5"><a id="__codelineno-82-5" name="__codelineno-82-5"></a>     Loaded: loaded (/lib/systemd/system/ssh.service; disabled; preset: enabled)
</span><span id="__span-82-6"><a id="__codelineno-82-6" name="__codelineno-82-6"></a>    Drop-In: /etc/systemd/system/ssh.service.d
</span><span id="__span-82-7"><a id="__codelineno-82-7" name="__codelineno-82-7"></a>             └─00-socket.conf
</span><span id="__span-82-8"><a id="__codelineno-82-8" name="__codelineno-82-8"></a>     Active: active (running) since Mon 2024-07-15 09:38:12 PDT; 3h 53min ago
</span><span id="__span-82-9"><a id="__codelineno-82-9" name="__codelineno-82-9"></a>TriggeredBy: ● ssh.socket
</span><span id="__span-82-10"><a id="__codelineno-82-10" name="__codelineno-82-10"></a>       Docs: man:sshd(8)
</span><span id="__span-82-11"><a id="__codelineno-82-11" name="__codelineno-82-11"></a>             man:sshd_config(5)
</span><span id="__span-82-12"><a id="__codelineno-82-12" name="__codelineno-82-12"></a>    Process: 3410496 ExecStartPre=/usr/sbin/sshd -t (code=exited, status=0/SUCCESS)
</span><span id="__span-82-13"><a id="__codelineno-82-13" name="__codelineno-82-13"></a>   Main PID: 3410497 (sshd)
</span><span id="__span-82-14"><a id="__codelineno-82-14" name="__codelineno-82-14"></a>      Tasks: 1 (limit: 38055)
</span><span id="__span-82-15"><a id="__codelineno-82-15" name="__codelineno-82-15"></a>     Memory: 1.4M
</span><span id="__span-82-16"><a id="__codelineno-82-16" name="__codelineno-82-16"></a>        CPU: 28ms
</span><span id="__span-82-17"><a id="__codelineno-82-17" name="__codelineno-82-17"></a>     CGroup: /system.slice/ssh.service
</span><span id="__span-82-18"><a id="__codelineno-82-18" name="__codelineno-82-18"></a>             └─3410497 &quot;sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups&quot;
</span><span id="__span-82-19"><a id="__codelineno-82-19" name="__codelineno-82-19"></a>
</span><span id="__span-82-20"><a id="__codelineno-82-20" name="__codelineno-82-20"></a>Jul 15 09:38:12 1S1K-G5-5587 systemd[1]: Starting ssh.service - OpenBSD Secure Shell server...
</span><span id="__span-82-21"><a id="__codelineno-82-21" name="__codelineno-82-21"></a>Jul 15 09:38:12 1S1K-G5-5587 sshd[3410497]: Server listening on :: port 22.
</span><span id="__span-82-22"><a id="__codelineno-82-22" name="__codelineno-82-22"></a>Jul 15 09:38:12 1S1K-G5-5587 systemd[1]: Started ssh.service - OpenBSD Secure Shell server.
</span><span id="__span-82-23"><a id="__codelineno-82-23" name="__codelineno-82-23"></a>Status: active
</span><span id="__span-82-24"><a id="__codelineno-82-24" name="__codelineno-82-24"></a>
</span><span id="__span-82-25"><a id="__codelineno-82-25" name="__codelineno-82-25"></a>     To                         Action      From
</span><span id="__span-82-26"><a id="__codelineno-82-26" name="__codelineno-82-26"></a>     --                         ------      ----
</span><span id="__span-82-27"><a id="__codelineno-82-27" name="__codelineno-82-27"></a>[ 1] 514/udp                    ALLOW IN    Anywhere
</span><span id="__span-82-28"><a id="__codelineno-82-28" name="__codelineno-82-28"></a>[ 2] 1716:1764/tcp              ALLOW IN    Anywhere
</span><span id="__span-82-29"><a id="__codelineno-82-29" name="__codelineno-82-29"></a>[ 3] 1716:1764/udp              ALLOW IN    Anywhere
</span><span id="__span-82-30"><a id="__codelineno-82-30" name="__codelineno-82-30"></a>[ 4] 22/tcp                     ALLOW IN    Anywhere                   # Open port ssh tcp port 22
</span><span id="__span-82-31"><a id="__codelineno-82-31" name="__codelineno-82-31"></a>[ 5] 514/udp (v6)               ALLOW IN    Anywhere (v6)
</span><span id="__span-82-32"><a id="__codelineno-82-32" name="__codelineno-82-32"></a>[ 6] 1716:1764/tcp (v6)         ALLOW IN    Anywhere (v6)
</span><span id="__span-82-33"><a id="__codelineno-82-33" name="__codelineno-82-33"></a>[ 7] 1716:1764/udp (v6)         ALLOW IN    Anywhere (v6)
</span><span id="__span-82-34"><a id="__codelineno-82-34" name="__codelineno-82-34"></a>[ 8] 22/tcp (v6)                ALLOW IN    Anywhere (v6)              # Open port ssh tcp port 22
</span></code></pre></div></td></tr></table></div>
<hr />
<h3 id="an-alias-to-stop-ssh-and-remove-the-ufw-rule">An alias to stop ssh and remove the ufw rule</h3>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-83-1">1</a></span>
<span class="normal"><a href="#__codelineno-83-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1"></a><span class="c1"># stop the ssh daemon and display the status</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2"></a><span class="hll"><span class="nb">alias</span><span class="w"> </span>mw-ssh-stop<span class="o">=</span><span class="s1">&#39;sudo systemctl stop ssh &amp;&amp; sudo ufw delete allow 22/tcp &amp;&amp; sudo systemctl status ssh &amp;&amp; sudo ufw status numbered&#39;</span>
</span></span></code></pre></div></td></tr></table></div>
<p>Here is the output of the alias command:</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-84-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-84-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-84-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-84-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-84-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-84-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-84-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-84-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-84-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-84-10">10</a></span>
<span class="normal"><a href="#__codelineno-84-11">11</a></span>
<span class="normal"><a href="#__codelineno-84-12">12</a></span>
<span class="normal"><a href="#__codelineno-84-13">13</a></span>
<span class="normal"><a href="#__codelineno-84-14">14</a></span>
<span class="normal"><a href="#__codelineno-84-15">15</a></span>
<span class="normal"><a href="#__codelineno-84-16">16</a></span>
<span class="normal"><a href="#__codelineno-84-17">17</a></span>
<span class="normal"><a href="#__codelineno-84-18">18</a></span>
<span class="normal"><a href="#__codelineno-84-19">19</a></span>
<span class="normal"><a href="#__codelineno-84-20">20</a></span>
<span class="normal"><a href="#__codelineno-84-21">21</a></span>
<span class="normal"><a href="#__codelineno-84-22">22</a></span>
<span class="normal"><a href="#__codelineno-84-23">23</a></span>
<span class="normal"><a href="#__codelineno-84-24">24</a></span>
<span class="normal"><a href="#__codelineno-84-25">25</a></span>
<span class="normal"><a href="#__codelineno-84-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1"></a><span class="hll">mw-ssh-stop
</span></span><span id="__span-84-2"><a id="__codelineno-84-2" name="__codelineno-84-2"></a>Warning: Stopping ssh.service, but it can still be activated by:
</span><span id="__span-84-3"><a id="__codelineno-84-3" name="__codelineno-84-3"></a>  ssh.socket
</span><span id="__span-84-4"><a id="__codelineno-84-4" name="__codelineno-84-4"></a>Rule deleted
</span><span id="__span-84-5"><a id="__codelineno-84-5" name="__codelineno-84-5"></a>Rule deleted (v6)
</span><span id="__span-84-6"><a id="__codelineno-84-6" name="__codelineno-84-6"></a>○ ssh.service - OpenBSD Secure Shell server
</span><span id="__span-84-7"><a id="__codelineno-84-7" name="__codelineno-84-7"></a>     Loaded: loaded (/lib/systemd/system/ssh.service; disabled; preset: enabled)
</span><span id="__span-84-8"><a id="__codelineno-84-8" name="__codelineno-84-8"></a>    Drop-In: /etc/systemd/system/ssh.service.d
</span><span id="__span-84-9"><a id="__codelineno-84-9" name="__codelineno-84-9"></a>             └─00-socket.conf
</span><span id="__span-84-10"><a id="__codelineno-84-10" name="__codelineno-84-10"></a>     Active: inactive (dead) since Mon 2024-07-15 13:37:02 PDT; 403ms ago
</span><span id="__span-84-11"><a id="__codelineno-84-11" name="__codelineno-84-11"></a>   Duration: 3h 58min 50.090s
</span><span id="__span-84-12"><a id="__codelineno-84-12" name="__codelineno-84-12"></a>TriggeredBy: ● ssh.socket
</span><span id="__span-84-13"><a id="__codelineno-84-13" name="__codelineno-84-13"></a>       Docs: man:sshd(8)
</span><span id="__span-84-14"><a id="__codelineno-84-14" name="__codelineno-84-14"></a>             man:sshd_config(5)
</span><span id="__span-84-15"><a id="__codelineno-84-15" name="__codelineno-84-15"></a>    Process: 3410496 ExecStartPre=/usr/sbin/sshd -t (code=exited, status=0/SUCCESS)
</span><span id="__span-84-16"><a id="__codelineno-84-16" name="__codelineno-84-16"></a>    Process: 3410497 ExecStart=/usr/sbin/sshd -D $SSHD_OPTS (code=exited, status=0/SUCCESS)
</span><span id="__span-84-17"><a id="__codelineno-84-17" name="__codelineno-84-17"></a>   Main PID: 3410497 (code=exited, status=0/SUCCESS)
</span><span id="__span-84-18"><a id="__codelineno-84-18" name="__codelineno-84-18"></a>        CPU: 30ms
</span><span id="__span-84-19"><a id="__codelineno-84-19" name="__codelineno-84-19"></a>
</span><span id="__span-84-20"><a id="__codelineno-84-20" name="__codelineno-84-20"></a>Jul 15 09:38:12 1S1K-G5-5587 systemd[1]: Starting ssh.service - OpenBSD Secure Shell server...
</span><span id="__span-84-21"><a id="__codelineno-84-21" name="__codelineno-84-21"></a>Jul 15 09:38:12 1S1K-G5-5587 sshd[3410497]: Server listening on :: port 22.
</span><span id="__span-84-22"><a id="__codelineno-84-22" name="__codelineno-84-22"></a>Jul 15 09:38:12 1S1K-G5-5587 systemd[1]: Started ssh.service - OpenBSD Secure Shell server.
</span><span id="__span-84-23"><a id="__codelineno-84-23" name="__codelineno-84-23"></a>Jul 15 13:37:02 1S1K-G5-5587 sshd[3410497]: Received signal 15; terminating.
</span><span id="__span-84-24"><a id="__codelineno-84-24" name="__codelineno-84-24"></a>Jul 15 13:37:02 1S1K-G5-5587 systemd[1]: Stopping ssh.service - OpenBSD Secure Shell server...
</span><span id="__span-84-25"><a id="__codelineno-84-25" name="__codelineno-84-25"></a>Jul 15 13:37:02 1S1K-G5-5587 systemd[1]: ssh.service: Deactivated successfully.
</span><span id="__span-84-26"><a id="__codelineno-84-26" name="__codelineno-84-26"></a>Jul 15 13:37:02 1S1K-G5-5587 systemd[1]: Stopped ssh.service - OpenBSD Secure Shell server.
</span></code></pre></div></td></tr></table></div>
<h3 id="references-openssh-server">References - OpenSSH Server</h3>
<ul>
<li><a href="https://www.maketecheasier.com/setup-enable-ssh-ubuntu/">How to Set Up and Use SSH in Linux</a></li>
<li><a href="https://www.cyberciti.biz/faq/ufw-allow-incoming-ssh-connections-from-a-specific-ip-address-subnet-on-ubuntu-debian/">How to open ssh 22/TCP port using ufw on Ubuntu</a></li>
<li><a href="https://www.cyberciti.biz/faq/how-to-delete-a-ufw-firewall-rule-on-ubuntu-debian-linux/">How to delete a UFW firewall rule on Ubuntu</a></li>
</ul>
<hr />
<h2 id="yubico-authenticator">Yubico Authenticator</h2>
<p>Yubico is one of the companies that makes Physical Security keys. These allow you to copy your private key to the Yubico and have access no matter what laptop you are on with just one key. It's beyond the scope of this guide but here are links to Yubico.</p>
<ul>
<li><a href="https://www.yubico.com/products/yubikey-5-overview/">Highest assurance authentication that’s fast and easy</a></li>
<li><a href="https://developers.yubico.com/SSH/Securing_SSH_with_FIDO2.html">Securing SSH Authentication with FIDO2</a></li>
</ul>
<hr />
<h2 id="brute-forcing-ssh">Brute Forcing SSH</h2>
<p>I mentioned in the creating ssh keys section that usernames and passwords are easier to brute-force than keys are. You can use nmap to brute force ssh. In this example I created a file named users.lst and a file named pass.lst with valid user and passwords for the switch.</p>
<p>Obviously an attacker would be using a breach list or a social engineered list of names and passwords. But for demo purposes I didn't want to spend hours running nmap. I have a list of all the passwords that customers have given me over the years that I use in real situations.</p>
<p>I have had to use this method more than once at small school districts and other customers that don't have ISE or Clearpass and have used local creds. I also had to use this once at a Community College that had the network team arrested!</p>
<p>This should make it clear that you should set a limit on the number of login attempts!</p>
<div class="language-c# highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-85-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-85-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-85-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-85-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-85-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-85-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-85-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-85-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-85-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-85-10">10</a></span>
<span class="normal"><a href="#__codelineno-85-11">11</a></span>
<span class="normal"><a href="#__codelineno-85-12">12</a></span>
<span class="normal"><a href="#__codelineno-85-13">13</a></span>
<span class="normal"><a href="#__codelineno-85-14">14</a></span>
<span class="normal"><a href="#__codelineno-85-15">15</a></span>
<span class="normal"><a href="#__codelineno-85-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1"></a><span class="hll"><span class="n">nmap</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">22</span><span class="w"> </span><span class="o">--</span><span class="n">script</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">brute</span><span class="w"> </span><span class="o">--</span><span class="n">script</span><span class="o">-</span><span class="n">args</span><span class="w"> </span><span class="n">userdb</span><span class="o">=</span><span class="p">.</span><span class="o">/</span><span class="n">users</span><span class="p">.</span><span class="n">lst</span><span class="p">,</span><span class="n">passdb</span><span class="o">=</span><span class="p">.</span><span class="o">/</span><span class="n">pass</span><span class="p">.</span><span class="n">lst</span><span class="w"> </span><span class="mf">192.168.10.253</span>
</span></span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2"></a><span class="n">Starting</span><span class="w"> </span><span class="n">Nmap</span><span class="w"> </span><span class="mf">7.95</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="c1">//nmap.org ) at 2024-07-24 23:36 PDT</span>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3"></a><span class="n">NSE</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">ssh</span><span class="o">-</span><span class="n">brute</span><span class="p">]</span><span class="w"> </span><span class="n">Trying</span><span class="w"> </span><span class="n">username</span><span class="o">/</span><span class="n">password</span><span class="w"> </span><span class="n">pair</span><span class="p">:</span><span class="w"> </span><span class="n">mhubbard</span><span class="p">:</span><span class="n">R00tIsTheG0al</span>
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4"></a><span class="n">NSE</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">ssh</span><span class="o">-</span><span class="n">brute</span><span class="p">]</span><span class="w"> </span><span class="n">Trying</span><span class="w"> </span><span class="n">username</span><span class="o">/</span><span class="n">password</span><span class="w"> </span><span class="n">pair</span><span class="p">:</span><span class="w"> </span><span class="n">thubbard</span><span class="p">:</span><span class="n">Sup3rS3cr3t</span>
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5"></a><span class="n">Nmap</span><span class="w"> </span><span class="n">scan</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">3850</span><span class="p">.</span><span class="n">pu</span><span class="p">.</span><span class="n">pri</span><span class="w"> </span><span class="p">(</span><span class="mf">192.168.10.253</span><span class="p">)</span>
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6"></a><span class="n">Host</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nf">up</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0046</span><span class="n">s</span><span class="w"> </span><span class="n">latency</span><span class="p">).</span>
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7"></a>
</span><span id="__span-85-8"><a id="__codelineno-85-8" name="__codelineno-85-8"></a><span class="n">PORT</span><span class="w">   </span><span class="n">STATE</span><span class="w"> </span><span class="n">SERVICE</span>
</span><span id="__span-85-9"><a id="__codelineno-85-9" name="__codelineno-85-9"></a><span class="mi">22</span><span class="o">/</span><span class="n">tcp</span><span class="w"> </span><span class="n">open</span><span class="w">  </span><span class="n">ssh</span>
</span><span id="__span-85-10"><a id="__codelineno-85-10" name="__codelineno-85-10"></a><span class="o">|</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">brute</span><span class="p">:</span>
</span><span id="__span-85-11"><a id="__codelineno-85-11" name="__codelineno-85-11"></a><span class="o">|</span><span class="w">   </span><span class="n">Accounts</span><span class="p">:</span>
</span><span id="__span-85-12"><a id="__codelineno-85-12" name="__codelineno-85-12"></a><span class="o">|</span><span class="w">     </span><span class="n">mhubbard</span><span class="p">:</span><span class="n">R00tIsTheG0al</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Valid</span><span class="w"> </span><span class="n">credentials</span>
</span><span id="__span-85-13"><a id="__codelineno-85-13" name="__codelineno-85-13"></a><span class="o">|</span><span class="w">     </span><span class="n">thubbard</span><span class="p">:</span><span class="n">Sup3rS3cr3t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Valid</span><span class="w"> </span><span class="n">credentials</span>
</span><span id="__span-85-14"><a id="__codelineno-85-14" name="__codelineno-85-14"></a><span class="o">|</span><span class="n">_</span><span class="w">  </span><span class="n">Statistics</span><span class="p">:</span><span class="w"> </span><span class="n">Performed</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">guesses</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="n">seconds</span><span class="p">,</span><span class="w"> </span><span class="n">average</span><span class="w"> </span><span class="n">tps</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span>
</span><span id="__span-85-15"><a id="__codelineno-85-15" name="__codelineno-85-15"></a>
</span><span id="__span-85-16"><a id="__codelineno-85-16" name="__codelineno-85-16"></a><span class="n">Nmap</span><span class="w"> </span><span class="n">done</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">up</span><span class="p">)</span><span class="w"> </span><span class="n">scanned</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">11.07</span><span class="w"> </span><span class="n">seconds</span>
</span></code></pre></div></td></tr></table></div>
<hr />
<h2 id="general-ssh-references">General SSH  References</h2>
<ul>
<li><a href="https://blog.g3rt.nl/upgrade-your-ssh-keys.html">Upgrade your SSH keys!</a> - In this post I'll demonstrate how to transition to an Ed25519 type of key smoothly, why you would want this and show some tips and tricks on the way there.</li>
<li><a href="https://mwhubbard.blogspot.com/2015/07/authenticating-to-cisco-devices-using_92.html">Authenticating to Cisco devices using SSH and your RSA Public Key</a> - Here is a blog post I did on setting up the network device to use ssh keys.</li>
<li><a href="https://community.cisco.com/t5/security-knowledge-base/why-you-should-be-using-scrypt-for-cisco-router-password-storage/ta-p/3157196">Why you should be using scrypt for Cisco Router Password Storage</a></li>
<li><a href="https://www.ssh.com/academy/ssh/command">SSH Command - Usage, Options, Configuration</a> - SSH Academy tips and tricks</li>
<li><a href="https://www.ssh.com/academy/ssh/sshd_config">sshd_config - How to Configure the OpenSSH Server?</a> SSH Academy Tutorial on SSH server configuration</li>
<li><a href="https://www.arubanetworks.com/techdocs/AOS-CX/10.07/HTML/5200-7837/Content/Chp_SSH_serv/SSH_serv_cmds/ssh-cip.htm">Aruba CX ssh ciphers</a> - The Aruba CX platform supports state of the art crypto!</li>
<li><a href="https://wiki.archlinux.org/title/OpenSSH">Arch wiki on ssh server</a> Good information on OpenSSH including configuring Google Authenticator</li>
<li><a href="https://wiki.archlinux.org/title/SSH_keys">Arch wiki on ssh keys</a> - As always, the Arch wiki has a great page on ssh</li>
<li><a href="https://www.freecodecamp.org/news/the-ultimate-guide-to-ssh-setting-up-ssh-keys/">The Ultimate Guide to SSH - Setting Up SSH Keys</a></li>
</ul>
<hr />
<h2 id="apendix-a-ios-xe-ciphers">Apendix A - IOS-XE CIPHERS</h2>
<ul>
<li>From Cisco IOS XE Release 17.10, the Secure Shell Version 1.99 is not supported.</li>
<li>From Cisco IOS XE Release 17.10, the minimum RSA key pair size must be 2048 bits.</li>
<li>From Cisco IOS XE Release 17.11, if you want to continue using the weak RSA key, disable CSDL compliance on the device using the <code>crypto engine compliance shield disable</code> command, and reboot.</li>
</ul>
<h3 id="secure-shell-version-2">Secure Shell Version 2</h3>
<p>The configuration for the SSH Version 2 server is similar to the configuration for SSH Version 1. The ip ssh version command defines the SSH version to be configured. If you do not configure this command, SSH by default runs in compatibility mode; that is, both SSH Version 1 and SSH Version 2 connections are honored.</p>
<p>The <code>ip ssh rsa keypair-name</code> command enables an SSH connection using the Rivest, Shamir, and Adleman (RSA) keys that you have configured. Previously, SSH was linked to the first RSA keys that were generated (that is, SSH was enabled when the first RSA key pair was generated). This behavior still exists, but by using the <code>ip ssh rsa keypair-name</code> command, you can overcome this behavior.</p>
<p>If you configure the <code>ip ssh rsa keypair-name</code> command with a key pair name, SSH is enabled if the key pair exists or SSH will be enabled if the key pair is generated later. If you use this command to enable SSH, you are not forced to configure a hostname and a domain name, which was required in SSH Version 1 of the Cisco software.</p>
<hr />
<h3 id="supported-algorithms">Supported Algorithms</h3>
<table>
<thead>
<tr>
<th style="text-align: center;">Supported Algorithms</th>
<th>Default</th>
<th style="text-align: center;">Non-Default</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Encryption</td>
<td>chacha20-poly1305@openssh.com <br> aes128-gcm@openssh.com <br> aes256-gcm@openssh.com <br> aes128-gcm <br> aes256-gcm <br> aes128-ctr <br> aes192-ctr<br>  aes256-ctr</td>
<td style="text-align: center;">aes128-cbc <br> aes192-cbc <br> aes256-cbc <br> 3des-cbc</td>
</tr>
<tr>
<td style="text-align: center;">HMAC</td>
<td>hmac-sha2-256-etm@openssh.com <br> hmac-sha2-512-etm@openssh.com</td>
<td style="text-align: center;">hmac-sha1 <br> hmac-sha2-256 <br> hmac-sha2-512</td>
</tr>
<tr>
<td style="text-align: center;">Host Key</td>
<td>rsa-sha2-512 <br> rsa-sha2-256 <br>ssh-rsa</td>
<td style="text-align: center;">x509v3-ssh-rsa</td>
</tr>
<tr>
<td style="text-align: center;">KEX DH Group</td>
<td>curve25519-sha256 <br> curve25519-sha256@libssh.org <br> ecdh-sha2-nistp256 <br> ecdh-sha2-nistp384 <br> ecdh-sha2-nistp521 <br> diffie-hellman-group14-sha256 <br> diffie-hellman-group16-sha512</td>
<td style="text-align: center;">diffie-hellman-group14-sha1</td>
</tr>
<tr>
<td style="text-align: center;">Public Key</td>
<td><br> ssh-rsa <br> ecdsa-sha2-nistp256 <br> ecdsa-sha2-nistp384 <br> ecdsa-sha2-nistp521 <br> ssh-ed25519 <br> x509v3-ecdsa-sha2-nistp256 <br> x509v3-ecdsa-sha2-nistp384 <br> x509v3-ecdsa-sha2-nistp521 <br> rsa-sha2-256 <br> rsa-sha2-512 <br> x509v3-rsa2048-sha256</td>
<td style="text-align: center;">x509v3-ssh-rsa</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../Log_tools/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Log Tools">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Log Tools
              </div>
            </div>
          </a>
        
        
          
          <a href="../KVM-Bridge/" class="md-footer__link md-footer__link--next" aria-label="Next: KVM">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                KVM
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href="https://github.com/rikosintie" target="_blank" rel="noopener">Michael Hubbard</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/rikosintie" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/rikosintie" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/mwhubbard/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.tabs.link", "content.code.copy", "content.code.annotate", "header.autohide", "navigation.expand", "navigation.footer", "navigation.instant", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.highlight", "search.share", "search.suggest", "toc.integrate"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>